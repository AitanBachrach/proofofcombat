(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5301:function(n,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return e(3963)}])},3963:function(n,r,e){"use strict";e.r(r),e.d(r,{default:function(){return D}});var t=e(5893),o=e(7294),a=e(2192),i=e(2630),s=e(7948),u=e(5861),c=e(4051),l=e.n(c),f=e(4374),d=e(3366),h=e(7462),m=e(6010),x=e(7192),v=e(2151),p=e(7623),y=e(3620);function g(n){return(0,y.Z)("MuiFormGroup",n)}(0,e(6087).Z)("MuiFormGroup",["root","row","error"]);var j=e(4423),b=e(5704);const w=["className","row"],Z=(0,v.ZP)("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(n,r)=>{const{ownerState:e}=n;return[r.root,e.row&&r.row]}})((({ownerState:n})=>(0,h.Z)({display:"flex",flexDirection:"column",flexWrap:"wrap"},n.row&&{flexDirection:"row"})));var P=o.forwardRef((function(n,r){const e=(0,p.Z)({props:n,name:"MuiFormGroup"}),{className:o,row:a=!1}=e,i=(0,d.Z)(e,w),s=(0,j.Z)(),u=(0,b.Z)({props:e,muiFormControl:s,states:["error"]}),c=(0,h.Z)({},e,{row:a,error:u.error}),l=(n=>{const{classes:r,row:e,error:t}=n,o={root:["root",e&&"row",t&&"error"]};return(0,x.Z)(o,g,r)})(c);return(0,t.jsx)(Z,(0,h.Z)({className:(0,m.Z)(l.root,o),ownerState:c,ref:r},i))})),S=e(9402);function k(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function A(n,r,e,t,o,a,i){try{var s=n[a](i),u=s.value}catch(c){return void e(c)}s.done?r(u):Promise.resolve(u).then(t,o)}function C(n){return function(){var r=this,e=arguments;return new Promise((function(t,o){var a=n.apply(r,e);function i(n){A(a,t,o,i,s,"next",n)}function s(n){A(a,t,o,i,s,"throw",n)}i(void 0)}))}}function O(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var t,o,a=[],i=!0,s=!1;try{for(e=e.call(n);!(i=(t=e.next()).done)&&(a.push(t.value),!r||a.length!==r);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==e.return||e.return()}finally{if(s)throw o}}return a}}(n,r)||function(n,r){if(!n)return;if("string"===typeof n)return k(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return k(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(n){var r=function(n){"Enter"===n.key&&b()},e=n.onSignup,a=((0,S.Bl)(),(0,o.useState)("")),s=a[0],c=a[1],d=(0,o.useState)(""),h=d[0],m=d[1],x=O((0,S.Bl)(),2),v=x[0],p=x[1],y=(p.data,p.loading),g=p.error,j=g&&"Username already exists"===g.message;function b(){return w.apply(this,arguments)}function w(){return(w=C(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Attempting to create an account..."),n.prev=1,n.next=4,v({variables:{name:s,password:h}});case 4:e&&e(),n.next=9;break;case 7:n.prev=7,n.t0=n.catch(1);case 9:case"end":return n.stop()}}),n,null,[[1,7]])})))).apply(this,arguments)}return(0,t.jsx)(o.Fragment,{children:(0,t.jsxs)(P,{children:[(0,t.jsx)(u.Z,{children:"Create a new account. You must choose a character name that has not already been used. You may create as many accounts as you would like, however there is no account recovery."}),(0,t.jsx)("br",{}),(0,t.jsx)(f.Z,{helperText:j&&g.message,error:j,label:"Character Name",variant:"outlined",value:s,onChange:function(n){return c(n.target.value)},onKeyPress:r,disabled:y}),(0,t.jsx)("br",{}),(0,t.jsx)(f.Z,{label:"Password",variant:"outlined",type:"password",value:h,onChange:function(n){return m(n.target.value)},onKeyPress:r,disabled:y}),(0,t.jsx)("br",{}),(0,t.jsx)(i.Z,{type:"submit",variant:"contained",onClick:b,disabled:y,children:"Create Account"}),(0,t.jsx)("br",{})]})})}var F=e(1163),_=e(9692);function N(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function $(n,r,e,t,o,a,i){try{var s=n[a](i),u=s.value}catch(c){return void e(c)}s.done?r(u):Promise.resolve(u).then(t,o)}function I(n){return function(){var r=this,e=arguments;return new Promise((function(t,o){var a=n.apply(r,e);function i(n){$(a,t,o,i,s,"next",n)}function s(n){$(a,t,o,i,s,"throw",n)}i(void 0)}))}}function T(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var t,o,a=[],i=!0,s=!1;try{for(e=e.call(n);!(i=(t=e.next()).done)&&(a.push(t.value),!r||a.length!==r);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==e.return||e.return()}finally{if(s)throw o}}return a}}(n,r)||function(n,r){if(!n)return;if("string"===typeof n)return N(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return N(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(){var n=function(n){"Enter"===n.key&&b()},r=(0,F.useRouter)(),e=T((0,_.d)(),2),a=(e[0],e[1]),s=T((0,S.YA)(),2),c=s[0],d=s[1],h=d.loading,m=d.error,x=(0,o.useState)(""),v=x[0],p=x[1],y=(0,o.useState)(""),g=y[0],j=y[1];function b(){return w.apply(this,arguments)}function w(){return(w=I(l().mark((function n(){var e,t,o;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,c({variables:{name:v,password:g}});case 3:if(e=n.sent.data){n.next=6;break}return n.abrupt("return");case 6:t=e.login,o=t.token,a(o),r.push("/play"),n.next=13;break;case 11:n.prev=11,n.t0=n.catch(0);case 13:case"end":return n.stop()}}),n,null,[[0,11]])})))).apply(this,arguments)}return(0,t.jsx)(o.Fragment,{children:(0,t.jsxs)(P,{children:[(0,t.jsx)(u.Z,{children:"Login to existing account."}),(0,t.jsx)("br",{}),(0,t.jsx)(f.Z,{helperText:!!m&&m.message,error:!!m,label:"Character Name",variant:"outlined",onChange:function(n){return p(n.target.value)},disabled:h,onKeyPress:n}),(0,t.jsx)("br",{}),(0,t.jsx)(f.Z,{error:!!m,label:"Password",variant:"outlined",type:"password",onChange:function(n){return j(n.target.value)},disabled:h,onKeyPress:n}),(0,t.jsx)("br",{}),(0,t.jsx)(i.Z,{type:"submit",variant:"contained",onClick:b,disabled:h,children:"Play"})]})})}function L(){var n=(0,o.useState)(!1),r=n[0],e=n[1];return(0,t.jsxs)(s.Z,{maxWidth:"sm",children:[r&&(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(E,{onSignup:function(){return e(!1)}}),(0,t.jsxs)(u.Z,{children:["Already have an account?",(0,t.jsx)(i.Z,{onClick:function(){return e(!1)},children:"Login here"})]})]}),!r&&(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(M,{}),(0,t.jsxs)(u.Z,{children:["Need an account?",(0,t.jsx)(i.Z,{onClick:function(){return e(!0)},children:"Create one"})]})]})]})}var D=function(){return(0,t.jsxs)(a.A,{children:[(0,t.jsx)("br",{}),(0,t.jsx)(L,{})]})}},2192:function(n,r,e){"use strict";e.d(r,{A:function(){return g}});var t=e(5893),o=e(7294),a=e(7948),i=e(9402),s=e(6252),u=e(1163),c=e(2293),l=e(155),f=e(5861),d=e(6886),h=e(2630),m=e(9692);function x(n){var r=n.hero;return console.log({hero:r}),(0,t.jsx)(o.Fragment,{children:(0,t.jsxs)(d.ZP,{container:!0,columns:6,children:[(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Gold: ",r.gold]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Level: ",r.level]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Experience: ",r.experience]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Health: ",r.combat.health," / ",r.combat.maxHealth]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Location: ",r.location.x,", ",r.location.y]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Luck: ",r.stats.luck]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Strength: ",r.stats.strength]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Dexterity: ",r.stats.dexterity]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Constitution: ",r.stats.constitution]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Intelligence: ",r.stats.intelligence]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Wisdom: ",r.stats.wisdom]}),(0,t.jsxs)(d.ZP,{item:!0,lg:1,md:2,xs:3,children:["Charisma: ",r.stats.charisma]})]})})}function v(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,t=new Array(r);e<r;e++)t[e]=n[e];return t}function p(n,r){return function(n){if(Array.isArray(n))return n}(n)||function(n,r){var e=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=e){var t,o,a=[],i=!0,s=!1;try{for(e=e.call(n);!(i=(t=e.next()).done)&&(a.push(t.value),!r||a.length!==r);i=!0);}catch(u){s=!0,o=u}finally{try{i||null==e.return||e.return()}finally{if(s)throw o}}return a}}(n,r)||function(n,r){if(!n)return;if("string"===typeof n)return v(n,r);var e=Object.prototype.toString.call(n).slice(8,-1);"Object"===e&&n.constructor&&(e=n.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return v(n,r)}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(n){var r=n.hero,e=(0,u.useRouter)(),i=(0,s.x)(),v=p((0,m.d)(),2),y=(v[0],v[1]);return(0,t.jsxs)(c.Z,{position:"static",children:[(0,t.jsx)(l.Z,{children:(0,t.jsx)(a.Z,{children:(0,t.jsxs)(d.ZP,{container:!0,columns:3,children:[(0,t.jsx)(d.ZP,{item:!0,xs:2,children:(0,t.jsx)(f.Z,{variant:"h4",children:"Proof of Combat"})}),(0,t.jsx)(d.ZP,{item:!0,xs:1,children:r&&(0,t.jsx)(o.Fragment,{children:(0,t.jsxs)(f.Z,{variant:"h6",align:"right",children:[r.name,(0,t.jsx)("br",{}),(0,t.jsx)(h.Z,{color:"error",variant:"contained",disableElevation:!0,onClick:function(){y(null),i.clearStore(),e.push("/")},children:"Logout"})]})})})]})})}),(0,t.jsx)(a.Z,{children:r&&(0,t.jsx)(x,{hero:r})})]})}function g(n){var r=n.children,e=n.showHero,s=void 0!==e&&e,u=(0,i.UE)({skip:!s}).data;if(u&&s){var c=u.me.account.hero;if(c)return(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(y,{hero:c}),(0,t.jsx)(a.Z,{children:r})]})}return(0,t.jsxs)(o.Fragment,{children:[(0,t.jsx)(y,{}),(0,t.jsx)(a.Z,{children:r})]})}},9402:function(n,r,e){"use strict";e.d(r,{TX:function(){return x},YA:function(){return p},Bl:function(){return g},UE:function(){return b}});var t=e(7283),o=e(1641),a=e(319);function i(n,r,e){return r in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function s(n){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{},t=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(e).filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})))),t.forEach((function(r){i(n,r,e[r])}))}return n}function u(n,r){return r||(r=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(r)}}))}function c(){var n=u(["\n    query GetChatToken {\n  chat {\n    token\n  }\n}\n    "]);return c=function(){return n},n}function l(){var n=u(["\n    mutation Login($name: String!, $password: String!) {\n  login(name: $name, password: $password) {\n    token\n    account {\n      name\n      hero {\n        name\n        level\n        experience\n        combat {\n          health\n          maxHealth\n        }\n        stats {\n          strength\n          dexterity\n          constitution\n          intelligence\n          wisdom\n          charisma\n          luck\n        }\n      }\n    }\n  }\n}\n    "]);return l=function(){return n},n}function f(){var n=u(["\n    mutation Signup($name: String!, $password: String!) {\n  createAccount(name: $name, password: $password) {\n    name\n    hero {\n      name\n    }\n  }\n}\n    "]);return f=function(){return n},n}function d(){var n=u(["\n    query Me {\n  me {\n    account {\n      hero {\n        name\n        level\n        experience\n        gold\n        location {\n          x\n          y\n          map\n        }\n        combat {\n          health\n          maxHealth\n        }\n        stats {\n          dexterity\n          intelligence\n          charisma\n          constitution\n          wisdom\n          luck\n          strength\n        }\n      }\n    }\n  }\n}\n    "]);return d=function(){return n},n}var h={},m=(0,t.Ps)(c());function x(n){var r=s({},h,n);return o.a(m,r)}var v=(0,t.Ps)(l());function p(n){var r=s({},h,n);return a.D(v,r)}var y=(0,t.Ps)(f());function g(n){var r=s({},h,n);return a.D(y,r)}var j=(0,t.Ps)(d());function b(n){var r=s({},h,n);return o.a(j,r)}},9692:function(n,r,e){"use strict";e.d(r,{d:function(){return s}});var t,o=e(7294),a=["undefined"!==typeof localStorage&&null!==(t=localStorage.token)&&void 0!==t?t:null,function(n){a[0]=n,"undefined"!==typeof localStorage&&(localStorage.token=n)}],i=o.createContext(a);function s(){return o.useContext(i)}}},function(n){n.O(0,[935,774,888,179],(function(){return r=5301,n(n.s=r);var r}));var r=n.O();_N_E=r}]);