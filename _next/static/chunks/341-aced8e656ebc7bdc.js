"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[341],{4341:function(e,t,n){n.d(t,{Z:function(){return an}});var r=n(5893),i=n(7294),a=n(1163),o=n(5152),l=n(7357),s=n(7720),c=n(1458),u=n(44),d=n(5861),h=n(6886),m=n(9104),f=n(5670),v=n(7225),x=n(5050),p=n(7018),g=n(4051),y=n.n(g),b=n(1157),j=n(8445),Z=n(5739),S=n(3124),w=n(3321),A=n(7109),k=n(3946),C=n(4054),P=n(3841),I=n(7058),E=n(3984),M=n(6824),W=n(622),L=n(4510),D=n(9402);function F(){var e,t,n,r=(0,D.UE)().data;return null!==(n=null===r||void 0===r||null===(e=r.me)||void 0===e||null===(t=e.account)||void 0===t?void 0:t.hero)&&void 0!==n?n:void 0}var $=n(874),B=n(5645),O=n(3599),T=n(1903);function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function G(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){q(a,r,i,o,l,"next",e)}function l(e){q(a,r,i,o,l,"throw",e)}o(void 0)}))}}function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Q(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e){var t,n,a=e.hero,o=e.to,c=H((0,D.F2)(),2),u=c[0],m=c[1].loading,f=H((0,D.AF)(),2),v=f[0],x=(f[1].loading,(0,D._v)({pollInterval:5e3})),p=x.data,g=x.refetch,b=(0,i.useState)(0),j=b[0],Z=b[1],S=(0,i.useState)(""),A=S[0],k=S[1],I=H((0,D.Fw)(),2),E=I[0],M=I[1].loading||m;if(!(null===p||void 0===p||null===(t=p.me)||void 0===t||null===(n=t.account)||void 0===n?void 0:n.hero))return null;var W=p.me.account.hero,L=W.incomingTrades,F=W.outgoingTrades,Q="Select an item to offer",q=a.inventory.filter((function(e){return e.type!==D.$7.Quest})).sort($.v4);function R(){return(R=G(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=A,e.next=4,E({variables:{offer:{to:o,item:t,gold:j}}});case 4:e.sent,g(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function U(e){return N.apply(this,arguments)}function N(){return(N=G(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{offer:t}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function K(){return(K=G(y().mark((function e(t){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v({variables:{offer:t}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var J=q.find((function(e){return e.id===A}));return(0,r.jsxs)(l.Z,{sx:{p:2,m:1,bgcolor:"background.paper"},children:[(0,r.jsx)(d.Z,{color:"error",variant:"h4",children:"Offer trade"}),(0,r.jsx)(d.Z,{children:"You can offer one of your items for gold, and then the other player must accept."}),(0,r.jsxs)(h.ZP,{sx:{mt:1},container:!0,columns:6,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"trade-item-select-label",children:Q}),(0,r.jsx)(B.Z,{id:"trade-item-select",labelId:"trade-item-select-label",label:Q,value:A,onChange:function(e){return k(e.target.value)},children:q.map((function(e){return(0,r.jsx)(O.Z,{value:e.id,disabled:(0,$.mQ)(a,e),children:(0,$.GJ)(e)},e.id)}))})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(T.Z,{label:"Gold value",value:0===j?"":j,onChange:function(e){var t=Number(e.target.value);!isNaN(t)&&Number.isFinite(t)&&(t=Math.round(Math.max(0,Math.min(2e9,t))),console.log(t),Z(t))}})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsxs)(w.Z,{variant:"contained",fullWidth:!0,disabled:j<=0||!A.length||M,onClick:function(){return R.apply(this,arguments)},children:[J&&"Offer ".concat((0,$.GJ)(J)," for ").concat(j.toLocaleString()," gold"),!J&&"Select an item to offer"]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(s.Z,{})}),L.length>0&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:["Received offers:",(0,r.jsx)(l.Z,{children:L.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(l.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["From: ",(0,r.jsx)("b",{children:e.fromName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,$.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)(w.Z,{sx:{m:1},variant:"contained",color:"success",disabled:M||e.gold>a.gold,onClick:function(){return function(e){return K.apply(this,arguments)}(e.id)},children:"Accept Trade"}),(0,r.jsx)(w.Z,{sx:{m:1},variant:"contained",color:"error",disabled:M,onClick:function(){return U(e.id)},children:"Reject Trade"})]})},e.id)}))})]}),F.length>0&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:["Sent offers:",(0,r.jsx)(l.Z,{children:F.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(l.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["To: ",(0,r.jsx)("b",{children:e.toName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,$.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(w.Z,{variant:"contained",color:"error",disabled:M,onClick:function(){return U(e.id)},children:"Cancel Trade"})]})},e.id)}))})]})]})]})}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function K(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){N(a,r,i,o,l,"next",e)}function l(e){N(a,r,i,o,l,"throw",e)}o(void 0)}))}}function J(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Y="https://chrisinajar.com:2096/";function V(){var e,t,n,a,o=function(e){return e.trim()},s=function(e,t){t!==(null===h||void 0===h?void 0:h.id)&&(console.log("Trying to whisper",e,t.substr(0,4)),ne((function(n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){J(e,t,n[t])}))}return e}({},n,J({},e,{type:"private",heroId:t}))})),X(e))},c=(0,S.Ds)().enqueueSnackbar,h=F(),m=(0,D.TX)().data,x=(0,i.useState)(!1),p=x[0],g=x[1],B=(0,i.useState)([]),O=B[0],T=B[1],Q=(0,i.useState)(!1),q=Q[0],G=Q[1],H=(0,i.useState)(""),U=H[0],N=H[1],V=(0,i.useState)("all"),_=V[0],X=V[1],ee=(0,i.useState)({all:{type:"built-in"},chat:{type:"built-in"},notifications:{type:"built-in"}}),te=ee[0],ne=ee[1],re=(0,i.useRef)();(0,i.useEffect)((function(){var e;if(!re.current&&(null===m||void 0===m||null===(e=m.chat)||void 0===e?void 0:e.token))return re.current=(0,b.io)(Y,{withCredentials:!0,auth:{token:m.chat.token}}),re.current.on("hello",(function(e){T(e.chat)})),re.current.on("chat",(function(e){console.log("Got chat event!",e),T((function(t){return[e].concat(z(t))}))})),re.current.on("notification",(function(e){var t;e.item&&(e.message=e.message.replace("{{item}}",(0,$.GJ)(e.item))),"drop"===e.type?e.item?c("You found ".concat((0,$.GJ)(e.item)),{variant:"success"}):c(e.message,{variant:"success"}):c(e.message,{variant:"info"}),T((function(n){return[{type:null!==(t=e.type)&&void 0!==t?t:"notification",id:Math.random(),time:Date.now()/1e3,message:"",from:e.message,color:"drop"===e.type?"error":"secondary",variant:"body1"}].concat(z(n))}))})),re.current.on("system-message",(function(e){c(e.message,{variant:"warning"}),T((function(t){return[{type:"system",id:Math.random(),time:Date.now()/1e3,message:e.message,from:"",color:e.color,variant:"h6"}].concat(z(t))}))})),function(){re.current&&(re.current.disconnect(),re.current=void 0)}}),[null===m||void 0===m||null===(e=m.chat)||void 0===e?void 0:e.token]);var ie=o(U);function ae(){return oe.apply(this,arguments)}function oe(){return(oe=K(y().mark((function e(){var t;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re.current){e.next=2;break}return e.abrupt("return");case 2:if("private"!==(t=te[_]).type){e.next=7;break}return re.current.emit("private-chat",{to:t.heroId,message:U},(function(e){console.log("Got a confirmation!",e),T((function(t){return[e].concat(z(t))}))})),N(""),e.abrupt("return");case 7:re.current.emit("chat",{message:U},(function(e){console.log("Got a reply!",e),T((function(t){return[e].concat(z(t))}))})),N("");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le,se=O.filter((function(e){if("all"===_)return!0;if("chat"===_)return"chat"===e.type||"private"===e.type||"system"===e.type;if("notifications"===_)return"notification"===e.type||"drop"===e.type||"quest"===e.type||"system"===e.type;var t=te[_];return!t||"private"===t.type&&("private"===e.type&&(e.heroId===t.heroId||e.to===t.heroId))})),ce=q?"Max message: ".concat(140-ie.length,"/").concat(140):"Type here...";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(f.ZP,{value:_,children:(0,r.jsx)(v.Z,{onChange:function(e,t){p&&g(!1),X(t)},"aria-label":"navigation tabs",variant:"scrollable",children:Object.keys(te).map((function(e){return(0,r.jsx)(u.Z,{label:e,value:e},e)}))})}),"notifications"!==_&&(0,r.jsxs)(C.Z,{sx:{marginTop:1},fullWidth:!0,variant:"outlined",children:[(0,r.jsx)(P.Z,{htmlFor:"chat-input",children:ce}),(0,r.jsx)(I.Z,{disabled:!(null===(t=re.current)||void 0===t?void 0:t.connected),value:U,id:"chat-input",name:"Chat input",label:ce,placeholder:"Type here...",onChange:function(e){var t=e.target.value;o(t).length<=140&&N(t)},onFocus:function(){return G(!0)},onBlur:function(){return G(!1)},autoComplete:"off",onKeyPress:function(e){"Enter"!==e.key||ae()},endAdornment:(0,r.jsxs)(A.Z,{position:"end",children:[(0,r.jsx)(E.Z,{title:"Send message",children:(0,r.jsx)(k.Z,{"aria-label":"send chat",onClick:ae,children:(0,r.jsx)(M.Z,{})})}),"private"===(null===(n=te[_])||void 0===n?void 0:n.type)&&(0,r.jsx)(E.Z,{title:p?"Cancel trade":"Trade with player",children:(0,r.jsxs)(k.Z,{onClick:function(){return g(!p)},children:[p&&(0,r.jsx)(L.Z,{}),!p&&(0,r.jsx)(W.Z,{})]})})]})})]}),p&&h&&(null===(a=te[_])||void 0===a?void 0:a.heroId)&&(0,r.jsx)(R,{hero:h,to:null!==(le=te[_].heroId)&&void 0!==le?le:""}),(0,r.jsx)(l.Z,{sx:{padding:1,minHeight:"600px",bgcolor:"background.paper"},children:se.map((function(e){return(0,r.jsxs)(d.Z,{variant:e.variant||"body1",sx:{color:"".concat("private"===e.type?"secondary":e.color||"text",".main")},children:[e.time&&(0,r.jsxs)(d.Z,{variant:"caption",children:["(",(0,Z.S)(new Date(1e3*e.time)),")\xa0"]}),e.heroId&&(0,r.jsx)(w.Z,{onClick:function(){e.heroId&&s(e.from,e.heroId)},sx:{color:"inherit",textTransform:"none",paddingTop:0,paddingBottom:0,paddingLeft:1,paddingRight:.5,margin:0},children:(0,r.jsxs)("b",{children:[e.from,":"]})}),!e.heroId&&(0,r.jsx)("b",{children:e.from})," ",(0,j.emojify)(e.message)]},e.id)}))}),(0,r.jsx)("br",{})]})}var _=n(9835);function X(){var e,t=F(),n=(0,D.W1)({fetchPolicy:"network-only",variables:(null===t||void 0===t?void 0:t.location)?{location:{x:t.location.x,y:t.location.y,map:t.location.map}}:void 0,skip:!(null===t||void 0===t?void 0:t.location)}).data;return null!==(e=null===n||void 0===n?void 0:n.locationDetails)&&void 0!==e?e:null}function ee(){var e=X(),t=(null===e||void 0===e?void 0:e.specialLocations)||[];return t.length?t[0]:null}var te=n(1292),ne=n(5499),re=n(8698),ie=n(7600),ae=n(5826);function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function se(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){le(a,r,i,o,l,"next",e)}function l(e){le(a,r,i,o,l,"throw",e)}o(void 0)}))}}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e){var t,n,a,o=e.autoBattle,l=e.canAutoBattle,s=e.fight,u=s.id,m=s.monster,f=e.onVictory,v=e.onError,x=e.onAutoBattle,p=e.fightMutationRef,g=e.duel,b=(0,i.useState)(!1),j=b[0],Z=b[1],S=ce((0,D.zC)(),2),A=S[0],k=S[1],C=k.data,P=k.loading,I=ce((0,D.E0)(),2),M=I[0],W=I[1],L=W.data,F=W.loading,B=(0,i.useState)(100),O=B[0],T=B[1],Q=(0,i.useState)(D.hK.Melee),q=Q[0],G=Q[1],H=(null===C||void 0===C?void 0:C.fight)||(null===L||void 0===L?void 0:L.attackHero)||null,R=(null===C||void 0===C||null===(t=C.fight)||void 0===t||null===(n=t.monster)||void 0===n?void 0:n.monster)||(null===L||void 0===L||null===(a=L.attackHero)||void 0===a?void 0:a.otherHero)||null,U=!o&&l;function N(e){return K.apply(this,arguments)}function K(){return(K=se(y().mark((function e(t){var n,r,i,a,o,l,s;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(t),e.prev=1,console.log({duel:g,monsterId:u}),!g){e.next=11;break}return e.next=7,M({variables:{id:u,attackType:t}});case 7:r=e.sent,(null===(n=r.data)||void 0===n?void 0:n.attackHero.victory)&&f&&f(),e.next=16;break;case 11:return e.next=14,A({variables:{monster:u,attackType:t}});case 14:a=e.sent,(null===(i=a.data)||void 0===i?void 0:i.fight.victory)&&f&&f();case 16:e.next=30;break;case 18:if(e.prev=18,e.t0=e.catch(1),!e.t0.graphQLErrors||!e.t0.graphQLErrors[0]){e.next=29;break}if(l=ce(e.t0.graphQLErrors,1),s=l[0],!(null===(o=s.extensions)||void 0===o?void 0:o.delay)){e.next=25;break}return e.abrupt("return");case 25:if(!s.message.startsWith("Key not found in database")){e.next=29;break}return Z(!0),T(0),e.abrupt("return");case 29:v&&v(e.t0);case 30:case"end":return e.stop()}}),e,null,[[1,18]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){j&&Z(!1),P||F||T(100*(R?R.combat.health:m.combat.health)/m.combat.maxHealth)}),[null===R||void 0===R?void 0:R.combat.health,null===R||void 0===R?void 0:R.combat.maxHealth,m.combat.maxHealth]),p&&(p.current=N),(0,i.useEffect)((function(){return function(){p&&(p.current=function(){})}}),[]),(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{id:"combat-display",style:{minHeight:"110px"},item:!0,xs:6,children:[(0,r.jsxs)(h.ZP,{container:!0,sx:{textAlign:"center"},columns:6,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:[(0,r.jsxs)(d.Z,{variant:"h4",children:[O>0&&(o?"Auto-Battling":"Battling"),O<=0&&"Dead"," ",m.name]}),(0,r.jsx)(c.Z,{variant:"determinate",value:O,color:"error"})]}),O>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(E.Z,{title:"Attack using your melee weapons, uses strength and dexterity",children:(0,r.jsx)(w.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-melee",onClick:function(){return N(D.hK.Melee)},"aria-label":"melee attack",startIcon:(0,r.jsx)(te.Z,{}),children:"Melee attack"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(E.Z,{title:"Attack using your ranged weapons, uses dexterity",children:(0,r.jsx)(w.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-ranged",onClick:function(){return N(D.hK.Ranged)},"aria-label":"ranged attack",startIcon:(0,r.jsx)(ne.Z,{}),children:"Ranged attack"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(E.Z,{title:"Cast spells using your wisdom and intelligence",children:(0,r.jsx)(w.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-cast",onClick:function(){return N(D.hK.Cast)},"aria-label":"cast spell",startIcon:(0,r.jsx)(re.Z,{}),children:"Cast Spell"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:3,xl:3,children:(0,r.jsx)(E.Z,{title:"Smite your foe using wisdom and willpower",children:(0,r.jsx)(w.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-holy",onClick:function(){return N(D.hK.Smite)},"aria-label":"holy attack",startIcon:(0,r.jsx)(ie.Z,{}),children:"Smite"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:6,md:3,xl:3,children:(0,r.jsx)(E.Z,{title:"Damage yourself to damage the enemy, uses constitution",children:(0,r.jsx)(w.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-blood",onClick:function(){return N(D.hK.Blood)},"aria-label":"blood magic",startIcon:(0,r.jsx)(ae.Z,{}),children:"Blood magic"})})})]})]}),j&&"This enemy was killed by another player",H&&H.log.map((function(e,t){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.Z,{children:[e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[e.damage<0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," heals"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-heal"),children:(0-e.damage).toLocaleString()})," ","health from their enchantments"]}),e.damage>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," dealt"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-damage"),children:e.damage.toLocaleString()})," ","enchantment damage to ",(0,r.jsx)("b",{children:e.to})]})]}),!e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," ".concat(de(e.attackType,e.success,e.critical)," "),(0,r.jsx)("b",{children:e.to}),e.success?" for ".concat(e.damage.toLocaleString()," damage!"):"."]})]})},"".concat(e.from,"-").concat(t))})),H&&H.victory&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{id:"fight-did-win",children:[m.name," has been killed!",(H.experience||H.gold)&&" You gain ",H.gold&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-gold",children:H.gold.toLocaleString()})," ","gold"]}),H.gold&&H.experience&&" and",H.experience&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-experience",children:H.experience.toLocaleString()})," ","experience"]}),(H.experience||H.gold)&&"!! ",H.didLevel&&(0,r.jsx)("b",{id:"fight-level-up",children:"You leveled up!!"})]}),H.drop&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z,{id:"fight-got-drop",variant:"h5",children:["You find an enchanted item on the monster's corpse!",(0,r.jsx)("br",{}),(0,$.GJ)(H.drop)]})]}),(0,r.jsx)("br",{}),U&&(0,r.jsx)(w.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:function(){x&&x(m.id,q)},children:"Auto-Battle this enemy"})]})]})})}function de(e,t,n){switch(e){case D.hK.Blood:return t?n?"surges with blood magic against":"lets blood and casts forth towards":"attempts to cast a spell against";case D.hK.Smite:return t?n?"summons powers beyond this world against":"smites":"attempts to smite";case D.hK.Cast:return t?n?"carefully casts a spell at":"blasts a beam of necrotic energy into":"attempts to cast a spell against";case D.hK.Ranged:return t?n?"lands a sneak attack from the shadows, critically damaging":"fires an arrow at":"shoots an arrow but it misses";case D.hK.Melee:default:return t?n?"lands a crippling blow against":"struck":"missed"}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function fe(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){me(a,r,i,o,l,"next",e)}function l(e){me(a,r,i,o,l,"throw",e)}o(void 0)}))}}function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){if(e){if("string"===typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}function ge(){var e,t,n,a,o=(0,i.useState)(D.hK.Melee),l=o[0],s=o[1],u=(0,i.useState)(0),m=u[0],f=u[1],v=(0,i.useState)(0),x=v[0],p=v[1],g=(0,i.useState)([0,50,100]),b=g[0],j=g[1],Z=(0,i.useRef)((function(){})),S=(0,i.useState)(!1),A=S[0],k=S[1],I=(0,i.useState)(""),E=I[0],M=I[1],W=(0,i.useState)(0),L=W[0],T=W[1],Q=(0,i.useState)(null),q=Q[0],G=Q[1],H=ve((0,_.g)(),2),R=H[0],U=H[1],N=(0,i.useState)(""),K=N[0],J=N[1],z=(0,i.useState)(""),Y=z[0],V=z[1],ee=(0,i.useState)(""),te=ee[0],ne=ee[1],re=(0,i.useState)(""),ie=re[0],ae=re[1],oe=(0,D.Of)(),le=oe.data,se=oe.loading,ce=(oe.error,oe.refetch),de=ve((0,D.Ht)(),1)[0],he=ve((0,D.hL)(),2),me=he[0],pe=he[1].loading,ge=(0,D.pL)(),ye=ge.data,be=ge.refetch,je=(null===ye||void 0===ye?void 0:ye.challenges)||[],Ze=F(),Se=ve((0,D.zC)(),2),we=(Se[0],Se[1]),Ae=(we.data,we.loading),ke=(0,i.useRef)((function(e){})),Ce=X(),Pe=null!==(a=null===Ce||void 0===Ce?void 0:Ce.players)&&void 0!==a?a:[];Pe=Pe.filter((function(e){return e.combat.health>0}));var Ie=null===le||void 0===le||null===(e=le.monsters)||void 0===e?void 0:e.find((function(e){return e.id===q})),Ee=!1,Me=!1;Ze&&(Ee=!!Ze.inventory.find((function(e){return(0,$.h8)(e.baseItem)})),Me=!!Ze.inventory.find((function(e){return(0,$.Ke)(e.baseItem)})));var We=pe||se||Ae;function Le(){return De.apply(this,arguments)}function De(){return(De=fe(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,me();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(n=t.extensions)||void 0===n?void 0:n.delay)&&U(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Fe(){return(Fe=fe(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===le||void 0===le?void 0:le.monsters.find((function(e){return e.id===Y})),G(Y),ae("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=fe(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Be(K));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=fe(y().mark((function e(t){var n,r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,de({variables:{monster:t}});case 4:return r=e.sent.data,e.next=7,ce();case 7:(null===r||void 0===r?void 0:r.challenge)&&G(r.challenge.id),(null===r||void 0===r||null===(n=r.challenge)||void 0===n?void 0:n.id)&&V(null===r||void 0===r||null===(i=r.challenge)||void 0===i?void 0:i.id),T(L+1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),ce();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function Te(){return(Te=fe(y().mark((function e(t,n){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Enabling auto battler! weee!"),k(!0),s(n),f(0),M(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=fe(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ae(te),G("");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,i.useEffect)((function(){return window.setChallengeMonster=J,function(){delete window.setChallengeMonster}}),[J]),(0,i.useEffect)((function(){be(),ce()}),[null===Ze||void 0===Ze?void 0:Ze.location.x,null===Ze||void 0===Ze?void 0:Ze.location.y,null===Ze||void 0===Ze?void 0:Ze.location.map]),Z.current=fe(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p((x+1)%4),j([Math.random()>.5?100*Math.random():b[0],Math.random()>.5?100*Math.random():b[1],Math.random()>.5?100*Math.random():b[2]]),0===x){e.next=4;break}return e.abrupt("return");case 4:if(!(We||R>0)){e.next=6;break}return e.abrupt("return");case 6:if(0!==(null===Ze||void 0===Ze?void 0:Ze.combat.health)){e.next=9;break}return console.log("[AutoBattler] Healing!"),e.abrupt("return",Le());case 9:if(Ie&&0!==Ie.monster.combat.health&&Ie.monster.id===E){e.next=13;break}return console.log("[AutoBattler] Challenging new mob!"),Be(E),e.abrupt("return");case 13:if(!Ie||!ke.current){e.next=17;break}return console.log("[AutoBattler] Fighting ".concat(l,"!")),ke.current(l),e.abrupt("return");case 17:console.log("[AutoBattler] Doing nothing...");case 18:case"end":return e.stop()}}),e)}))),(0,i.useEffect)((function(){if(A&&E.length){var e=setInterval((function(){Z.current()}),(Me?500:2e3)/4);return function(){clearInterval(e)}}}),[A,Me]),(0,i.useEffect)((function(){var e;if(null===le||void 0===le||null===(e=le.monsters)||void 0===e?void 0:e.length){var t=le.monsters.concat().sort((function(e,t){return e.monster.level-t.monster.level}));if(""===Y)V(t[0].id);else le.monsters.find((function(e){return e.id===Y}))||V(t[0].id)}}),[Y,null===le||void 0===le||null===(t=le.monsters)||void 0===t?void 0:t.length]);var qe=null===le||void 0===le||null===(n=le.monsters)||void 0===n?void 0:n.find((function(e){return e.id===Y}));qe||(Y=""),Pe.find((function(e){return e.id===te}))||(te="");var Ge=Pe.find((function(e){return e.id===ie})),He="Select a new monster to challenge",Re="Fight an existing monster!",Ue="Duel with a nearby player!";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:4,children:[!A&&Ze&&Ze.combat.health>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"challenge-monster-select-label",children:He}),(0,r.jsx)(B.Z,{id:"challenge-select",labelId:"challenge-monster-select-label",value:K,label:He,disabled:A,onChange:function(e){return J(e.target.value)},children:je.map((function(e){return(0,r.jsx)(O.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(w.Z,{id:"challenge-button",disabled:!K||R>0||pe||A,onClick:function(){return $e.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"fight-monster-select-label",children:Re}),(0,r.jsx)(B.Z,{id:"fight-select",labelId:"fight-monster-select-label",value:Y,label:Re,disabled:A,onChange:function(e){return V(e.target.value)},children:(null===le||void 0===le?void 0:le.monsters)&&xe(null===le||void 0===le?void 0:le.monsters).sort((function(e,t){return e.monster.level-t.monster.level})).map((function(e){return(0,r.jsxs)(O.Z,{value:e.id,disabled:0===e.monster.combat.health,children:[0===e.monster.combat.health&&"Dead ",e.monster.name]},e.id)}))}),(0,r.jsx)(w.Z,{id:"fight-button",disabled:!Y||R>0||pe||qe&&0===qe.monster.combat.health||A,onClick:function(){return Fe.apply(this,arguments)},variant:"contained",children:"Fight!"})]})}),Pe.length>1&&(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"duel-select-label",children:Ue}),(0,r.jsx)(B.Z,{id:"duel-select",labelId:"duel-select-label",value:te,label:Ue,disabled:A,onChange:function(e){return ne(e.target.value)},children:Pe.filter((function(e){return e.id!==Ze.id})).sort((function(e,t){return e.level-t.level})).map((function(e){return(0,r.jsx)(O.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(w.Z,{id:"duel-button",disabled:!te.length||R>0||pe||A,onClick:function(){return Qe.apply(this,arguments)},variant:"contained",children:"Duel Player!"})]})})]}),A&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:[(0,r.jsx)(c.Z,{sx:{margin:1,color:"#f00"},variant:"determinate",value:b[0],color:"inherit"}),(0,r.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#0f0"},variant:"determinate",value:b[1]}),(0,r.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#00f"},variant:"determinate",value:b[2]}),(0,r.jsx)(w.Z,{fullWidth:!0,variant:"contained",color:"error",size:"large",onClick:function(){return k(!1)},children:"Disable Auto-Battle"})]}),Ze&&Ze.combat.health<=0&&(0,r.jsx)(h.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(d.Z,{id:"you-are-dead",children:"You are dead."})}),Ie&&(0,r.jsx)(ue,{fight:Ie,onError:function(){ce(),G(null)},autoBattle:A,canAutoBattle:Ee,onAutoBattle:function(e,t){return Te.apply(this,arguments)},fightMutationRef:ke,onVictory:function(){return f(m+1)}},"".concat(Ie.id,"-").concat(L)),Ge&&(0,r.jsx)(ue,{fight:{id:Ge.id,monster:Ge},onError:function(){ce(),G(null)},duel:!0,autoBattle:!1,canAutoBattle:!1},"".concat(Ge.id,"-").concat(L)),(0,r.jsx)(h.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(w.Z,{id:"heal-button",fullWidth:!0,onClick:Le,variant:"contained",disabled:R>0||pe||Ze&&Ze.combat.health===Ze.combat.maxHealth,children:"Heal"})})]})})}var ye=n(9692),be=[24,24],je=[128,96],Ze=16;function Se(){var e=F();if(!e)return null;var t=e.location,n=[Math.round(Math.min(je[0]-be[0],Math.max(0,t.x-be[0]/2))),Math.round(Math.min(je[1]-be[1],Math.max(0,t.y-be[1]/2)))];return(0,r.jsx)("div",{style:{position:"relative",display:"inline-block",backgroundImage:"url(/maps/default.jpg)",backgroundPosition:"-".concat(n[0]*Ze,"px -").concat(n[1]*Ze,"px"),width:"".concat(be[0]*Ze,"px"),height:"".concat(be[1]*Ze,"px")},children:(0,r.jsx)("div",{style:{position:"absolute",borderRadius:"".concat(4,"px"),backgroundColor:"red",border:"2px solid rgba(255,255,255,0.3)",left:"".concat((t.x-n[0])*Ze+4,"px"),top:"".concat((t.y-n[1])*Ze+4,"px"),width:"".concat(8,"px"),height:"".concat(8,"px")}})})}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||Ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ce(e,t){if(e){if("string"===typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}function Pe(e){var t=e.location,n=function(e){return(0,$.LW)(e.location,t.location)},a=Ae((0,D.L7)(),2),o=a[0],s=a[1].loading,c=(0,D.dE)().data,u=(0,i.useState)(""),h=u[0],m=u[1],f="Choose a port to sail to";return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h5",children:t.name}),(0,r.jsx)(d.Z,{children:"The wooden docks creak and sway with the water below."}),(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"sail-dock-select-label",children:f}),(0,r.jsx)(B.Z,{id:"sail-select",labelId:"sail-dock-select-label",value:h,label:f,onChange:function(e){return m(e.target.value)},children:(null===c||void 0===c?void 0:c.docks)&&ke(null===c||void 0===c?void 0:c.docks).sort((function(e,t){return n(e)-n(t)})).map((function(e){return(0,r.jsxs)(O.Z,{value:e.name,disabled:e.name===t.name,children:[e.name,":"," ",e.name!==t.name&&(0,r.jsxs)(i.Fragment,{children:[(n=e,Math.round(12*(0,$.LW)(n.location,t.location))).toLocaleString()," Gold"]}),e.name===t.name&&"Current location"]},e.name);var n}))}),(0,r.jsx)(w.Z,{onClick:function(){if(c){var e=c.docks.find((function(e){return e.name===h}));e&&o({variables:{x:e.location.x,y:e.location.y}})}},variant:"outlined",color:"success",disabled:!h.length||s,children:"Sail!"})]})]})}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ee(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function Me(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ee(a,r,i,o,l,"next",e)}function l(e){Ee(a,r,i,o,l,"throw",e)}o(void 0)}))}}function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e){var t=e.shop,n=(0,i.useState)(!1),a=n[0],o=n[1],l=(0,i.useState)(""),c=l[0],u=l[1],h=We((0,D.NA)(),2),m=h[0],f=h[1].loading;function v(){return(v=Me(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("attemptiong trade",t),u(""),e.prev=2,e.next=6,m({variables:{trade:t}});case 6:(null===(r=e.sent)||void 0===r||null===(n=r.data)||void 0===n?void 0:n.npcTrade)&&(u(r.data.npcTrade.message),o(r.data.npcTrade.success)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{mt:1,mb:1}}),(0,r.jsx)(d.Z,{variant:"h4",color:"info.main",children:t.name}),(0,r.jsx)(d.Z,{sx:{mb:2},variant:"subtitle2",color:"info.main",children:"Hermit shop"}),c.length>0&&(0,r.jsx)(d.Z,{sx:{mb:2},variant:"body1",color:a?"success.main":"error.main",children:c}),t.trades.map((function(e,t){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(De,{trade:e}),(0,r.jsx)(w.Z,{disabled:f,onClick:function(){return function(e){return v.apply(this,arguments)}(e.id)},sx:{ml:1},children:"Trade"})]})},"npc shop items ".concat(t))}))]})}function De(e){var t=e.trade;return(0,r.jsxs)(i.Fragment,{children:["For the price of ",(0,r.jsx)(Fe,{price:t.price}),", I'll give you"," ",(0,r.jsx)(Fe,{price:t.offer})]})}function Fe(e){var t=e.price;return(0,r.jsx)(E.Z,{title:$e(t),children:(0,r.jsx)("b",{children:t.description})})}function $e(e){var t,n,r,i=[];return e.gold&&i.push("".concat(e.gold.toLocaleString()," gold")),e.dust&&i.push("".concat(e.dust.toLocaleString()," dust")),(null===(t=e.baseItems)||void 0===t?void 0:t.length)&&e.baseItems.forEach((function(e){i.push("".concat(e))})),(null===(n=e.enchantments)||void 0===n?void 0:n.length)&&e.enchantments.forEach((function(e){i.push("".concat((0,$.uD)(e)))})),(null===(r=e.questItems)||void 0===r?void 0:r.length)&&e.questItems.forEach((function(e){i.push("".concat(e))})),i.length?i.join(", "):"???"}function Be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Oe(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function Te(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Oe(a,r,i,o,l,"next",e)}function l(e){Oe(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Be(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Be(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(){var e=function(e,t){var n=Number(e),r=Number(t);NaN!==n&&NaN!==r&&Number.isFinite(n)&&Number.isFinite(r)&&(console.log({x:n,y:r}),r=Math.min(95,Math.max(0,Math.round(r))),(n=Math.min(127,Math.max(0,Math.round(n))))!==a&&o(n),r!==c&&u(r))},t=F(),n=(0,i.useState)(-1),a=n[0],o=n[1],l=(0,i.useState)(-1),c=l[0],u=l[1],m=Qe((0,_.g)(),2),f=m[0],v=m[1],x=Qe((0,D.gK)(),2),p=x[0],g=x[1].loading,b=Qe((0,D.Q8)(),2),j=b[0],Z=b[1].loading,S=X(),A=ee();if((0,i.useEffect)((function(){t&&(o(t.location.x),u(t.location.y))}),[t]),!t)return null;var k=g||0===t.combat.health||f>0||Z;function C(e){return P.apply(this,arguments)}function P(){return(P=Te(y().mark((function e(t){var n,r;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p({variables:{direction:t}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(r=n.extensions)||void 0===r?void 0:r.delay)&&v(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function I(){return(I=Te(y().mark((function e(){var t,n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j({variables:{x:a,y:c}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(n=t.extensions)||void 0===n?void 0:n.delay)&&v(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var E=Math.round(Math.pow(5*(0,$.LW)(t.location,{x:a,y:c}),1.3));return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:2,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,xs:2,sm:1,children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:3,children:[(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[t.combat.health>0&&(0,r.jsx)(d.Z,{children:"Use buttons to move around the map."}),0===t.combat.health&&(0,r.jsx)(d.Z,{variant:"h6",children:"You cannot move while dead. Heal yourself in the Combat tab."})]}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(w.Z,{disabled:k,variant:"contained",onClick:function(){return C(D.p$.North)},children:"North"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(w.Z,{disabled:k,variant:"contained",onClick:function(){return C(D.p$.West)},children:"West"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsxs)(d.Z,{children:[t.location.x,", ",t.location.y]})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(w.Z,{disabled:k,variant:"contained",onClick:function(){return C(D.p$.East)},children:"East"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(w.Z,{disabled:k,variant:"contained",onClick:function(){return C(D.p$.South)},children:"South"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),t.stats.intelligence>100&&(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,r.jsx)(s.Z,{}),(0,r.jsx)(d.Z,{variant:"h6",color:"secondary",sx:{margin:1},children:"Teleport"}),(0,r.jsx)(T.Z,{label:"X coordinate",value:a,onChange:function(t){return e(t.target.value,c)},sx:{width:"100px",margin:1}}),(0,r.jsx)(T.Z,{label:"Y coordinate",value:c,onChange:function(t){return e(a,t.target.value)},sx:{width:"100px",margin:1}}),(0,r.jsx)("br",{}),(0,r.jsxs)(w.Z,{color:"secondary",variant:"outlined",onClick:function(){return I.apply(this,arguments)},disabled:0===E||E>t.stats.intelligence||k,children:[E>0&&"Teleport for ".concat(E.toLocaleString()," intelligence"),E<=0&&"Teleport"]})]})]})}),(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,sm:1,children:[A&&(0,r.jsx)(d.Z,{variant:"h6",children:A.name}),A&&(0,r.jsx)(d.Z,{variant:"subtitle2",children:A.type}),!A&&S&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Wilderness"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:S.terrain.terrain})]}),!A&&!S&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h6",children:"\xa0"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:"loading..."})]}),(0,r.jsx)(Se,{}),(null===A||void 0===A?void 0:A.description)&&A.description.map((function(e,t){return(0,r.jsx)(d.Z,{variant:"body1",children:e},"loc-desc-".concat(t))}))]}),"dock"===(null===A||void 0===A?void 0:A.type)&&(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(Pe,{location:A})}),(null===S||void 0===S?void 0:S.shop)&&(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(Le,{shop:null===S||void 0===S?void 0:S.shop})})]})})}var Ge,He=n(7948),Re=n(6336);function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ne(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function Ke(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ne(a,r,i,o,l,"next",e)}function l(e){Ne(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Je(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(){var e=Je((0,_.g)(),2),t=e[0],n=e[1],a=(0,i.useState)(1),o=a[0],c=a[1],u=Je((0,D.Y4)(),2),m=u[0],f=u[1].loading,v=F();(null===v||void 0===v?void 0:v.attributePoints)&&(o=Math.min(o,v.attributePoints));var x="Spending ".concat(o.toLocaleString()," attribute points");function p(e){return g.apply(this,arguments)}function g(){return(g=Ke(y().mark((function e(t){var r,i;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Leveling up...",t),e.prev=1,e.next=4,m({variables:{attribute:D.GC[t],amount:o}});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.graphQLErrors&&(null===(r=e.t0.graphQLErrors[0])||void 0===r||null===(i=r.extensions)||void 0===i?void 0:i.delay)&&n(e.t0.graphQLErrors[0].extensions.remaining);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(l.Z,{sx:{backgroundColor:"secondary.light"},children:[(0,r.jsx)("br",{}),(0,r.jsx)(d.Z,{variant:"h5",align:"center",children:"You have leveled up!"}),(0,r.jsxs)(He.Z,{children:[(0,r.jsx)(d.Z,{align:"center",children:"Each of your attributes increases by 1 when you level up. You may also choose an attribute to further increase."}),(0,r.jsx)(l.Z,{sx:{textAlign:"center",align:"center",ml:1,mr:1},children:v&&v.attributePoints>2&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{id:"level-up-stat-slider-label",children:x}),(0,r.jsx)(Re.ZP,{min:1,max:v.attributePoints,value:o,onChange:function(e,t){return!Array.isArray(t)&&c(t)},id:"level-up-stat-slider","aria-labelledby":"level-up-stat-slider-label",valueLabelDisplay:"auto"})]})})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.ZP,{container:!0,columns:14,spacing:2,children:[(0,r.jsx)(E.Z,{title:"Strength determains your damage when attacking with melee weapons",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-strength",disabled:f||t>0,onClick:function(){return p("Strength")},variant:"contained",children:"Strength"})})})}),(0,r.jsx)(E.Z,{title:"Dexterity determines the accuracy and dodge rate for melee and ranged weapons, it also determines ranged weapons damage",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-dexterity",disabled:f||t>0,onClick:function(){return p("Dexterity")},variant:"contained",children:"Dexterity"})})})}),(0,r.jsx)(E.Z,{title:"Constitution determines your max health, and is used in both attacking and defending blood magic",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-constitution",disabled:f||t>0,onClick:function(){return p("Constitution")},variant:"contained",children:"Constitution"})})})}),(0,r.jsx)(E.Z,{title:"Intelligence determines your spellcasting damage",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-intelligence",disabled:f||t>0,onClick:function(){return p("Intelligence")},variant:"contained",children:"Intelligence"})})})}),(0,r.jsx)(E.Z,{title:"Wisdom is your accuracy and dodge stat for spellcasting and smiting",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-wisdom",disabled:f||t>0,onClick:function(){return p("Wisdom")},variant:"contained",children:"Wisdom"})})})}),(0,r.jsx)(E.Z,{title:"Willpower helps you survive attacks by reducing damage, it also helps smiters deal deal more damage.",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-willpower",disabled:f||t>0,onClick:function(){return p("Willpower")},variant:"contained",children:"Willpower"})})})}),(0,r.jsx)(E.Z,{title:"Luck helps you critically strike foes and also affects item drop rates",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-luck",disabled:f||t>0,onClick:function(){return p("Luck")},variant:"contained",children:"Luck"})})})}),(0,r.jsx)(E.Z,{title:"Places 1 in every stat for a more well rounded character",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(w.Z,{id:"level-up-all",disabled:f||t>0,onClick:function(){return p("All")},variant:"contained",children:"All"})})})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(s.Z,{})]})}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ve(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function _e(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Ve(a,r,i,o,l,"next",e)}function l(e){Ve(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var tt=(Xe(Ge={},D.$7.MeleeWeapon,"Melee Weapon"),Xe(Ge,D.$7.RangedWeapon,"Ranged Weapon"),Xe(Ge,D.$7.SpellFocus,"Spell Focus"),Xe(Ge,D.$7.Shield,"Shield"),Xe(Ge,D.$7.BodyArmor,"Body Armor"),Xe(Ge,D.$7.HandArmor,"Gauntlets"),Xe(Ge,D.$7.LegArmor,"Leggings"),Xe(Ge,D.$7.HeadArmor,"Helmet"),Xe(Ge,D.$7.FootArmor,"Greaves"),Ge);function nt(e){var t;return null!==(t=tt[e])&&void 0!==t?t:(0,$.qh)(e)}function rt(e){var t=e.value,n=e.onChange,a=e.sellables,o=function(e){var t="string"===typeof e?e:e.baseItem,n=a.find((function(e){return e.id===t}));return n&&n.cost?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Xe(e,t,n[t])}))}return e}({},n,{cost:Math.round(n.cost/3)}):null},l=F();if(!l)return null;var s=l.inventory.filter((function(e){return!e.enchantment})).filter((function(e){return e.type!==D.$7.Quest})).sort((function(e,t){return e.level-t.level})),c="Sell non-enchanted gear";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"sell-shop-select-label",children:c}),(0,r.jsx)(B.Z,{id:"sell-shop-select",labelId:"sell-shop-select-label",value:t||"",label:c,onChange:function(e){var t=e.target.value,r=l.inventory.find((function(e){return e.id===t}));if(r){var i=o(r);i&&i.cost&&n&&n({id:t,name:(0,$.GJ)(r),cost:i.cost})}},children:s.map((function(e){var t=o(e);return(0,r.jsxs)(O.Z,{value:e.id,disabled:!t||!!e.enchantment||(0,$.mQ)(l,e),children:[(null===t||void 0===t?void 0:t.cost)&&"".concat((0,$.GJ)(e),": ").concat(t.cost.toLocaleString()," Gold"),!(null===t||void 0===t?void 0:t.cost)&&e.name," ",(0,$.mQ)(l,e)&&"*EQUIPPED*"]},e.id)}))})]})})}function it(e){var t=e.type,n=e.items,i=e.value,a=e.onChange,o=F(),l=nt(t),s="".concat(l," Shop");return o?(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"".concat(t,"-shop-select-label"),children:s}),(0,r.jsx)(B.Z,{id:"".concat(t,"-shop-select"),labelId:"".concat(t,"-shop-select-label"),value:i||"",label:s,onChange:function(e){var t=e.target.value,r=n.find((function(e){return e.id===t}));a&&r&&r.cost&&a({id:t,name:r.name,cost:r.cost})},children:n.map((function(e){return(0,r.jsxs)(O.Z,{value:e.id,disabled:!e.cost||e.cost>o.gold,children:[e.cost&&"".concat(e.name,": ").concat(e.cost.toLocaleString()," Gold"),!e.cost&&e.name]},e.id)}))})]}):null}function at(){var e=et((0,_.g)(),1)[0],t=(0,i.useState)(null),n=t[0],a=t[1],o=(0,i.useState)(""),l=o[0],c=o[1],u=(0,D.Cb)(),m=u.data,f=(u.loading,u.error,et((0,D.Nn)(),2)),v=f[0],x=f[1].loading,p=et((0,D.o_)(),2),g=p[0],b=p[1].loading||x||e>0;function j(){return(j=_e(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(null),e.next=6,v({variables:{baseItem:n.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function Z(){return(Z=_e(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(null),e.next=6,g({variables:{item:n.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var S,A="Choose which shop to visit";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{align:"center",children:["Welcome to the shop! You can buy and sell any non-enchanted items here.",(0,r.jsx)("br",{})]}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"shop-type-select-label",children:A}),(0,r.jsxs)(B.Z,{id:"shop-type-select",labelId:"shop-type-select-label",value:l,label:A,onChange:function(e){c(e.target.value),a(null)},children:[(0,r.jsx)(O.Z,{value:"sell",children:"Sell Items"}),(0,r.jsx)(s.Z,{}),(0,r.jsxs)(O.Z,{value:D.$7.MeleeWeapon,children:[nt(D.$7.MeleeWeapon)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.RangedWeapon,children:[nt(D.$7.RangedWeapon)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.SpellFocus,children:[nt(D.$7.SpellFocus)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.Shield,children:[nt(D.$7.Shield)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.BodyArmor,children:[nt(D.$7.BodyArmor)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.HandArmor,children:[nt(D.$7.HandArmor)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.LegArmor,children:[nt(D.$7.LegArmor)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.HeadArmor,children:[nt(D.$7.HeadArmor)," Shop"]}),(0,r.jsxs)(O.Z,{value:D.$7.FootArmor,children:[nt(D.$7.FootArmor)," Shop"]})]})]})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,children:[""!==l&&"sell"!==l&&(0,r.jsx)(it,{value:n?n.id:null,type:l,items:function(e){var t;return(null===m||void 0===m||null===(t=m.shopItems)||void 0===t?void 0:t.length)?m.shopItems.filter((function(t){return t.type===e})):[]}(l),onChange:function(e){return a(e)}},l),"sell"===l&&(0,r.jsx)(rt,{value:n?n.id:null,sellables:null!==(S=null===m||void 0===m?void 0:m.shopItems)&&void 0!==S?S:[],onChange:function(e){return a(e)}})]}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:n&&(0,r.jsxs)(w.Z,{variant:"contained",color:"sell"===l?"error":"success",fullWidth:!0,disabled:b,onClick:"sell"===l?function(){return Z.apply(this,arguments)}:function(){return j.apply(this,arguments)},children:["sell"===l?"Sell":"Buy"," ",n.name," for"," ",n.cost.toLocaleString()," gold"]})})]}),(0,r.jsx)("br",{})]})}function ot(){F();var e=X();ee();return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(at,{}),(null===e||void 0===e?void 0:e.shop)&&(0,r.jsx)(Le,{shop:null===e||void 0===e?void 0:e.shop})]})}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function st(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function ct(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){st(a,r,i,o,l,"next",e)}function l(e){st(a,r,i,o,l,"throw",e)}o(void 0)}))}}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e){var t=e.hero,n=(e.disabled,ut((0,D.Nw)(),2)),a=n[0],o=(n[1].loading,t.level>=t.levelCap);function s(){return(s=ct(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{sx:{padding:1,margin:1},children:[(0,r.jsx)(d.Z,{color:"secondary",variant:"h2",children:"Rebirth"}),!o&&(0,r.jsx)(d.Z,{children:"You may only be reborn when you are at level cap. Keep leveling up your character in order to be reborn!"}),o&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{children:"This will reset your character's level and attributes, however you will keep all gold and items and will receive special bonuses depending on your current level cap."}),(0,r.jsx)("br",{}),(0,r.jsx)(w.Z,{size:"large",variant:"outlined",color:"secondary",onClick:function(){return s.apply(this,arguments)},children:"Reset Character to Level 1"})]})]})}var ht=n(5988),mt=n(9629),ft=n(1733);function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xt(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function pt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){xt(a,r,i,o,l,"next",e)}function l(e){xt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return vt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(e){var t=e.hero,n=e.disabled,a=(0,i.useState)(""),o=a[0],l=a[1],s=gt((0,D.Pw)(),2),c=s[0],u=s[1].loading,h=t.inventory.filter((function(e){return e.type!==D.$7.Quest&&(!(0,$.mQ)(t,e)&&!!e.enchantment)})).sort($.v4),m="Select item to destroy",f=h.find((function(e){return e.id===o}));function v(){return(v=pt(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({variables:{item:o}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return!f&&o.length&&(h.length?(f=h[0],o=f.id):o=""),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Select an enchanted item you would like to destroy, smashing it with the crafting hammer into fine Enchanting Dust."}),(0,r.jsx)("br",{}),(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"destroy-select-label",children:m}),(0,r.jsx)(B.Z,{id:"destroy-select",labelId:"destroy-select-label",value:o||"",label:m,onChange:function(e){var n=e.target.value;t.inventory.find((function(e){return e.id===n}))&&l(n)},children:h.map((function(e){return(0,r.jsxs)(O.Z,{value:e.id,disabled:(0,$.mQ)(t,e),children:[(0,$.GJ)(e)," ",(0,$.mQ)(t,e)&&"*EQUIPPED*"]},e.id)}))}),(0,r.jsxs)(w.Z,{variant:"contained",disabled:!f||n||u,color:"error",onClick:function(){return v.apply(this,arguments)},children:[f&&(0,r.jsxs)(i.Fragment,{children:["Destroy ",(0,$.GJ)(f)]}),!f&&"Select Item"]})]})]})}function bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function Zt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){jt(a,r,i,o,l,"next",e)}function l(e){jt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function St(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||At(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wt(e){return function(e){if(Array.isArray(e))return bt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||At(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function At(e,t){if(e){if("string"===typeof e)return bt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bt(e,t):void 0}}function kt(e){var t=e.hero,n=e.disabled,a=(0,i.useState)(""),o=a[0],s=a[1],c=(0,i.useState)(""),u=c[0],h=c[1],m=St((0,D.mE)(),2),f=m[0],v=m[1].loading,x=t.inventory.filter((function(e){return e.type!==D.$7.Quest&&!e.enchantment})).sort($.v4),p={},g=wt(t.enchantments).sort().filter((function(e){return!p[e]&&(p[e]=!0,!0)})),b=x.find((function(e){return e.id===o}));!b&&o.length&&(x.length?(b=x[0],o=b.id):o="");var j=g.find((function(e){return e===u}));function Z(){return(Z=Zt(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,f({variables:{item:o,enchantment:u}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}!j&&u.length&&(g.length?(j=g[0],u=j):u="");var S=b?b.level:0,A="Select base item",k="Select an enchantment";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Enchanting allows you to combine a pure item and pure enchantment into a new enchanted item! You can acquire pure enchantments through disenchanting items."}),(0,r.jsx)("br",{}),(0,r.jsxs)(C.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(P.Z,{id:"enchant-baseItem-select-label",children:A}),(0,r.jsx)(B.Z,{id:"enchant-baseItem-select",labelId:"enchant-baseItem-select-label",value:o||"",label:A,onChange:function(e){var n=e.target.value;t.inventory.find((function(e){return e.id===n}))&&s(n)},children:x.map((function(e){return(0,r.jsxs)(O.Z,{value:e.id,children:[(0,$.GJ)(e)," ",(0,$.mQ)(t,e)&&"*EQUIPPED*"]},e.id)}))})]}),(0,r.jsxs)(C.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(P.Z,{id:"enchant-enchantment-select-label",children:k}),(0,r.jsx)(B.Z,{id:"enchant-enchantment-select",labelId:"enchant-enchantment-select-label",value:u||"",label:k,onChange:function(e){var t=e.target.value,n=g.find((function(e){return t===e}));n&&h(n)},children:g.map((function(e){return(0,r.jsx)(O.Z,{value:e,children:(0,$.uD)(e)},e)}))})]}),(0,r.jsxs)(w.Z,{fullWidth:!0,variant:"contained",disabled:!b||n||v||S>t.enchantingDust,color:"success",onClick:function(){return Z.apply(this,arguments)},children:[b&&""!==u&&(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{children:["Create"," ",(0,r.jsx)("b",{children:(0,$.FK)(b.baseItem,u)})]}),(0,r.jsxs)(d.Z,{variant:"subtitle2",children:["Costs ",S.toLocaleString()," Enchantment Dust"]})]}),!b&&"Select Item"]})]})}function Ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Pt(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function It(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Pt(a,r,i,o,l,"next",e)}function l(e){Pt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Ct(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ct(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e){var t=e.hero,n=e.disabled,a=(0,i.useState)(""),o=a[0],s=a[1],c=Et((0,D.dg)(),2),u=c[0],h=c[1].loading,m=t.inventory.filter((function(e){return e.type!==D.$7.Quest&&(!(0,$.mQ)(t,e)&&!!e.enchantment)})).sort($.v4),f=m.find((function(e){return e.id===o}));function v(){return(v=It(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{item:o}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}!f&&o.length&&(m.length?(f=m[0],o=f.id):o="");var x="Select item to disenchant",p=f?f.level:0;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Select an item to split from its enchantment. You will keep both the base item and the enchantment itself for use in further crafting."}),(0,r.jsx)("br",{}),(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"disenchant-select-label",children:x}),(0,r.jsx)(B.Z,{id:"disenchant-select",labelId:"disenchant-select-label",value:o||"",label:x,onChange:function(e){var n=e.target.value;t.inventory.find((function(e){return e.id===n}))&&s(n)},children:m.map((function(e){return(0,r.jsxs)(O.Z,{value:e.id,disabled:(0,$.mQ)(t,e),children:[(0,$.GJ)(e)," ",(0,$.mQ)(t,e)&&"*EQUIPPED*"]},e.id)}))}),(0,r.jsxs)(w.Z,{variant:"contained",disabled:!f||n||h||p>t.enchantingDust,color:"error",onClick:function(){return v.apply(this,arguments)},children:[f&&(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{children:["Disenchant ",(0,r.jsx)("b",{children:(0,$.GJ)(f)})]}),(0,r.jsxs)(d.Z,{variant:"subtitle2",children:["Costs ",p.toLocaleString()," Enchantment Dust"]})]}),!f&&"Select Item"]})]})]})}function Wt(e){var t=e.hero,n=e.disabled,a=(0,i.useState)("1"),o=a[0],c=a[1];return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{margin:2}}),(0,r.jsx)(d.Z,{variant:"h2",color:"secondary",children:"Crafting"}),(0,r.jsxs)(d.Z,{variant:"subtitle1",color:"secondary",children:["Enchanting Dust:"," ",(0,r.jsx)("span",{id:"hero-stats-enchanting-dust",children:t.enchantingDust.toLocaleString()})]}),(0,r.jsxs)(d.Z,{variant:"subtitle1",color:"secondary",children:["Enchantments:"," ",(0,r.jsx)("span",{id:"hero-stats-enchantments",children:t.enchantments.length.toLocaleString()})]}),(0,r.jsx)("br",{}),(0,r.jsx)(f.ZP,{value:o,children:(0,r.jsxs)(l.Z,{sx:{flexGrow:1,borderBottom:1,borderColor:"divider",display:"flex"},children:[(0,r.jsxs)(v.Z,{orientation:"vertical",onChange:function(e,t){return c(t)},"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",sx:{flexShrink:0,flexGrow:0,width:"100px"},children:[(0,r.jsx)(u.Z,{icon:(0,r.jsx)(ft.Z,{}),label:"Destroy",value:"1"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(mt.Z,{}),label:"Disenchant",value:"2"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(ht.Z,{}),label:"Enchant",value:"3"})]}),(0,r.jsx)(x.Z,{value:"1",children:(0,r.jsx)(yt,{hero:t,disabled:n})}),(0,r.jsx)(x.Z,{value:"2",children:(0,r.jsx)(Mt,{hero:t,disabled:n})}),(0,r.jsx)(x.Z,{value:"3",children:(0,r.jsx)(kt,{hero:t,disabled:n})})]})})]})}function Lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dt(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function Ft(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Dt(a,r,i,o,l,"next",e)}function l(e){Dt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function $t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e){var t,n=e.hero,a=e.slot,o=e.label,l=e.onEquip,s=e.disabled,c=null===(t=n.equipment[a])||void 0===t?void 0:t.id,u=["leftHand","rightHand","bodyArmor","handArmor","legArmor","headArmor","footArmor"].filter((function(e){return n.equipment[e]&&e!==a})).map((function(e){var t;return null===(t=n.equipment[e])||void 0===t?void 0:t.id})),h=(0,i.useState)(c||""),m=(h[0],h[1]),f=n.inventory.filter((function(e){return function(e,t){switch(e){case"rightHand":case"leftHand":return t.type===D.$7.MeleeWeapon||t.type===D.$7.RangedWeapon||t.type===D.$7.Shield||t.type===D.$7.SpellFocus;case"bodyArmor":return t.type===D.$7.BodyArmor;case"handArmor":return t.type===D.$7.HandArmor;case"legArmor":return t.type===D.$7.LegArmor;case"headArmor":return t.type===D.$7.HeadArmor;case"footArmor":return t.type===D.$7.FootArmor;default:return!1}}(a,e)})).sort($.v4);return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"".concat(a,"-equip-select-label"),children:o}),(0,r.jsx)(B.Z,{id:"".concat(a,"-equip-select"),labelId:"".concat(a,"-equip-select-label"),value:c||"",label:o,disabled:s,onChange:function(e){m(e.target.value),l(a,e.target.value)},children:f.map((function(e){return(0,r.jsxs)(O.Z,{value:e.id,disabled:u.indexOf(e.id)>=0,children:[e.id===c?(0,r.jsx)("b",{children:(0,$.GJ)(e)}):(0,$.GJ)(e),e.enchantment&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",Qt(e.enchantment)]})]},e.id)}))})]})})})}function Ot(e){var t=e.hero,n=e.disabled,a=e.onChange,o=(0,i.useState)(""),l=o[0],s=o[1],c=t.inventory.filter((function(e){return e.type===D.$7.Quest})).sort((function(e,t){return t.level-e.level})),u="Quest items (passive, always active)",h=t.inventory.find((function(e){return e.id===l}));return(0,i.useEffect)((function(){l.length&&!h&&s("")}),[h,l]),(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(C.Z,{fullWidth:!0,children:[(0,r.jsx)(P.Z,{id:"quest-item-label",children:u}),(0,r.jsx)(B.Z,{id:"quest-item",labelId:"quest-item-label",value:l,label:u,disabled:n,onChange:function(e){if(s(e.target.value),a){var t=c.find((function(t){return t.id===e.target.value}));t&&a(t.baseItem)}},children:c.map((function(e){return(0,r.jsxs)(O.Z,{value:e.id,children:[(0,$.GJ)(e),"???"!==Qt(e.baseItem)&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",Qt(e.baseItem)]})]},e.id)}))})]})})})}function Tt(){var e=$t((0,_.g)(),1)[0],t=$t((0,D.aP)(),2),n=t[0],a=t[1].loading,o=(0,i.useState)(""),l=o[0],s=o[1],c=F(),u=a||e>0;if(!c)return null;function m(e,t){return f.apply(this,arguments)}function f(){return(f=Ft(y().mark((function e(t,r){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n({variables:{item:r,slot:t}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.Z,{children:"Equipped items"})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Bt,{hero:c,slot:"leftHand",label:"Left Hand",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Bt,{hero:c,slot:"rightHand",label:"Right Hand",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Bt,{hero:c,slot:"bodyArmor",label:"Body Armor",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Bt,{hero:c,slot:"handArmor",label:"Gauntlets",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Bt,{hero:c,slot:"legArmor",label:"Leggings",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Bt,{hero:c,slot:"headArmor",label:"Helmets",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Bt,{hero:c,slot:"footArmor",label:"Greaves",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ot,{hero:c,disabled:u,onChange:s})}),(0,$.jr)(l)&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(dt,{hero:c,disabled:u})}),(0,$.OB)(l)&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(Wt,{hero:c,disabled:u})})]})})}function Qt(e){switch(e){case"fishermans-strength":return"+50% Strength";case"fishermans-dexterity":return"+50% Dexterity";case"fishermans-constitution":return"+50% Constitution";case"fishermans-intelligence":return"+50% Intelligence";case"fishermans-wisdom":return"+50% Wisdom";case"fishermans-willpower":return"+50% Willpower";case"fishermans-luck":return"+50% Luck";case"totem-of-champion":return"+Level cap, auto-battler, +100% XP";case"totem-of-hero":return"2x Leveling rate, +Level cap, auto-battler, +100% XP";case"warriors-armlette":return"Upgrades Fighter and Berserker classes";case"tome-of-knowledge":return"Upgrades Wizard and Warlock classes";case"quiver-of-speed":return"Upgrades Ranger class";case"vampire-ring":return"Upgrades Blood Mage class";case"gambling-kit":return"Upgrades Gambler class";case"patrons-wisdom":return"Upgrades Battle Mage class";case"liturgical-censer":return"Upgrades Paladin class";case"dont-get-hit":return"Double dodge, double accuracy";case"aqua-lungs":return"Allows water travel";case"trophy-hellhound":return"2x All Stats, +1 Weapon Tier";case"trophy-hiddenstump":return"2x All Stats, 2x Dodge";case"trophy-steamgear":return"2x All Stats, Improved auto-battler";case"trophy-drowning":return"2x All Stats, +1 Armor Tier";case"archers-impatience":return"50% Double Shot";case"archers-determination":return"Ranged -20% Armor, 50% Double Shot";case"archers-balance":return"+1 Ranged Weapon Tier, Ranged -20% Armor, 50% Double Shot";case"attackers-precision":return"+30% Dexterity";case"attackers-honor":return"Melee -20% Armor, +30% Dexterity";case"attackers-warbanner":return"+1 Melee Weapon Tier, Melee -20% Armor, +30% Dexterity";case"casters-book":return"+30% Wisdom";case"casters-wisdom":return"Caster -20% Armor, +30% Wisdom";case"casters-destiny":return"+1 Spell Focus Tier, Caster -20% Armor, +30% Wisdom";case"smiters-inspiration":return"+30% Willpower";case"smiters-calling":return"Smite -20% Armor, +30% Willpower";case"smiters-light":return"+1 Shield Tier, Smite -20% Armor, +30% Willpower";case"vampires-blood":return"+30% Constitution";case"vampires-gaze":return"-50% Enemy Enchantment Resist, +30% Constitution";case"vampires-darkness":return"-75% Enemy Enchantment Resist, +30% Constitution";case"naga-scale":return"Cancels out 1 enemy enchantment";case"unimaginable-gearbox":return"Improved auto-battler";case"totem-of-champion-rebirth":case"totem-of-hero-rebirth":case"totem-of-rebirth":return"Select to show rebirth menu";case"crafting-hammer":return"Select to show crafting menu";case D.kj.BonusStrength:return"+30% Strength";case D.kj.BonusDexterity:return"+30% Dexterity";case D.kj.BonusConstitution:return"+30% Constitution";case D.kj.BonusIntelligence:return"+30% Intelligence";case D.kj.BonusWisdom:return"+30% Wisdom";case D.kj.BonusWillpower:return"+30% Willpower";case D.kj.BonusLuck:return"+30% Luck";case D.kj.BonusPhysical:return"+20% Strength, Dexterity, Constitution";case D.kj.BonusMental:return"+20% Intelligence, Wisdom, Willpower";case D.kj.BonusAllStats:return"+20% All Stats";case D.kj.MinusEnemyArmor:return"-50% Enemy Armor";case D.kj.BonusArmor:return"+100% Armor";case D.kj.MinusEnemyStrength:return"-20% Enemy Strength";case D.kj.MinusEnemyDexterity:return"-20% Enemy Dexterity";case D.kj.MinusEnemyConstitution:return"-20% Enemy Constitution";case D.kj.MinusEnemyIntelligence:return"-20% Enemy Intelligence";case D.kj.MinusEnemyWisdom:return"-20% Enemy Wisdom";case D.kj.MinusEnemyWillpower:return"-20% Enemy Willpower";case D.kj.MinusEnemyPhysical:return"-10% Enemy Strength, Dexterity, Constitution";case D.kj.MinusEnemyMental:return"-10% Enemy Intelligence, Wisdom, Willpower";case D.kj.MinusEnemyAllStats:return"-10% All Enemy Stats";case D.kj.LifeHeal:return"Heal 10% Constitution";case D.kj.LifeDamage:return"Damage 10% Constitution";case D.kj.LifeSteal:return"Leech 10% Constitution";case D.kj.Vampirism:return"Leech 20% Constitution, Steal 30% Constitution";case D.kj.BigMelee:return"+100% Strength, Steal 40% Dexterity";case D.kj.BigCaster:return"+100% Intelligence, Steal 40% Wisdom";case D.kj.WisDexWill:return"+40% Wisdom, Dexterity, Willpower";case D.kj.StrengthSteal:return"Steal 30% Strength";case D.kj.DexteritySteal:return"Steal 30% Dexterity";case D.kj.ConstitutionSteal:return"Steal 30% Constitution";case D.kj.IntelligenceSteal:return"Steal 30% Intelligence";case D.kj.WisdomSteal:return"Steal 30% Wisdom";case D.kj.WillpowerSteal:return"Steal 30% Willpower";case D.kj.LuckSteal:return"Steal 30% Luck";case D.kj.AllStatsSteal:return"Steal 30% All Stats";case D.kj.CounterSpell:return"Cancels out 1 enemy enchantment";case D.kj.SuperDexterity:return"+200% Dexterity, +50% Willpower/Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperWillpower:return"+200% Willpower, +50% Dexterity/Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperWisdom:return"+200% Wisdom, +50% Willpower/Dexterity, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperMelee:return"+250% Strength, Steal 80% Dexterity, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperCaster:return"+250% Intelligence, Steal 80% Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperMeleeVamp:return"+200% Strength, Steal 50% Dexterity/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperSorcVamp:return"+200% Intelligence, Steal 50% Wisdom/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperVamp:return"Leech 50% Constitution, Steal 80% Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperVampMelee:return"+150% Strength, Steal 60% Dexterity/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperVampSorc:return"+150% Intelligence, Steal 60% Wisdom/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperBattleMage:return"+150% Strength/Intelligence, Steal 60% Dexterity/Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperAllStats:return"+100% All Stats, Leech 20% Constitution, CounterSpell, Minus Armor, Bonus Armor";default:return"???"}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return qt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(e){var t=e.event.message,n=Gt((0,D.PF)(),2),i=n[0],a=n[1].loading;return(0,r.jsx)(m.Z,{children:(0,r.jsxs)(l.Z,{sx:{bgcolor:"success.light",color:"success.contract",fontStyle:"italic",padding:2},children:[t&&t.map((function(e,t){return(0,r.jsx)(d.Z,{children:e},"".concat(t))})),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(w.Z,{variant:"contained",color:"error",onClick:function(){i()},disabled:a,children:"Continue"}),(0,r.jsx)("br",{})]})})}function Rt(e){var t,n,i,a,o,s=e.quest,c=(0,D.QT)({variables:(null===s||void 0===s||null===(t=s.lastEvent)||void 0===t?void 0:t.quest)?{quest:null===s||void 0===s||null===(n=s.lastEvent)||void 0===n?void 0:n.quest}:void 0,skip:!(null===s||void 0===s||null===(i=s.lastEvent)||void 0===i?void 0:i.quest)}),u=c.data,h=c.loading;if(!(null===s||void 0===s||null===(a=s.lastEvent)||void 0===a?void 0:a.quest)||h||!u)return(0,r.jsx)("div",{});var m=u.quest;return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h5",children:(0,$.qh)(m.id)}),(0,r.jsx)(d.Z,{children:m.description}),(null===(o=s.lastEvent)||void 0===o?void 0:o.message)&&(0,r.jsxs)(l.Z,{sx:{bgcolor:"warning.light",color:"warning.contrast",margin:2,padding:2},children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Last event:"}),s.lastEvent.message.map((function(e,t){return(0,r.jsx)(d.Z,{sx:{fontStyle:"italic"},children:e},"".concat(t))}))]})]})}function Ut(){var e=F();if(!e)return null;var t=e.questLog;e.currentQuest;return 2===Object.values(t).filter((function(e){return!!e})).length?(0,r.jsx)(l.Z,{children:"You have not yet started any quests. Explore the world and grow stronger."}):(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h4",children:"Quest Log"}),(0,r.jsx)("br",{}),Object.values(t).map((function(e){return e&&"string"!==typeof e?(0,r.jsx)(Rt,{quest:e}):null}))]})}function Nt(e,t){return"".concat((Math.round(e/t*1e3)/10).toLocaleString(),"%")}function Kt(e){var t=e.stats;return(0,r.jsx)(l.Z,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Strength"}),": ",t.stats.strength.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Dexterity"}),": ",t.stats.dexterity.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Constitution"}),": ",t.stats.constitution.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Intelligence"}),": ",t.stats.intelligence.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Wisdom"}),": ",t.stats.wisdom.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Willpower"}),": ",t.stats.willpower.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Luck"}),": ",t.stats.luck.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Armor"}),": ",Nt(t.damageReduction-1,1)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Damage"}),":"," ",Nt(t.damageAmplification-1,1)]}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.ZP,{})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Strength"}),":"," ",Nt(t.enemyStats.strength-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Dexterity"}),":"," ",Nt(t.enemyStats.dexterity-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Constitution"}),":"," ",Nt(t.enemyStats.constitution-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Intelligence"}),":"," ",Nt(t.enemyStats.intelligence-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Wisdom"}),":"," ",Nt(t.enemyStats.wisdom-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Willpower"}),":"," ",Nt(t.enemyStats.willpower-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Luck"}),":"," ",Nt(t.enemyStats.luck-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Armor Reduction"}),":"," ",Nt(t.armorReduction-1,1)]})]})})}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zt(e,t,n,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void n(c)}l.done?t(s):Promise.resolve(s).then(r,i)}function Yt(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){zt(a,r,i,o,l,"next",e)}function l(e){zt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Vt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e){var t,n=e.hero,a=e.stat,o=(0,i.useState)(null!==(t=n.settings.minimumStats[a])&&void 0!==t?t:10),l=o[0],s=o[1],c=Vt((0,D.Rw)(),1)[0];function u(){return(u=Yt(y().mark((function e(t){var n;return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Number(t),!isNaN(n)&&Number.isFinite(n)){e.next=3;break}return e.abrupt("return");case 3:n=Math.max(1,Math.min(2e9,n)),s(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=Yt(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{name:a,value:l}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(h.ZP,{item:!0,xs:2,children:["".concat(a.substr(0,1).toUpperCase()).concat(a.substr(1)),":"]}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(T.Z,{value:l,onChange:function(e){return function(e){return u.apply(this,arguments)}(e.target.value)}})}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(w.Z,{onClick:function(){return d.apply(this,arguments)},children:"Save"})})]})}function Xt(e){var t=e.hero,n=Vt((0,D.w3)(),1)[0],a=(0,i.useState)(t.settings.autoDust),o=a[0],l=a[1];function s(){return(s=Yt(y().mark((function e(){return y().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n({variables:{value:o}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,xs:2,children:"Auto dust equipment at or below this level:"}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(T.Z,{value:o,onChange:function(e){return function(e){var t=Math.round(Number(e));!isNaN(t)&&Number.isFinite(t)&&l(t)}(e.target.value)}})}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(w.Z,{onClick:function(){return s.apply(this,arguments)},children:"Save"})})]})}function en(){var e=F();return e?(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h2",children:"Settings"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:"Configure your mysterious automation"}),(0,r.jsx)(d.Z,{variant:"h5",children:"Minimum Stats"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:"Prevents transfering from lowering your stats below these values..."}),(0,r.jsxs)(h.ZP,{container:!0,columns:6,children:[(0,r.jsx)(_t,{hero:e,stat:"strength"}),(0,r.jsx)(_t,{hero:e,stat:"dexterity"}),(0,r.jsx)(_t,{hero:e,stat:"constitution"}),(0,r.jsx)(_t,{hero:e,stat:"intelligence"}),(0,r.jsx)(_t,{hero:e,stat:"wisdom"}),(0,r.jsx)(_t,{hero:e,stat:"willpower"}),(0,r.jsx)(_t,{hero:e,stat:"luck"})]}),(0,r.jsx)(Xt,{hero:e})]}):(0,r.jsx)("div",{})}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function nn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,l=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return tn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tn(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var rn=(0,o.default)((function(){return n.e(169).then(n.bind(n,1169))}),{loadableGenerated:{webpack:function(){return[1169]}}});function an(){var e,t,n,o,g,y,b=(0,a.useRouter)(),j=b.route.split("/").pop(),Z=nn((0,ye.d)(),2),S=Z[0],w=(Z[1],(0,D.UE)()),A=w.data,k=w.loading,C=w.error,P=(0,i.useState)(null!==j&&void 0!==j?j:"play"),I=P[0],E=P[1],M=(0,D.Wg)({pollInterval:3e4}).data,W=null!==(g=null===A||void 0===A||null===(e=A.me)||void 0===e||null===(t=e.account)||void 0===t?void 0:t.hero)&&void 0!==g?g:null,L=null!==(y=null===A||void 0===A||null===(n=A.me)||void 0===n||null===(o=n.account)||void 0===o?void 0:o.access)&&void 0!==y?y:null;if((0,i.useEffect)((function(){!C&&S||b.push("/?auth=".concat(b.asPath))}),[C,S]),C||!S)return(0,r.jsx)(p.A,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)("br",{}),"Redirecting..."]})});if(k)return(0,r.jsx)(p.A,{children:(0,r.jsx)(m.Z,{children:k&&(0,r.jsx)(c.Z,{})})});var F=!!(null===W||void 0===W?void 0:W.inventory.find((function(e){return(0,$.r_)(e.baseItem)})));return(0,r.jsx)(p.A,{showHero:!0,children:(0,r.jsxs)(m.Z,{children:[(0,r.jsxs)(i.Fragment,{children:[W&&W.attributePoints>0&&(0,r.jsx)(ze,{}),W&&W.currentQuest&&(0,r.jsx)(Ht,{event:W.currentQuest})]}),(0,r.jsxs)(l.Z,{sx:{width:"100%",typography:"body1"},children:[(0,r.jsxs)(f.ZP,{value:I,children:[(0,r.jsx)(l.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(v.Z,{onChange:function(e,t){"play"===t?b.push("/play","/play",{scroll:!1}):b.push("/play/".concat(t),"/play/".concat(t),{scroll:!1}),E(t)},"aria-label":"navigation tabs",variant:"scrollable",children:[(0,r.jsx)(u.Z,{label:"Welcome",value:"play"}),(0,r.jsx)(u.Z,{label:"Combat",value:"combat"}),(0,r.jsx)(u.Z,{label:"Shop",value:"shop"}),(0,r.jsx)(u.Z,{label:"Inventory",value:"inventory"}),(0,r.jsx)(u.Z,{label:"Map",value:"map"}),(0,r.jsx)(u.Z,{label:"Quests",value:"quests"}),F&&(0,r.jsx)(u.Z,{label:"Settings",value:"settings"}),L===D.Ks.Admin&&(0,r.jsx)(u.Z,{label:"Admin",value:"admin"})]})}),(0,r.jsx)(x.Z,{value:"play",children:(0,r.jsxs)(h.ZP,{container:!0,columns:12,spacing:4,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:12,sm:7,md:8,children:[(0,r.jsxs)(d.Z,{variant:"h5",sx:{mb:2},children:["Welcome to ",(0,r.jsx)("b",{children:"Proof of Combat"}),"!"]}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"This game is under very active development, so except things to change often and for new features and content to appear on a near daily basis."}),(0,r.jsxs)(d.Z,{sx:{mb:2},children:["If you'd like to discuss upcoming features, join the"," ",(0,r.jsx)("a",{href:"https://discord.gg/t7AZSxvfJG",target:"_blank",rel:"noreferrer",children:"discord"}),"!"]}),(0,r.jsx)(d.Z,{variant:"h5",sx:{mb:2},children:"Combat Stats"}),(null===W||void 0===W?void 0:W.combatStats)&&(0,r.jsx)(Kt,{stats:W.combatStats})]}),(null===M||void 0===M?void 0:M.leaderboard)&&(0,r.jsxs)(h.ZP,{item:!0,xs:12,sm:5,md:4,children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Top levels:"}),(0,r.jsx)("ul",{id:"leaderboard-list",children:M.leaderboard.slice(0,20).map((function(e,t){return(0,r.jsxs)("li",{id:"leaderboard-list-".concat(t),children:[(0,r.jsx)("b",{id:"leaderboard-list-".concat(t,"-name"),children:e.name})," ",e.level.toLocaleString()," (",(0,$.qh)(e.class),")"]},e.id)}))})]})]})}),(0,r.jsxs)(x.Z,{value:"combat",children:[(0,r.jsx)(d.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,r.jsx)("br",{}),(0,r.jsx)(ge,{})]}),(0,r.jsx)(x.Z,{value:"shop",children:(0,r.jsx)(ot,{})}),(0,r.jsx)(x.Z,{value:"inventory",children:(0,r.jsx)(Tt,{})}),(0,r.jsx)(x.Z,{value:"map",children:(0,r.jsx)(qe,{})}),(0,r.jsx)(x.Z,{value:"quests",children:(0,r.jsx)(Ut,{})}),(0,r.jsx)(x.Z,{value:"settings",children:(0,r.jsx)(en,{})}),(0,r.jsx)(x.Z,{value:"admin",children:(0,r.jsx)(rn,{})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(V,{})]})]})})}}}]);