"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{817:function(e,n,t){t.d(n,{Z:function(){return Zr}});var r=t(5893),i=t(7294),a=t(1163),o=t(5152),l=t(7357),s=t(7720),c=t(1458),u=t(44),d=t(5861),h=t(6886),m=t(9104),f=t(122),x=t(5670),p=t(7225),v=t(5050),y=t(7018),g=t(4051),b=t.n(g),j=t(1157),Z=t(8445),S=t(5739),w=t(9825),k=t(3321),A=t(7109),C=t(3946),P=t(4054),I=t(3841),E=t(7058),M=t(3984),W=t(6824),L=t(622),O=t(4510),D=t(9402);function B(){var e,n,t,r=(0,D.UE)().data;return null!==(t=null===r||void 0===r||null===(e=r.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:void 0}var F=t(874),T=t(5018),$=t(3599),q=t(1903);function Q(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function G(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function U(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){G(a,r,i,o,l,"next",e)}function l(e){G(a,r,i,o,l,"throw",e)}o(void 0)}))}}function R(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Q(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Q(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e){var n,t,a=e.hero,o=e.to,c=R((0,D.F2)(),2),u=c[0],m=c[1].loading,f=R((0,D.AF)(),2),x=f[0],p=(f[1].loading,(0,D._v)({pollInterval:5e3})),v=p.data,y=p.refetch,g=(0,i.useState)(0),j=g[0],Z=g[1],S=(0,i.useState)(""),w=S[0],A=S[1],C=R((0,D.Fw)(),2),E=C[0],M=C[1].loading||m;if(!(null===v||void 0===v||null===(n=v.me)||void 0===n||null===(t=n.account)||void 0===t?void 0:t.hero))return null;var W=v.me.account.hero,L=W.incomingTrades,O=W.outgoingTrades,B="Select an item to offer",Q=a.inventory.filter((function(e){return e.type!==D.$7.Quest})).sort(F.v4);function G(){return(G=U(b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=w,e.next=4,E({variables:{offer:{to:o,item:n,gold:j}}});case 4:e.sent,y(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function H(e){return N.apply(this,arguments)}function N(){return(N=U(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{offer:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function z(){return(z=U(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x({variables:{offer:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var Y=Q.find((function(e){return e.id===w}));return(0,r.jsxs)(l.Z,{sx:{p:2,m:1,bgcolor:"background.paper"},children:[(0,r.jsx)(d.Z,{color:"error",variant:"h4",children:"Offer trade"}),(0,r.jsx)(d.Z,{children:"You can offer one of your items for gold, and then the other player must accept."}),(0,r.jsxs)(h.ZP,{sx:{mt:1},container:!0,columns:6,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"trade-item-select-label",children:B}),(0,r.jsx)(T.Z,{id:"trade-item-select",labelId:"trade-item-select-label",label:B,value:w,onChange:function(e){return A(e.target.value)},children:Q.map((function(e){return(0,r.jsx)($.Z,{value:e.id,disabled:(0,F.mQ)(a,e),children:(0,F.GJ)(e)},e.id)}))})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(q.Z,{label:"Gold value",value:0===j?"":j,onChange:function(e){var n=Number(e.target.value);!isNaN(n)&&Number.isFinite(n)&&(n=Math.round(Math.max(0,Math.min(2e9,n))),console.log(n),Z(n))}})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsxs)(k.Z,{variant:"contained",fullWidth:!0,disabled:j<=0||!w.length||M,onClick:function(){return G.apply(this,arguments)},children:[Y&&"Offer ".concat((0,F.GJ)(Y)," for ").concat(j.toLocaleString()," gold"),!Y&&"Select an item to offer"]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(s.Z,{})}),L.length>0&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:["Received offers:",(0,r.jsx)(l.Z,{children:L.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(l.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["From: ",(0,r.jsx)("b",{children:e.fromName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,F.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)(k.Z,{sx:{m:1},variant:"contained",color:"success",disabled:M||e.gold>a.gold,onClick:function(){return function(e){return z.apply(this,arguments)}(e.id)},children:"Accept Trade"}),(0,r.jsx)(k.Z,{sx:{m:1},variant:"contained",color:"error",disabled:M,onClick:function(){return H(e.id)},children:"Reject Trade"})]})},e.id)}))})]}),O.length>0&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:["Sent offers:",(0,r.jsx)(l.Z,{children:O.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(l.Z,{sx:{mt:1,bgcolor:"info.main",p:2},children:["To: ",(0,r.jsx)("b",{children:e.toName}),(0,r.jsx)("br",{}),"Item: ",(0,r.jsx)("b",{children:(0,F.GJ)(e.item)}),(0,r.jsx)("br",{}),"Gold: ",(0,r.jsx)("b",{children:e.gold.toLocaleString()}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)(k.Z,{variant:"contained",color:"error",disabled:M,onClick:function(){return H(e.id)},children:"Cancel Trade"})]})},e.id)}))})]})]})]})}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function z(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Y(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){z(a,r,i,o,l,"next",e)}function l(e){z(a,r,i,o,l,"throw",e)}o(void 0)}))}}function K(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function J(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var V="https://chrisinajar.com:2096/";function _(){var e,n,t,a,o=function(e){return e.trim()},s=function(e,n){n!==(null===h||void 0===h?void 0:h.id)&&(console.log("Trying to whisper",e,n.substr(0,4)),te((function(t){return function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){K(e,n,t[n])}))}return e}({},t,K({},e,{type:"private",heroId:n}))})),X(e))},c=(0,w.Ds)().enqueueSnackbar,h=B(),m=(0,D.TX)().data,f=(0,i.useState)(!1),v=f[0],y=f[1],g=(0,i.useState)([]),T=g[0],$=g[1],q=(0,i.useState)(!1),Q=q[0],G=q[1],U=(0,i.useState)(""),R=U[0],N=U[1],z=(0,i.useState)("all"),_=z[0],X=z[1],ee=(0,i.useState)({all:{type:"built-in"},chat:{type:"built-in"},notifications:{type:"built-in"}}),ne=ee[0],te=ee[1],re=(0,i.useRef)();(0,i.useEffect)((function(){var e;if(!re.current&&(null===m||void 0===m||null===(e=m.chat)||void 0===e?void 0:e.token))return re.current=(0,j.io)(V,{withCredentials:!0,auth:{token:m.chat.token}}),re.current.on("hello",(function(e){$(e.chat)})),re.current.on("chat",(function(e){console.log("Got chat event!",e),$((function(n){return[e].concat(J(n))}))})),re.current.on("notification",(function(e){var n;e.item&&(e.message=e.message.replace("{{item}}",(0,F.GJ)(e.item))),"drop"===e.type?e.item?c("You found ".concat((0,F.GJ)(e.item)),{variant:"success"}):c(e.message,{variant:"success"}):c(e.message,{variant:"info"}),$((function(t){return[{type:null!==(n=e.type)&&void 0!==n?n:"notification",id:Math.random(),time:Date.now()/1e3,message:"",from:e.message,color:"drop"===e.type?"error":"secondary",variant:"body1"}].concat(J(t))}))})),re.current.on("system-message",(function(e){c(e.message,{variant:"warning"}),$((function(n){return[{type:"system",id:Math.random(),time:Date.now()/1e3,message:e.message,from:"",color:e.color,variant:"h6"}].concat(J(n))}))})),function(){re.current&&(re.current.disconnect(),re.current=void 0)}}),[null===m||void 0===m||null===(e=m.chat)||void 0===e?void 0:e.token]);var ie=o(R);function ae(){return oe.apply(this,arguments)}function oe(){return(oe=Y(b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(re.current){e.next=2;break}return e.abrupt("return");case 2:if("private"!==(n=ne[_]).type){e.next=7;break}return re.current.emit("private-chat",{to:n.heroId,message:R},(function(e){console.log("Got a confirmation!",e),$((function(n){return[e].concat(J(n))}))})),N(""),e.abrupt("return");case 7:re.current.emit("chat",{message:R},(function(e){console.log("Got a reply!",e),$((function(n){return[e].concat(J(n))}))})),N("");case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var le,se=T.filter((function(e){if("all"===_)return!0;if("chat"===_)return"chat"===e.type||"private"===e.type||"system"===e.type;if("notifications"===_)return"notification"===e.type||"drop"===e.type||"quest"===e.type||"system"===e.type;var n=ne[_];return!n||"private"===n.type&&("private"===e.type&&(e.heroId===n.heroId||e.to===n.heroId))})),ce=Q?"Max message: ".concat(140-ie.length,"/").concat(140):"Type here...";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(x.ZP,{value:_,children:(0,r.jsx)(p.Z,{onChange:function(e,n){v&&y(!1),X(n)},"aria-label":"navigation tabs",variant:"scrollable",children:Object.keys(ne).map((function(e){return(0,r.jsx)(u.Z,{label:e,value:e},e)}))})}),"notifications"!==_&&(0,r.jsxs)(P.Z,{sx:{marginTop:1},fullWidth:!0,variant:"outlined",children:[(0,r.jsx)(I.Z,{htmlFor:"chat-input",children:ce}),(0,r.jsx)(E.Z,{disabled:!(null===(n=re.current)||void 0===n?void 0:n.connected),value:R,id:"chat-input",name:"Chat input",label:ce,placeholder:"Type here...",onChange:function(e){var n=e.target.value;o(n).length<=140&&N(n)},onFocus:function(){return G(!0)},onBlur:function(){return G(!1)},autoComplete:"off",onKeyPress:function(e){"Enter"!==e.key||ae()},endAdornment:(0,r.jsxs)(A.Z,{position:"end",children:[(0,r.jsx)(M.Z,{title:"Send message",children:(0,r.jsx)(C.Z,{"aria-label":"send chat",onClick:ae,children:(0,r.jsx)(W.Z,{})})}),"private"===(null===(t=ne[_])||void 0===t?void 0:t.type)&&(0,r.jsx)(M.Z,{title:v?"Cancel trade":"Trade with player",children:(0,r.jsxs)(C.Z,{onClick:function(){return y(!v)},children:[v&&(0,r.jsx)(O.Z,{}),!v&&(0,r.jsx)(L.Z,{})]})})]})})]}),v&&h&&(null===(a=ne[_])||void 0===a?void 0:a.heroId)&&(0,r.jsx)(H,{hero:h,to:null!==(le=ne[_].heroId)&&void 0!==le?le:""}),(0,r.jsx)(l.Z,{sx:{padding:1,minHeight:"600px",bgcolor:"background.paper"},children:se.map((function(e){return(0,r.jsxs)(d.Z,{variant:e.variant||"body1",sx:{color:"".concat("private"===e.type?"secondary":e.color||"text",".main")},children:[e.time&&(0,r.jsxs)(d.Z,{variant:"caption",children:["(",(0,S.S)(new Date(1e3*e.time)),")\xa0"]}),e.heroId&&(0,r.jsx)(k.Z,{onClick:function(){e.heroId&&s(e.from,e.heroId)},sx:{color:"inherit",textTransform:"none",paddingTop:0,paddingBottom:0,paddingLeft:1,paddingRight:.5,margin:0},children:(0,r.jsxs)("b",{children:[e.from,":"]})}),!e.heroId&&(0,r.jsx)("b",{children:e.from})," ",(0,Z.emojify)(e.message)]},e.id)}))}),(0,r.jsx)("br",{})]})}var X=t(2471),ee=t(9835);function ne(){var e,n=B(),t=(0,D.W1)({fetchPolicy:"network-only",variables:(null===n||void 0===n?void 0:n.location)?{location:{x:n.location.x,y:n.location.y,map:n.location.map}}:void 0,skip:!(null===n||void 0===n?void 0:n.location)}).data;return null!==(e=null===t||void 0===t?void 0:t.locationDetails)&&void 0!==e?e:null}function te(){var e=ne(),n=(null===e||void 0===e?void 0:e.specialLocations)||[];return n.length?n[0]:null}var re=t(1292),ie=t(5499),ae=t(8698),oe=t(7600),le=t(5826);function se(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ce(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ue(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ce(a,r,i,o,l,"next",e)}function l(e){ce(a,r,i,o,l,"throw",e)}o(void 0)}))}}function de(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return se(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return se(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function he(e){var n,t,a,o=e.autoBattle,l=e.canAutoBattle,s=e.fight,u=s.id,m=s.monster,f=e.onVictory,x=e.onError,p=e.onAutoBattle,v=e.fightMutationRef,y=e.duel,g=(0,i.useState)(!1),j=g[0],Z=g[1],S=de((0,D.zC)(),2),w=S[0],A=S[1],C=A.data,P=A.loading,I=de((0,D.E0)(),2),E=I[0],W=I[1],L=W.data,O=W.loading,B=(0,i.useState)(100),T=B[0],$=B[1],q=(0,i.useState)(D.hK.Melee),Q=q[0],G=q[1],U=(null===C||void 0===C?void 0:C.fight)||(null===L||void 0===L?void 0:L.attackHero)||null,R=(null===C||void 0===C||null===(n=C.fight)||void 0===n||null===(t=n.monster)||void 0===t?void 0:t.monster)||(null===L||void 0===L||null===(a=L.attackHero)||void 0===a?void 0:a.otherHero)||null,H=!o&&l;function N(e){return z.apply(this,arguments)}function z(){return(z=ue(b().mark((function e(n){var t,r,i,a,o,l,s;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(n),e.prev=1,!y){e.next=10;break}return e.next=6,E({variables:{id:u,attackType:n}});case 6:r=e.sent,(null===(t=r.data)||void 0===t?void 0:t.attackHero.victory)&&f&&f(),e.next=15;break;case 10:return e.next=13,w({variables:{monster:u,attackType:n}});case 13:a=e.sent,(null===(i=a.data)||void 0===i?void 0:i.fight.victory)&&f&&f();case 15:e.next=29;break;case 17:if(e.prev=17,e.t0=e.catch(1),!e.t0.graphQLErrors||!e.t0.graphQLErrors[0]){e.next=28;break}if(l=de(e.t0.graphQLErrors,1),s=l[0],!(null===(o=s.extensions)||void 0===o?void 0:o.delay)){e.next=24;break}return e.abrupt("return");case 24:if(!s.message.startsWith("Key not found in database")){e.next=28;break}return Z(!0),$(0),e.abrupt("return");case 28:x&&x(e.t0);case 29:case"end":return e.stop()}}),e,null,[[1,17]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){j&&Z(!1),P||O||$(100*(R?R.combat.health:m.combat.health)/m.combat.maxHealth)}),[null===R||void 0===R?void 0:R.combat.health,null===R||void 0===R?void 0:R.combat.maxHealth,m.combat.maxHealth]),v&&(v.current=N),(0,i.useEffect)((function(){return function(){v&&(v.current=function(){})}}),[]),(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{id:"combat-display",style:{minHeight:"110px"},item:!0,xs:6,children:[(0,r.jsxs)(h.ZP,{container:!0,sx:{textAlign:"center"},columns:6,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:[(0,r.jsxs)(d.Z,{variant:"h4",children:[T>0&&(o?"Auto-Battling":"Battling"),T<=0&&"Dead"," ",m.name]}),(0,r.jsx)(c.Z,{variant:"determinate",value:T,color:"error"})]}),T>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(M.Z,{title:"Attack using your melee weapons, uses strength and dexterity",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-melee",onClick:function(){return N(D.hK.Melee)},"aria-label":"melee attack",startIcon:(0,r.jsx)(re.Z,{}),children:"Melee attack"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(M.Z,{title:"Attack using your ranged weapons, uses dexterity",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-ranged",onClick:function(){return N(D.hK.Ranged)},"aria-label":"ranged attack",startIcon:(0,r.jsx)(ie.Z,{}),children:"Ranged attack"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,xl:2,children:(0,r.jsx)(M.Z,{title:"Cast spells using your wisdom and intelligence",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-cast",onClick:function(){return N(D.hK.Cast)},"aria-label":"cast spell",startIcon:(0,r.jsx)(ae.Z,{}),children:"Cast Spell"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:3,xl:3,children:(0,r.jsx)(M.Z,{title:"Smite your foe using wisdom and willpower",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-holy",onClick:function(){return N(D.hK.Smite)},"aria-label":"holy attack",startIcon:(0,r.jsx)(oe.Z,{}),children:"Smite"})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:6,md:3,xl:3,children:(0,r.jsx)(M.Z,{title:"Damage yourself to damage the enemy, uses constitution",children:(0,r.jsx)(k.Z,{sx:{fontSize:"1rem",padding:2},size:"large",id:"attack-with-blood",onClick:function(){return N(D.hK.Blood)},"aria-label":"blood magic",startIcon:(0,r.jsx)(le.Z,{}),children:"Blood magic"})})})]})]}),j&&"This enemy was killed by another player",U&&U.log.map((function(e,n){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.Z,{children:[e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[e.damage<0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," heals"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-heal"),children:(0-e.damage).toLocaleString()})," ","health from their enchantments"]}),e.damage>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," dealt"," ",(0,r.jsx)("span",{id:"fight-".concat(e.from,"-enchantment-damage"),children:e.damage.toLocaleString()})," ","enchantment damage to ",(0,r.jsx)("b",{children:e.to})]})]}),!e.isEnchantment&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("b",{children:e.from})," ".concat(me(e.attackType,e.success,e.critical)," "),(0,r.jsx)("b",{children:e.to}),e.success?" for ".concat(e.damage.toLocaleString()," damage!"):"."]})]})},"".concat(e.from,"-").concat(n))})),U&&U.victory&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{id:"fight-did-win",children:[m.name," has been killed!",(U.experience||U.gold)&&" You gain ",U.gold&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-gold",children:U.gold.toLocaleString()})," ","gold"]}),U.gold&&U.experience&&" and",U.experience&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-experience",children:U.experience.toLocaleString()})," ","experience"]}),(U.experience||U.gold)&&"!! ",U.didLevel&&(0,r.jsx)("b",{id:"fight-level-up",children:"You leveled up!!"})]}),U.drop&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsxs)(d.Z,{id:"fight-got-drop",variant:"h5",children:["You find an enchanted item on the monster's corpse!",(0,r.jsx)("br",{}),(0,F.GJ)(U.drop)]})]}),(0,r.jsx)("br",{}),H&&(0,r.jsx)(k.Z,{fullWidth:!0,color:"secondary",variant:"contained",onClick:function(){p&&p(m.id,Q)},children:"Auto-Battle this enemy"})]})]})})}function me(e,n,t){switch(e){case D.hK.Blood:return n?t?"surges with blood magic against":"lets blood and casts forth towards":"attempts to cast a spell against";case D.hK.Smite:return n?t?"summons powers beyond this world against":"smites":"attempts to smite";case D.hK.Cast:return n?t?"carefully casts a spell at":"blasts a beam of necrotic energy into":"attempts to cast a spell against";case D.hK.Ranged:return n?t?"lands a sneak attack from the shadows, critically damaging":"fires an arrow at":"shoots an arrow but it misses";case D.hK.Melee:default:return n?t?"lands a crippling blow against":"struck":"missed"}}function fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function xe(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function pe(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){xe(a,r,i,o,l,"next",e)}function l(e){xe(a,r,i,o,l,"throw",e)}o(void 0)}))}}function ve(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||ge(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,n){if(e){if("string"===typeof e)return fe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?fe(e,n):void 0}}function be(){var e,n,t,a,o=(0,i.useState)(D.hK.Melee),l=o[0],s=o[1],u=(0,i.useState)(0),m=u[0],f=u[1],x=(0,i.useState)(0),p=x[0],v=x[1],y=(0,i.useState)([0,50,100]),g=y[0],j=y[1],Z=(0,i.useRef)((function(){})),S=(0,i.useState)(!1),w=S[0],A=S[1],C=(0,i.useState)(""),E=C[0],M=C[1],W=(0,i.useState)(0),L=W[0],O=W[1],q=(0,i.useState)(null),Q=q[0],G=q[1],U=ve((0,ee.g)(),2),R=U[0],H=U[1],N=(0,i.useState)(""),z=N[0],Y=N[1],K=(0,i.useState)(""),J=K[0],V=K[1],_=(0,i.useState)(""),te=_[0],re=_[1],ie=(0,i.useState)(""),ae=ie[0],oe=ie[1],le=(0,D.Of)(),se=le.data,ce=le.loading,ue=(le.error,le.refetch),de=ve((0,D.Ht)(),1)[0],me=ve((0,D.hL)(),2),fe=me[0],xe=me[1].loading,ge=(0,D.pL)(),be=ge.data,je=ge.refetch,Ze=(null===be||void 0===be?void 0:be.challenges)||[],Se=B(),we=ve((0,D.zC)(),2),ke=(we[0],we[1]),Ae=(ke.data,ke.loading),Ce=(0,i.useRef)((function(e){})),Pe=ne(),Ie=null!==(a=null===Pe||void 0===Pe?void 0:Pe.players)&&void 0!==a?a:[],Ee=null===se||void 0===se||null===(e=se.monsters)||void 0===e?void 0:e.find((function(e){return e.id===Q})),Me=!1,We=0;Se&&(Me=!!Se.inventory.find((function(e){return(0,F.h8)(e.baseItem)})),We=Se.inventory.filter((function(e){return(0,F.Ke)(e.baseItem)})).length);var Le=xe||ce||Ae;function Oe(){return De.apply(this,arguments)}function De(){return(De=pe(b().mark((function e(){var n,t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fe();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&H(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function Be(){return(Be=pe(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===se||void 0===se?void 0:se.monsters.find((function(e){return e.id===J})),G(J),oe("");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return(Fe=pe(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Te(z));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e){return $e.apply(this,arguments)}function $e(){return($e=pe(b().mark((function e(n){var t,r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,de({variables:{monster:n}});case 4:return r=e.sent.data,e.next=7,ue();case 7:(null===r||void 0===r?void 0:r.challenge)&&G(r.challenge.id),(null===r||void 0===r||null===(t=r.challenge)||void 0===t?void 0:t.id)&&V(null===r||void 0===r||null===(i=r.challenge)||void 0===i?void 0:i.id),O(L+1),oe(""),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),ue();case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}function qe(){return(qe=pe(b().mark((function e(n,t){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Enabling auto battler! weee!"),A(!0),s(t),f(0),M(n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=pe(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:oe(te),G("");case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(0,i.useEffect)((function(){return window.setChallengeMonster=Y,function(){delete window.setChallengeMonster}}),[Y]),(0,i.useEffect)((function(){je(),ue()}),[null===Se||void 0===Se?void 0:Se.location.x,null===Se||void 0===Se?void 0:Se.location.y,null===Se||void 0===Se?void 0:Se.location.map]),Z.current=pe(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v((p+1)%(4/Math.pow(2,We))),j([Math.random()>.5?100*Math.random():g[0],Math.random()>.5?100*Math.random():g[1],Math.random()>.5?100*Math.random():g[2]]),0===p){e.next=4;break}return e.abrupt("return");case 4:if(!(Le||R>0)){e.next=6;break}return e.abrupt("return");case 6:if(0!==(null===Se||void 0===Se?void 0:Se.combat.health)){e.next=9;break}return console.log("[AutoBattler] Healing!"),e.abrupt("return",Oe());case 9:if(Ee&&0!==Ee.monster.combat.health&&Ee.monster.id===E){e.next=13;break}return console.log("[AutoBattler] Challenging new mob!"),Te(E),e.abrupt("return");case 13:if(!Ee||!Ce.current){e.next=17;break}return console.log("[AutoBattler] Fighting ".concat(l,"!")),Ce.current(l),e.abrupt("return");case 17:console.log("[AutoBattler] Doing nothing...");case 18:case"end":return e.stop()}}),e)}))),(0,i.useEffect)((function(){if(w&&E.length){var e=(0,X.Zi)((function(){Z.current()}),500);return function(){(0,X.cv)(e)}}}),[w,We]),(0,i.useEffect)((function(){var e;if(null===se||void 0===se||null===(e=se.monsters)||void 0===e?void 0:e.length){var n=se.monsters.concat().sort((function(e,n){return e.monster.level-n.monster.level}));if(""===J)V(n[0].id);else se.monsters.find((function(e){return e.id===J}))||V(n[0].id)}}),[J,null===se||void 0===se||null===(n=se.monsters)||void 0===n?void 0:n.length]);var Ge=null===se||void 0===se||null===(t=se.monsters)||void 0===t?void 0:t.find((function(e){return e.id===J}));Ge||(J="");var Ue=Ie.find((function(e){return e.id===ae}));(Ie.find((function(e){return e.id===te}))||(te=""),Se)&&(Se.levelCap>100||(Ze=Ze.slice(0,Se.level)));Ie=Ie.filter((function(e){return e.combat.health>0}));var Re="Select a new monster to challenge",He="Fight an existing monster!",Ne="Duel with a nearby player!";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:4,children:[!w&&Se&&Se.combat.health>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"challenge-monster-select-label",children:Re}),(0,r.jsx)(T.Z,{id:"challenge-select",labelId:"challenge-monster-select-label",value:z,label:Re,disabled:w,onChange:function(e){return Y(e.target.value)},children:Ze.map((function(e){return(0,r.jsx)($.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(k.Z,{id:"challenge-button",disabled:!z||R>0||xe||w,onClick:function(){return Fe.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"fight-monster-select-label",children:He}),(0,r.jsx)(T.Z,{id:"fight-select",labelId:"fight-monster-select-label",value:J,label:He,disabled:w,onChange:function(e){return V(e.target.value)},children:(null===se||void 0===se?void 0:se.monsters)&&ye(null===se||void 0===se?void 0:se.monsters).sort((function(e,n){return e.monster.level-n.monster.level})).map((function(e){return(0,r.jsxs)($.Z,{value:e.id,disabled:0===e.monster.combat.health,children:[0===e.monster.combat.health&&"Dead ",e.monster.name]},e.id)}))}),(0,r.jsx)(k.Z,{id:"fight-button",disabled:!J||R>0||xe||Ge&&0===Ge.monster.combat.health||w,onClick:function(){return Be.apply(this,arguments)},variant:"contained",children:"Fight!"})]})}),Ie.length>1&&(0,r.jsx)(h.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"duel-select-label",children:Ne}),(0,r.jsx)(T.Z,{id:"duel-select",labelId:"duel-select-label",value:te,label:Ne,disabled:w,onChange:function(e){return re(e.target.value)},children:Ie.filter((function(e){return e.id!==Se.id})).sort((function(e,n){return e.level-n.level})).map((function(e){return(0,r.jsx)($.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(k.Z,{id:"duel-button",disabled:!te.length||R>0||xe||w,onClick:function(){return Qe.apply(this,arguments)},variant:"contained",children:"Duel Player!"})]})})]}),w&&(0,r.jsxs)(h.ZP,{item:!0,xs:6,children:[(0,r.jsx)(c.Z,{sx:{margin:1,color:"#f00"},variant:"determinate",value:g[0],color:"inherit"}),(0,r.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#0f0"},variant:"determinate",value:g[1]}),(0,r.jsx)(c.Z,{color:"inherit",sx:{margin:1,color:"#00f"},variant:"determinate",value:g[2]}),(0,r.jsx)(k.Z,{fullWidth:!0,variant:"contained",color:"error",size:"large",onClick:function(){return A(!1)},children:"Disable Auto-Battle"})]}),Se&&Se.combat.health<=0&&(0,r.jsx)(h.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(d.Z,{id:"you-are-dead",children:"You are dead."})}),Ee&&(0,r.jsx)(he,{fight:Ee,onError:function(){ue(),G(null)},autoBattle:w,canAutoBattle:Me,onAutoBattle:function(e,n){return qe.apply(this,arguments)},fightMutationRef:Ce,onVictory:function(){return f(m+1)}},"".concat(Ee.id,"-").concat(L)),Ue&&(0,r.jsx)(he,{fight:{id:Ue.id,monster:Ue},onError:function(){ue(),G(null)},duel:!0,autoBattle:!1,canAutoBattle:!1},"".concat(Ue.id,"-").concat(L)),(0,r.jsx)(h.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(k.Z,{id:"heal-button",fullWidth:!0,onClick:Oe,variant:"contained",disabled:R>0||xe||Se&&Se.combat.health===Se.combat.maxHealth,children:"Heal"})})]})})}var je=t(9692);function Ze(e){var n=e.location,t=e.minimapSize,i=void 0===t?[24,24]:t,a=e.gridSize,o=void 0===a?[128,96]:a,l=e.cellSize,s=void 0===l?16:l,c=e.indicatorSize,u=void 0===c?8:c,d=[Math.round(Math.min(o[0]-i[0],Math.max(0,n.x-i[0]/2))),Math.round(Math.min(o[1]-i[1],Math.max(0,n.y-i[1]/2)))];return(0,r.jsx)("div",{style:{position:"relative",display:"inline-block",backgroundImage:"url(/maps/default.jpg)",backgroundPosition:"-".concat(d[0]*s,"px -").concat(d[1]*s,"px"),backgroundSize:"".concat(128*s,"px ").concat(96*s,"px "),width:"".concat(i[0]*s,"px"),height:"".concat(i[1]*s,"px")},children:(0,r.jsx)("div",{style:{position:"absolute",borderRadius:"".concat(u/2,"px"),backgroundColor:"red",border:"2px solid rgba(255,255,255,0.3)",left:"".concat((n.x-d[0])*s+(s-u)/2,"px"),top:"".concat((n.y-d[1])*s+(s-u)/2,"px"),width:"".concat(u,"px"),height:"".concat(u,"px")}})})}function Se(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function we(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||Ae(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e){return function(e){if(Array.isArray(e))return Se(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,n){if(e){if("string"===typeof e)return Se(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Se(e,n):void 0}}function Ce(e){var n=e.location,t=function(e){return(0,F.LW)(e.location,n.location)},a=we((0,D.L7)(),2),o=a[0],s=a[1].loading,c=(0,D.dE)().data,u=(0,i.useState)(""),h=u[0],m=u[1],f="Choose a port to sail to";return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h5",children:n.name}),(0,r.jsx)(d.Z,{children:"The wooden docks creak and sway with the water below."}),(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"sail-dock-select-label",children:f}),(0,r.jsx)(T.Z,{id:"sail-select",labelId:"sail-dock-select-label",value:h,label:f,onChange:function(e){return m(e.target.value)},children:(null===c||void 0===c?void 0:c.docks)&&ke(null===c||void 0===c?void 0:c.docks).sort((function(e,n){return t(e)-t(n)})).map((function(e){return(0,r.jsxs)($.Z,{value:e.name,disabled:e.name===n.name,children:[e.name,":"," ",e.name!==n.name&&(0,r.jsxs)(i.Fragment,{children:[(t=e,Math.round(12*(0,F.LW)(t.location,n.location))).toLocaleString()," Gold"]}),e.name===n.name&&"Current location"]},e.name);var t}))}),(0,r.jsx)(k.Z,{onClick:function(){if(c){var e=c.docks.find((function(e){return e.name===h}));e&&o({variables:{x:e.location.x,y:e.location.y}})}},variant:"outlined",color:"success",disabled:!h.length||s,children:"Sail!"})]})]})}function Pe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ie(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Ee(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Ie(a,r,i,o,l,"next",e)}function l(e){Ie(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Me(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Pe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e){var n=e.shop,t=(0,i.useState)(!1),a=t[0],o=t[1],l=(0,i.useState)(""),c=l[0],u=l[1],h=Me((0,D.NA)(),2),m=h[0],f=h[1].loading;function x(){return(x=Ee(b().mark((function e(n){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("attemptiong trade",n),u(""),e.prev=2,e.next=6,m({variables:{trade:n}});case 6:(null===(r=e.sent)||void 0===r||null===(t=r.data)||void 0===t?void 0:t.npcTrade)&&(u(r.data.npcTrade.message),o(r.data.npcTrade.success)),e.next=12;break;case 10:e.prev=10,e.t0=e.catch(2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{mt:1,mb:1}}),(0,r.jsx)(d.Z,{variant:"h4",color:"info.main",children:n.name}),(0,r.jsx)(d.Z,{sx:{mb:2},variant:"subtitle2",color:"info.main",children:"Hermit shop"}),c.length>0&&(0,r.jsx)(d.Z,{sx:{mb:2},variant:"body1",color:a?"success.main":"error.main",children:c}),n.trades.map((function(e,n){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(Le,{trade:e}),(0,r.jsx)(k.Z,{disabled:f,onClick:function(){return function(e){return x.apply(this,arguments)}(e.id)},sx:{ml:1},children:"Trade"})]})},"npc shop items ".concat(n))}))]})}function Le(e){var n=e.trade;return(0,r.jsxs)(i.Fragment,{children:["For the price of ",(0,r.jsx)(Oe,{price:n.price}),", I'll give you"," ",(0,r.jsx)(Oe,{price:n.offer})]})}function Oe(e){var n=e.price;return(0,r.jsx)(M.Z,{title:De(n),children:(0,r.jsx)("b",{children:n.description})})}function De(e){var n,t,r,i=[];return e.gold&&i.push("".concat(e.gold.toLocaleString()," gold")),e.dust&&i.push("".concat(e.dust.toLocaleString()," dust")),(null===(n=e.baseItems)||void 0===n?void 0:n.length)&&e.baseItems.forEach((function(e){i.push("".concat(e))})),(null===(t=e.enchantments)||void 0===t?void 0:t.length)&&e.enchantments.forEach((function(e){i.push("".concat((0,F.uD)(e)))})),(null===(r=e.questItems)||void 0===r?void 0:r.length)&&e.questItems.forEach((function(e){i.push("".concat(e))})),i.length?i.join(", "):"???"}var Be=t(3020),Fe=t(2748),Te=t(1425),$e=t(6580),qe=t(8951),Qe=t(7645),Ge=t(8987),Ue=t(7855),Re=t(3707),He=t(9653),Ne=t(6447);function ze(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ye(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Ke(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Ye(a,r,i,o,l,"next",e)}function l(e){Ye(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Je(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ze(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ze(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e){e.hero;var n=e.camp,t=e.onBuyResource,a=(0,i.useState)(!1),o=a[0],s=a[1],c=Je((0,D.G_)(),2),u=c[0],m=c[1].loading,f=Je((0,D.jE)(),2),x=f[0],p=f[1].loading;D.G_;var v=(0,i.useState)(""),y=v[0],g=v[1],j=(0,i.useState)(""),Z=j[0],S=j[1],w=p||m;function k(){return(k=Ke(b().mark((function e(){var n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=o?u:x,e.next=4,n({variables:{amount:Number(Z),resource:y}});case 4:S(""),g(""),t&&t(),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}var A=!!n.upgrades.find((function(e){return e===D.gT.TradingPost})),C=!y.length||!Z.length||Number(Z)<1||isNaN(Number(Z))||!Number.isFinite(Number(Z));return(0,r.jsx)(l.Z,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:1,children:[A&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsxs)(Ne.Z,{direction:"row",spacing:1,alignItems:"center",children:[(0,r.jsx)(d.Z,{children:"Buy"}),(0,r.jsx)(He.Z,{color:"success",checked:o,onChange:function(e){return s(e.target.checked)}}),(0,r.jsx)(d.Z,{children:"Sell"})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(P.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:[(0,r.jsxs)(I.Z,{children:["Select resource to ",o?"sell":"buy"]}),(0,r.jsxs)(T.Z,{label:"Select resource to ".concat(o?"sell":"buy"),value:y,onChange:function(e){return g(e.target.value)},children:[(0,r.jsx)($.Z,{value:"wood",children:"Wood"}),(0,r.jsx)($.Z,{value:"food",children:"Food"}),(0,r.jsx)($.Z,{value:"water",children:"Water"}),(0,r.jsx)($.Z,{value:"stone",children:"Stone"})]})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(P.Z,{fullWidth:!0,sx:{mt:1,minWidth:200},children:(0,r.jsx)(q.Z,{label:"Amount to ".concat(o?"sell":"buy"),value:Z,onChange:function(e){return S(e.target.value)}})})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(P.Z,{fullWidth:!0,children:(0,r.jsxs)(Ge.Z,{color:o?"success":"error",loading:w,variant:"contained",disabled:C,onClick:function(){return k.apply(this,arguments)},children:[o&&"Sell ",!o&&"Buy ",C&&"Resources",!C&&"".concat(y," for ").concat((1e4*Number(Z)).toLocaleString()," Gold")]})})})]})})}function _e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Xe(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function en(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Xe(a,r,i,o,l,"next",e)}function l(e){Xe(a,r,i,o,l,"throw",e)}o(void 0)}))}}function nn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return _e(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _e(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e){var n=e.hero,t=e.onShowSettlement,i=te(),a=!1;return n.home&&n.home.location.x===n.location.x&&n.home.location.y===n.location.y&&n.home.location.map===n.location.map&&(a=!0),i||!n.home&&n.gold<1e5?null:(0,r.jsxs)(l.Z,{children:[!n.home&&(0,r.jsx)(rn,{hero:n}),n.home&&(0,r.jsx)(an,{isLocal:a,hero:n,onShowSettlement:t}),(0,r.jsx)(s.Z,{sx:{mt:2,mb:2}})]})}function rn(e){e.hero;var n=nn((0,D.kO)(),2),t=n[0],i=n[1].loading;function a(){return(a=en(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t();case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h5",sx:{mb:2},children:"Settle Camp"}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"Settling a camp site allows you to heal faster while standing on that square. Additionally, you'll be able to upgrade the camp site to gain additional features and upgrades."}),(0,r.jsxs)(Ge.Z,{loading:i,color:"success",onClick:function(){return a.apply(this,arguments)},sx:{p:2},startIcon:(0,r.jsx)(Ue.Z,{}),children:["Settle Camp for ",1e5.toLocaleString()," Gold"]})]})}function an(e){var n=e.hero,t=e.isLocal,a=e.onShowSettlement,o=(0,i.useState)(!1),s=o[0],c=o[1],u=(0,i.useState)(!1),h=u[0],m=u[1],f=nn((0,D.kO)(),2),x=f[0],p=f[1].loading;function v(){return(v=en(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!1),e.prev=1,e.next=4,x();case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}if(!n.home)return null;if(!t)return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(Fe.Z,{open:s,onClose:function(){return c(!1)},"aria-labelledby":"confirmation-title","aria-describedby":"confirmation-description",children:[(0,r.jsx)(Qe.Z,{id:"confirmation-title",children:"Destroy existing campsite?"}),(0,r.jsx)($e.Z,{children:(0,r.jsx)(qe.Z,{id:"confirmation-description",children:"Settling a new camp here will leave your old camp abandoned. You will lose any upgrades to the camp or anything stored there."})}),(0,r.jsxs)(Te.Z,{children:[(0,r.jsx)(Ge.Z,{color:"error",loading:p,onClick:function(){return c(!1)},children:"Nevermind"}),(0,r.jsx)(Ge.Z,{color:"success",loading:p,onClick:function(){return v.apply(this,arguments)},autoFocus:!0,children:"Re-Settle Camp"})]})]}),(0,r.jsxs)(d.Z,{sx:{mb:2},children:["You must be at your campsite to interract with it. Your campsite is at"," ",(0,r.jsxs)("b",{children:[n.home.location.x,", ",n.home.location.y]})]}),(0,r.jsxs)(Ge.Z,{loading:p,color:"error",onClick:function(){return c(!0)},sx:{p:2},startIcon:(0,r.jsx)(Re.Z,{}),children:["Rebuild Camp HERE for ",1e5.toLocaleString()," Gold"]})]});var y=!!n.home.upgrades.find((function(e){return e===D.gT.TradingPost})),g=!!n.home.upgrades.find((function(e){return e===D.gT.Settlement})),j=g?"Manage Settlement":"Manage Campsite";return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(Fe.Z,{open:h,onClose:function(){return m(!1)},"aria-labelledby":"manage-camp-title","aria-describedby":"manage-camp-description",children:[(0,r.jsx)(Qe.Z,{id:"manage-camp-title",children:j}),(0,r.jsxs)($e.Z,{children:[(0,r.jsx)(on,{camp:n.home}),(0,r.jsxs)(qe.Z,{id:"manage-camp-description",children:["The fire crackles and pops as you work.",!g&&" Your tools and supplies lie staggered across the campsite.",g&&" Your tools sit organized in the shed, spare the ones in use"]}),(0,r.jsx)(Ve,{hero:n,camp:n.home}),y&&(0,r.jsx)(sn,{hero:n,camp:n.home}),(0,r.jsx)(ln,{hero:n,camp:n.home})]}),(0,r.jsx)(Te.Z,{children:(0,r.jsx)(Ge.Z,{color:"success",loading:p,onClick:function(){return m(!1)},children:"Done"})})]}),(0,r.jsxs)(d.Z,{variant:"h5",sx:{mb:2},children:["Your ",g?"Settlement":"Campsite"]}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"The fire crackles and pops as it burns through the night."}),(0,r.jsxs)(Ge.Z,{color:"warning",variant:"contained",loading:p,onClick:function(){return g&&a?a():m(!0)},startIcon:(0,r.jsx)(Ue.Z,{}),children:["Open ",g?"Settlement":"Camps"," Management"]})]})}function on(e){var n=e.camp;return console.log(n.resources),(0,r.jsx)(h.ZP,{container:!0,columns:8,children:n.resources.map((function(e){return(0,r.jsxs)(h.ZP,{item:!0,xs:8,sm:4,md:2,children:[(0,r.jsx)("b",{children:(0,Be.words)(e.name)}),":"," ",0===e.value?(0,r.jsx)(d.Z,{sx:{display:"inline-block"},color:"error",children:e.value.toLocaleString()}):e.value.toLocaleString()," ","/ ",e.maximum&&e.maximum.toLocaleString()]},e.name)}))})}function ln(e){var n,t=e.hero,i=e.camp,a=function(e){var n,t;return null!==(t=null===(n=e.find((function(e){return"gold"===e.name})))||void 0===n?void 0:n.value)&&void 0!==t?t:0},o=nn((0,D.Th)(),2),s=o[0],c=o[1].loading,u=(0,D.Hk)(),h=u.data,m=u.refetch,f=null!==(n=null===h||void 0===h?void 0:h.availableUpgrades)&&void 0!==n?n:[];if(console.log(f),!f.length)return null;function x(){return(x=en(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({variables:{upgrade:n}});case 3:return e.next=5,m();case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}var p=!!i.upgrades.find((function(e){return e===D.gT.Settlement}));return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{variant:"h6",children:[p?"Settlement":"Camp"," Upgrades"]}),f.map((function(e){return(0,r.jsx)(M.Z,{title:e.cost.map((function(e){return"".concat(e.value.toLocaleString()," ").concat((0,Be.words)(e.name))})).join("\n"),children:(0,r.jsxs)(l.Z,{sx:{m:1},children:[(0,r.jsx)(Ge.Z,{loading:c,sx:{m:1},variant:"outlined",color:a(e.cost)>t.gold?"error":"success",onClick:function(){return function(e){return x.apply(this,arguments)}(e.type)},children:"Upgrade"}),e.name]})},e.type)}))]})}function sn(e){e.hero,e.camp;return null}var cn=t(8396),un=t(2734),dn=t(2613),hn=t(3054),mn=t(7563),fn=t(6398),xn=t(6667),pn=t(3898),vn=t(1733),yn=t(1671);function gn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){gn(e,n,t[n])}))}return e}function jn(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.reduce((function(e,n){return n.forEach((function(n){var t,r,i=e.find((function(e){return e.name===n.name}));i?(i.value=i.value+n.value,(i.maximum||n.maximum)&&(i.maximum=(null!==(t=i.maximum)&&void 0!==t?t:0)+(null!==(r=n.maximum)&&void 0!==r?r:0))):e.push(bn({},n))})),e}),[])}var Zn,Sn=t(7621),wn=t.n(Sn);function kn(e){var n=e.location,t=e.icon,a=e.cellSize,o=e.boundingBox,s=e.tooltip,c=e.hover,u=void 0!==c&&c,d=e.onClick,h=e.color,m=void 0===h?"rgb(33, 5, 33)":h,f=[n.x-o.min.x,n.y-o.min.y],x=f[0]+2,p=f[1]+2;return(0,r.jsx)(M.Z,{title:(0,r.jsxs)(i.Fragment,{children:[n.x,", ",n.y,(0,r.jsx)("br",{}),s]}),children:(0,r.jsx)(l.Z,{onClick:d,sx:{display:"flex",justifyContent:"center",alignItems:"center",width:"".concat(a,"px"),height:"".concat(a,"px"),position:"absolute",left:"".concat(x*a,"px"),top:"".concat(p*a,"px"),backgroundColor:wn()(m).darken(20).setAlpha(.4).toRgbString(),"&:hover":u?{backgroundColor:wn()(m).setAlpha(.8).toRgbString()}:void 0},children:t})})}function An(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Cn(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Pn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Cn(a,r,i,o,l,"next",e)}function l(e){Cn(a,r,i,o,l,"throw",e)}o(void 0)}))}}function In(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return An(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return An(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function En(e){var n=e.cellSize,t=e.boundingBox,a=e.capital,o=e.type,l=e.range,s=In((0,D.iA)(),1)[0],c=a.connections.map((function(e){return e.location})).concat(a.location),u={x:Math.max(0,t.min.x-1),y:Math.max(0,t.min.y-1)},d={x:Math.min(127,t.max.x+1),y:Math.min(95,t.max.y+1)},h=(0,i.useMemo)((function(){for(var e=function(e,t){for(var r=function(t,r){return Math.abs(e-a.location.x)+Math.abs(t-a.location.y)>=l||c.find((function(n){return n.x===e&&n.y===t}))?"continue":c.find((function(n){return n.x===e+1&&n.y===t||n.x===e-1&&n.y===t||n.x===e&&n.y===t+1||n.x===e&&n.y===t-1}))?void n.push({x:e,y:t,map:a.location.map}):"continue"},i=u.y,o=d.y;i<=o;++i)r(i)},n=[],t=u.x,r=d.x;t<=r;++t)e(t);return n}),[c.length,u.x,u.y,d.x,d.y,l]);function m(){return(m=Pn(b().mark((function e(n){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s({variables:{location:n,type:o}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:h.map((function(e){return(0,r.jsx)(kn,{onClick:function(){return function(e){return m.apply(this,arguments)}(e)},hover:!0,color:"rgb(10, 120, 10)",cellSize:n,boundingBox:t,location:e,tooltip:"Build here",icon:(0,r.jsx)(hn.Z,{})},"".concat(e.x,"-").concat(e.y))}))})}function Mn(e){e.location;return(0,r.jsx)("div",{children:"details"})}function Wn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ln(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function On(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Ln(a,r,i,o,l,"next",e)}function l(e){Ln(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Dn(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Bn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Dn(e,n,t[n])}))}return e}function Fn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||$n(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(e){return function(e){if(Array.isArray(e))return Wn(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $n(e,n){if(e){if("string"===typeof e)return Wn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Wn(e,n):void 0}}var qn=(Dn(Zn={},D.oS.Farm,(0,r.jsx)(fn.Z,{})),Dn(Zn,D.oS.Shrine,(0,r.jsx)(dn.Z,{})),Dn(Zn,D.oS.Apiary,(0,r.jsx)(pn.Z,{})),Dn(Zn,D.oS.Barracks,(0,r.jsx)(re.Z,{})),Zn);function Qn(e){var n,t,a=e.hero,o=e.onClose,c=function(){S(null)},m=function(e){console.log(H),"destroy"===H?S(e):"info"===H&&C(e)},f=Fn((0,D.j9)(),2),y=f[0],g=f[1].loading,j=(0,i.useState)(null),Z=j[0],S=j[1],w=(0,i.useState)(null),A=w[0],C=w[1],P=(0,i.useState)(null),I=P[0],E=P[1],M=(0,D.Dp)({pollInterval:6e4}),W=M.data,L=M.loading,O=M.refetch,B=(0,un.Z)(),F=(0,cn.Z)(B.breakpoints.up("sm")),T=(0,cn.Z)(B.breakpoints.up("md")),$=(0,cn.Z)(B.breakpoints.up("lg")),q=!F&&!T&&!$,Q=F&&!T&&!$,G=F&&T&&!$,U=F&&T&&$,R=(0,i.useState)("info"),H=R[0],N=R[1];if((0,i.useEffect)((function(){!a.home&&o&&o()}),[a.home,o]),!a.home)return null;if(L)return null;if(!W)return null;var z,Y,K,J=W.settlementManager,V=J.capital,_=J.availableBuildings,X=(J.availableUpgrades,J.range),ee=V,ne=jn.apply(void 0,[ee.resources].concat(Tn(ee.connections.map((function(e){return e.resources}))))),te=null!==(z=null===(n=ne.find((function(e){return"population"===e.name})))||void 0===n?void 0:n.value)&&void 0!==z?z:0,re=(Y=null===(t=ne.find((function(e){return"food"===e.name})))||void 0===t?void 0:t.value,(K=Tn(ee.connections).concat([ee]).map((function(e){return e.location}))).reduce((function(e,n){return e.min.x=Math.min(e.min.x,n.x),e.min.y=Math.min(e.min.y,n.y),e.max.x=Math.max(e.max.x,n.x),e.max.y=Math.max(e.max.y,n.y),e}),{min:{map:K[0].map,x:127,y:96},max:{map:K[0].map,x:0,y:0}})),ie=re.max.x-re.min.x+5,ae=re.max.y-re.min.y+5,oe=290;q||(Q?oe=B.breakpoints.values.sm-110:G?oe=B.breakpoints.values.md/2-160:U&&(oe=B.breakpoints.values.lg/2-80));var le,se=8*Math.round(Math.min(oe/ie,oe/ae)/8);function ce(){return(ce=On(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Z){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,y({variables:{location:{x:Z.location.x,y:Z.location.y,map:Z.location.map}}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:return e.prev=9,S(null),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[2,7,9,12]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(Fe.Z,{open:!!Z,onClose:c,"aria-labelledby":"destroy-building-title","aria-describedby":"destroy-building-description",children:[(0,r.jsx)(Qe.Z,{id:"destroy-building-title",children:"Destroy Building?"}),(0,r.jsx)($e.Z,{children:Z&&(0,r.jsxs)(qe.Z,{id:"destroy-building-description",children:["Are you sure you want to destroy the ",Z.type," at"," ",Z.location.x,", ",Z.location.y,"?"]})}),(0,r.jsxs)(Te.Z,{children:[(0,r.jsx)(k.Z,{onClick:c,color:"info",children:"Cancel"}),(0,r.jsx)(Ge.Z,{loading:g,onClick:function(){return ce.apply(this,arguments)},color:"error",children:"Destroy"})]})]}),(0,r.jsx)(x.ZP,{value:H,children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.Z,{variant:"h4",children:"Settlement Manager"})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:2,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)("b",{children:"Capital"}),": ",ee.location.x,", ",ee.location.y]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:2,children:(0,r.jsxs)(d.Z,{children:[(0,r.jsx)("b",{children:"Map tiles"}),":"," ",(ee.connections.length+1).toLocaleString()]})}),Tn(ne).sort((function(e,n){return n.value-e.value})).map((function(e){return e.value<te&&("food"===e.name||"water"===e.name)?(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsxs)(d.Z,{color:"error",children:[(0,r.jsx)("b",{children:(0,Be.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&" / ".concat(e.maximum.toLocaleString())]})},e.name):(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:[(0,r.jsx)("b",{children:(0,Be.words)(e.name)}),":"," ",e.value.toLocaleString(),e.maximum&&" / ".concat(e.maximum.toLocaleString())]},e.name)})),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsxs)(p.Z,{"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",onChange:function(e,n){I&&E(null),N(n)},sx:{flexShrink:0,flexGrow:1},children:[(0,r.jsx)(u.Z,{icon:(0,r.jsx)(yn.Z,{}),label:"View",value:"info"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(hn.Z,{}),label:"Build",value:"build"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(vn.Z,{}),label:"Destroy",value:"destroy"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(mn.Z,{}),label:"Market",value:"market"})]})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,md:2,lg:3,children:(0,r.jsxs)(l.Z,{sx:{position:"relative"},children:[(0,r.jsx)(Ze,{location:ee.location,indicatorSize:0,minimapSize:[ie,ae],cellSize:se}),(0,r.jsx)(kn,{onClick:function(){return m(Bn({},ee,{connections:[]}))},cellSize:se,boundingBox:re,location:ee.location,tooltip:"Capital",icon:(0,r.jsx)(xn.Z,{})}),ee.connections.map((function(e){return(0,r.jsx)(kn,{hover:"destroy"===H,onClick:function(){return m(Bn({},e,{connections:[]}))},cellSize:se,boundingBox:re,location:e.location,tooltip:e.type,icon:null!==(le=qn[e.type])&&void 0!==le?le:(0,r.jsx)(dn.Z,{})},e.id)})),I&&(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(En,{type:I,cellSize:se,boundingBox:re,capital:ee,range:X})})]})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,md:4,lg:3,children:[(0,r.jsxs)(v.Z,{value:"build",children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Construct new buildings"}),(0,r.jsx)(d.Z,{variant:"subtitle2",sx:{mb:1},children:"Each building uses a map tile."}),(0,r.jsx)(Ne.Z,{alignItems:"start",children:_.map((function(e){return(0,r.jsxs)(l.Z,{sx:{mb:3},children:[(0,r.jsx)(s.Z,{sx:{mb:1}}),(0,r.jsx)(d.Z,{variant:"h5",children:e.name}),(0,r.jsx)(d.Z,{sx:{mb:1},children:e.description}),(0,r.jsx)(d.Z,{variant:"h6",children:"Cost to build"}),(0,r.jsx)(l.Z,{sx:{pl:2},children:e.cost.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)("li",{children:[(0,r.jsxs)("b",{children:[(0,Be.words)(e.name),":"]})," ",e.value.toLocaleString()]})},e.name)}))}),(0,r.jsx)(k.Z,{sx:{mt:2},onClick:function(){return E(e.type)},variant:"contained",color:"success",children:"Build Building"},e.type)]})}))})]}),(0,r.jsx)(v.Z,{value:"destroy",children:"Click on a location to demolish the building there. You will get nothing back, and this cannot be undone."}),(0,r.jsx)(v.Z,{value:"market",children:(0,r.jsx)(Ve,{hero:a,camp:ee,onBuyResource:function(){O()}})}),(0,r.jsxs)(v.Z,{value:"info",children:[!A&&(0,r.jsx)(d.Z,{}),A&&(0,r.jsx)(Mn,{location:A})]})]})]})})]})}function Gn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Un(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Rn(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Un(a,r,i,o,l,"next",e)}function l(e){Un(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Hn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Gn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Gn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nn(){var e,n=function(e,n){var t=Number(e),r=Number(n);NaN!==t&&NaN!==r&&Number.isFinite(t)&&Number.isFinite(r)&&(r=Math.min(95,Math.max(0,Math.round(r))),(t=Math.min(127,Math.max(0,Math.round(t))))!==u&&m(t),r!==x&&p(r))},t=B(),a=(0,i.useState)(!1),o=a[0],l=a[1],c=(0,i.useState)(-1),u=c[0],m=c[1],f=(0,i.useState)(-1),x=f[0],p=f[1],v=Hn((0,ee.g)(),2),y=v[0],g=v[1],j=Hn((0,D.gK)(),2),Z=j[0],S=j[1].loading,w=Hn((0,D.Q8)(),2),A=w[0],C=w[1].loading,P=ne(),I=te(),E=function(){var e=ne(),n=(null===e||void 0===e?void 0:e.playerLocations)||[];return n.length?n[0]:null}();if((0,i.useEffect)((function(){t&&(m(t.location.x),p(t.location.y))}),[t]),!t)return null;if(o)return(0,r.jsx)(Qn,{hero:t});var M=S||0===t.combat.health||y>0||C;function W(e){return L.apply(this,arguments)}function L(){return(L=Rn(b().mark((function e(n){var t,r;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Z({variables:{direction:n}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(r=t.extensions)||void 0===r?void 0:r.delay)&&g(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function O(){return(O=Rn(b().mark((function e(){var n,t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A({variables:{x:u,y:x}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&g(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}var T,$=Math.round(Math.pow(5*(0,F.LW)(t.location,{x:u,y:x}),1.3));return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:2,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,xs:2,sm:1,children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:3,children:[(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:(0,r.jsx)(tn,{hero:t,onShowSettlement:function(){l(!0)}})}),(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[t.combat.health>0&&(0,r.jsx)(d.Z,{children:"Use buttons to move around the map."}),0===t.combat.health&&(0,r.jsx)(d.Z,{variant:"h6",children:"You cannot move while dead. Heal yourself in the Combat tab."})]}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{disabled:M,variant:"contained",onClick:function(){return W(D.p$.North)},children:"North"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{disabled:M,variant:"contained",onClick:function(){return W(D.p$.West)},children:"West"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsxs)(d.Z,{children:[t.location.x,", ",t.location.y]})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{disabled:M,variant:"contained",onClick:function(){return W(D.p$.East)},children:"East"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(k.Z,{disabled:M,variant:"contained",onClick:function(){return W(D.p$.South)},children:"South"})}),(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2}),t.stats.intelligence>100&&(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[(0,r.jsx)(s.Z,{}),(0,r.jsx)(d.Z,{variant:"h6",color:"secondary",sx:{margin:1},children:"Teleport"}),(0,r.jsx)(q.Z,{label:"X coordinate",value:u,onChange:function(e){return n(e.target.value,x)},sx:{width:"100px",margin:1}}),(0,r.jsx)(q.Z,{label:"Y coordinate",value:x,onChange:function(e){return n(u,e.target.value)},sx:{width:"100px",margin:1}}),(0,r.jsx)("br",{}),(0,r.jsxs)(k.Z,{color:"secondary",variant:"outlined",onClick:function(){return O.apply(this,arguments)},disabled:0===$||$>t.stats.intelligence||M,children:[$>0&&"Teleport for ".concat($.toLocaleString()," intelligence"),$<=0&&"Teleport"]})]})]})}),(0,r.jsxs)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,sm:1,children:[I&&(0,r.jsx)(d.Z,{variant:"h6",children:I.name}),I&&(0,r.jsx)(d.Z,{variant:"subtitle2",children:I.type}),E&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{variant:"h6",children:[null!==(T=null===(e=E.publicOwner)||void 0===e?void 0:e.name)&&void 0!==T?T:"???","'s Settlement"]}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:E.type})]}),!I&&!E&&P&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Wilderness"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:P.terrain.terrain})]}),!I&&!E&&!P&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"h6",children:"\xa0"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:"loading..."})]}),(0,r.jsx)(Ze,{location:t.location}),(null===I||void 0===I?void 0:I.description)&&I.description.map((function(e,n){return(0,r.jsx)(d.Z,{variant:"body1",children:e},"loc-desc-".concat(n))}))]}),"dock"===(null===I||void 0===I?void 0:I.type)&&(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(Ce,{location:I})}),(null===P||void 0===P?void 0:P.shop)&&(0,r.jsx)(h.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(We,{shop:null===P||void 0===P?void 0:P.shop})})]})})}var zn,Yn=t(7948),Kn=t(6336);function Jn(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Vn(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function _n(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Vn(a,r,i,o,l,"next",e)}function l(e){Vn(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Xn(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Jn(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Jn(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function et(){var e=Xn((0,ee.g)(),2),n=e[0],t=e[1],a=(0,i.useState)(1),o=a[0],c=a[1],u=Xn((0,D.Y4)(),2),m=u[0],f=u[1].loading,x=B();(null===x||void 0===x?void 0:x.attributePoints)&&(o=Math.min(o,x.attributePoints));var p="Spending ".concat(o.toLocaleString()," attribute points");function v(e){return y.apply(this,arguments)}function y(){return(y=_n(b().mark((function e(n){var r,i;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Leveling up...",n),e.prev=1,e.next=4,m({variables:{attribute:D.GC[n],amount:o}});case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),e.t0.graphQLErrors&&(null===(r=e.t0.graphQLErrors[0])||void 0===r||null===(i=r.extensions)||void 0===i?void 0:i.delay)&&t(e.t0.graphQLErrors[0].extensions.remaining);case 10:case"end":return e.stop()}}),e,null,[[1,6]])})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(l.Z,{sx:{backgroundColor:"secondary.light"},children:[(0,r.jsx)("br",{}),(0,r.jsx)(d.Z,{variant:"h5",align:"center",children:"You have leveled up!"}),(0,r.jsxs)(Yn.Z,{children:[(0,r.jsx)(d.Z,{align:"center",children:"Each of your attributes increases by 1 when you level up. You may also choose an attribute to further increase."}),(0,r.jsx)(l.Z,{sx:{textAlign:"center",align:"center",ml:1,mr:1},children:x&&x.attributePoints>2&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{id:"level-up-stat-slider-label",children:p}),(0,r.jsx)(Kn.ZP,{min:1,max:x.attributePoints,value:o,onChange:function(e,n){return!Array.isArray(n)&&c(n)},id:"level-up-stat-slider","aria-labelledby":"level-up-stat-slider-label",valueLabelDisplay:"auto"})]})})]}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.ZP,{container:!0,columns:14,spacing:2,children:[(0,r.jsx)(M.Z,{title:"Strength determains your damage when attacking with melee weapons",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-strength",disabled:f||n>0,onClick:function(){return v("Strength")},variant:"contained",children:"Strength"})})})}),(0,r.jsx)(M.Z,{title:"Dexterity determines the accuracy and dodge rate for melee and ranged weapons, it also determines ranged weapons damage",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-dexterity",disabled:f||n>0,onClick:function(){return v("Dexterity")},variant:"contained",children:"Dexterity"})})})}),(0,r.jsx)(M.Z,{title:"Constitution determines your max health, and is used in both attacking and defending blood magic",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-constitution",disabled:f||n>0,onClick:function(){return v("Constitution")},variant:"contained",children:"Constitution"})})})}),(0,r.jsx)(M.Z,{title:"Intelligence determines your spellcasting damage",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-intelligence",disabled:f||n>0,onClick:function(){return v("Intelligence")},variant:"contained",children:"Intelligence"})})})}),(0,r.jsx)(M.Z,{title:"Wisdom is your accuracy and dodge stat for spellcasting and smiting",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-wisdom",disabled:f||n>0,onClick:function(){return v("Wisdom")},variant:"contained",children:"Wisdom"})})})}),(0,r.jsx)(M.Z,{title:"Willpower helps you survive attacks by reducing damage, it also helps smiters deal deal more damage.",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-willpower",disabled:f||n>0,onClick:function(){return v("Willpower")},variant:"contained",children:"Willpower"})})})}),(0,r.jsx)(M.Z,{title:"Luck helps you critically strike foes and also affects item drop rates",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-luck",disabled:f||n>0,onClick:function(){return v("Luck")},variant:"contained",children:"Luck"})})})}),(0,r.jsx)(M.Z,{title:"Places 1 in every stat for a more well rounded character",children:(0,r.jsx)(h.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(d.Z,{align:"center",children:(0,r.jsx)(k.Z,{id:"level-up-all",disabled:f||n>0,onClick:function(){return v("All")},variant:"contained",children:"All"})})})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(s.Z,{})]})}function nt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function tt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function rt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){tt(a,r,i,o,l,"next",e)}function l(e){tt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function it(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function at(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return nt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return nt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ot=(it(zn={},D.$7.MeleeWeapon,"Melee Weapon"),it(zn,D.$7.RangedWeapon,"Ranged Weapon"),it(zn,D.$7.SpellFocus,"Spell Focus"),it(zn,D.$7.Shield,"Shield"),it(zn,D.$7.BodyArmor,"Body Armor"),it(zn,D.$7.HandArmor,"Gauntlets"),it(zn,D.$7.LegArmor,"Leggings"),it(zn,D.$7.HeadArmor,"Helmet"),it(zn,D.$7.FootArmor,"Greaves"),zn);function lt(e){var n;return null!==(n=ot[e])&&void 0!==n?n:(0,F.qh)(e)}function st(e){var n=e.value,t=e.onChange,a=e.sellables,o=function(e){var n="string"===typeof e?e:e.baseItem,t=a.find((function(e){return e.id===n}));return t&&t.cost?function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){it(e,n,t[n])}))}return e}({},t,{cost:Math.round(t.cost/3)}):null},l=B();if(!l)return null;var s=l.inventory.filter((function(e){return!e.enchantment})).filter((function(e){return e.type!==D.$7.Quest})).sort((function(e,n){return e.level-n.level})),c="Sell non-enchanted gear";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"sell-shop-select-label",children:c}),(0,r.jsx)(T.Z,{id:"sell-shop-select",labelId:"sell-shop-select-label",value:n||"",label:c,onChange:function(e){var n=e.target.value,r=l.inventory.find((function(e){return e.id===n}));if(r){var i=o(r);i&&i.cost&&t&&t({id:n,name:(0,F.GJ)(r),cost:i.cost})}},children:s.map((function(e){var n=o(e);return(0,r.jsxs)($.Z,{value:e.id,disabled:!n||!!e.enchantment||(0,F.mQ)(l,e),children:[(null===n||void 0===n?void 0:n.cost)&&"".concat((0,F.GJ)(e),": ").concat(n.cost.toLocaleString()," Gold"),!(null===n||void 0===n?void 0:n.cost)&&e.name," ",(0,F.mQ)(l,e)&&"*EQUIPPED*"]},e.id)}))})]})})}function ct(e){var n=e.type,t=e.items,i=e.value,a=e.onChange,o=B(),l=lt(n),s="".concat(l," Shop");return o?(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"".concat(n,"-shop-select-label"),children:s}),(0,r.jsx)(T.Z,{id:"".concat(n,"-shop-select"),labelId:"".concat(n,"-shop-select-label"),value:i||"",label:s,onChange:function(e){var n=e.target.value,r=t.find((function(e){return e.id===n}));a&&r&&r.cost&&a({id:n,name:r.name,cost:r.cost})},children:t.map((function(e){return(0,r.jsxs)($.Z,{value:e.id,disabled:!e.cost||e.cost>o.gold,children:[e.cost&&"".concat(e.name,": ").concat(e.cost.toLocaleString()," Gold"),!e.cost&&e.name]},e.id)}))})]}):null}function ut(){var e=at((0,ee.g)(),1)[0],n=(0,i.useState)(null),t=n[0],a=n[1],o=(0,i.useState)(""),l=o[0],c=o[1],u=(0,D.Cb)(),m=u.data,f=(u.loading,u.error,at((0,D.Nn)(),2)),x=f[0],p=f[1].loading,v=at((0,D.o_)(),2),y=v[0],g=v[1].loading||p||e>0;function j(){return(j=rt(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(null),e.next=6,x({variables:{baseItem:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function Z(){return(Z=rt(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,a(null),e.next=6,y({variables:{item:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var S,w="Choose which shop to visit";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(d.Z,{align:"center",children:["Welcome to the shop! You can buy and sell any non-enchanted items here.",(0,r.jsx)("br",{})]}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("br",{}),(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"shop-type-select-label",children:w}),(0,r.jsxs)(T.Z,{id:"shop-type-select",labelId:"shop-type-select-label",value:l,label:w,onChange:function(e){c(e.target.value),a(null)},children:[(0,r.jsx)($.Z,{value:"sell",children:"Sell Items"}),(0,r.jsx)(s.Z,{}),(0,r.jsxs)($.Z,{value:D.$7.MeleeWeapon,children:[lt(D.$7.MeleeWeapon)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.RangedWeapon,children:[lt(D.$7.RangedWeapon)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.SpellFocus,children:[lt(D.$7.SpellFocus)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.Shield,children:[lt(D.$7.Shield)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.BodyArmor,children:[lt(D.$7.BodyArmor)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.HandArmor,children:[lt(D.$7.HandArmor)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.LegArmor,children:[lt(D.$7.LegArmor)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.HeadArmor,children:[lt(D.$7.HeadArmor)," Shop"]}),(0,r.jsxs)($.Z,{value:D.$7.FootArmor,children:[lt(D.$7.FootArmor)," Shop"]})]})]})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,children:[""!==l&&"sell"!==l&&(0,r.jsx)(ct,{value:t?t.id:null,type:l,items:function(e){var n;return(null===m||void 0===m||null===(n=m.shopItems)||void 0===n?void 0:n.length)?m.shopItems.filter((function(n){return n.type===e})):[]}(l),onChange:function(e){return a(e)}},l),"sell"===l&&(0,r.jsx)(st,{value:t?t.id:null,sellables:null!==(S=null===m||void 0===m?void 0:m.shopItems)&&void 0!==S?S:[],onChange:function(e){return a(e)}})]}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:t&&(0,r.jsxs)(k.Z,{variant:"contained",color:"sell"===l?"error":"success",fullWidth:!0,disabled:g,onClick:"sell"===l?function(){return Z.apply(this,arguments)}:function(){return j.apply(this,arguments)},children:["sell"===l?"Sell":"Buy"," ",t.name," for"," ",t.cost.toLocaleString()," gold"]})})]}),(0,r.jsx)("br",{})]})}function dt(){B();var e=ne();te();return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(ut,{}),(null===e||void 0===e?void 0:e.shop)&&(0,r.jsx)(We,{shop:null===e||void 0===e?void 0:e.shop})]})}function ht(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function mt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ft(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){mt(a,r,i,o,l,"next",e)}function l(e){mt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function xt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ht(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ht(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e){var n=e.hero,t=(e.disabled,xt((0,D.Nw)(),2)),a=t[0],o=(t[1].loading,n.level>=n.levelCap);function s(){return(s=ft(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,a();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsxs)(l.Z,{sx:{padding:1,margin:1},children:[(0,r.jsx)(d.Z,{color:"secondary",variant:"h2",children:"Rebirth"}),!o&&(0,r.jsx)(d.Z,{children:"You may only be reborn when you are at level cap. Keep leveling up your character in order to be reborn!"}),o&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{children:"This will reset your character's level and attributes, however you will keep all gold and items and will receive special bonuses depending on your current level cap."}),(0,r.jsx)("br",{}),(0,r.jsx)(k.Z,{size:"large",variant:"outlined",color:"secondary",onClick:function(){return s.apply(this,arguments)},children:"Reset Character to Level 1"})]})]})}var vt=t(5988),yt=t(9629);function gt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function bt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function jt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){bt(a,r,i,o,l,"next",e)}function l(e){bt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Zt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return gt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function St(e){var n=e.hero,t=e.disabled,a=(0,i.useState)(""),o=a[0],l=a[1],s=Zt((0,D.Pw)(),2),c=s[0],u=s[1].loading,h=n.inventory.filter((function(e){return e.type!==D.$7.Quest&&(!(0,F.mQ)(n,e)&&!!e.enchantment)})).sort(F.v4),m="Select item to destroy",f=h.find((function(e){return e.id===o}));function x(){return(x=jt(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c({variables:{item:o}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return!f&&o.length&&(h.length?(f=h[0],o=f.id):o=""),(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Select an enchanted item you would like to destroy, smashing it with the crafting hammer into fine Enchanting Dust."}),(0,r.jsx)("br",{}),(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"destroy-select-label",children:m}),(0,r.jsx)(T.Z,{id:"destroy-select",labelId:"destroy-select-label",value:o||"",label:m,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&l(t)},children:h.map((function(e){return(0,r.jsxs)($.Z,{value:e.id,disabled:(0,F.mQ)(n,e),children:[(0,F.GJ)(e)," ",(0,F.mQ)(n,e)&&"*EQUIPPED*"]},e.id)}))}),(0,r.jsxs)(k.Z,{variant:"contained",disabled:!f||t||u,color:"error",onClick:function(){return x.apply(this,arguments)},children:[f&&(0,r.jsxs)(i.Fragment,{children:["Destroy ",(0,F.GJ)(f)]}),!f&&"Select Item"]})]})]})}function wt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function kt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function At(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){kt(a,r,i,o,l,"next",e)}function l(e){kt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Ct(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||It(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e){return function(e){if(Array.isArray(e))return wt(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||It(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,n){if(e){if("string"===typeof e)return wt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?wt(e,n):void 0}}function Et(e){var n=e.hero,t=e.disabled,a=(0,i.useState)(""),o=a[0],s=a[1],c=(0,i.useState)(""),u=c[0],h=c[1],m=Ct((0,D.mE)(),2),f=m[0],x=m[1].loading,p=n.inventory.filter((function(e){return e.type!==D.$7.Quest&&!e.enchantment})).sort(F.v4),v={},y=Pt(n.enchantments).sort().filter((function(e){return!v[e]&&(v[e]=!0,!0)})),g=p.find((function(e){return e.id===o}));!g&&o.length&&(p.length?(g=p[0],o=g.id):o="");var j=y.find((function(e){return e===u}));function Z(){return(Z=At(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,f({variables:{item:o,enchantment:u}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}!j&&u.length&&(y.length?(j=y[0],u=j):u="");var S=g?g.level:0,w="Select base item",A="Select an enchantment";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Enchanting allows you to combine a pure item and pure enchantment into a new enchanted item! You can acquire pure enchantments through disenchanting items."}),(0,r.jsx)("br",{}),(0,r.jsxs)(P.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(I.Z,{id:"enchant-baseItem-select-label",children:w}),(0,r.jsx)(T.Z,{id:"enchant-baseItem-select",labelId:"enchant-baseItem-select-label",value:o||"",label:w,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&s(t)},children:p.map((function(e){return(0,r.jsxs)($.Z,{value:e.id,children:[(0,F.GJ)(e)," ",(0,F.mQ)(n,e)&&"*EQUIPPED*"]},e.id)}))})]}),(0,r.jsxs)(P.Z,{fullWidth:!0,sx:{margin:1},children:[(0,r.jsx)(I.Z,{id:"enchant-enchantment-select-label",children:A}),(0,r.jsx)(T.Z,{id:"enchant-enchantment-select",labelId:"enchant-enchantment-select-label",value:u||"",label:A,onChange:function(e){var n=e.target.value,t=y.find((function(e){return n===e}));t&&h(t)},children:y.map((function(e){return(0,r.jsx)($.Z,{value:e,children:(0,F.uD)(e)},e)}))})]}),(0,r.jsxs)(k.Z,{fullWidth:!0,variant:"contained",disabled:!g||t||x||S>n.enchantingDust,color:"success",onClick:function(){return Z.apply(this,arguments)},children:[g&&""!==u&&(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{children:["Create"," ",(0,r.jsx)("b",{children:(0,F.FK)(g.baseItem,u)})]}),(0,r.jsxs)(d.Z,{variant:"subtitle2",children:["Costs ",S.toLocaleString()," Enchantment Dust"]})]}),!g&&"Select Item"]})]})}function Mt(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Wt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Lt(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Wt(a,r,i,o,l,"next",e)}function l(e){Wt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function Ot(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Mt(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Mt(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dt(e){var n=e.hero,t=e.disabled,a=(0,i.useState)(""),o=a[0],s=a[1],c=Ot((0,D.dg)(),2),u=c[0],h=c[1].loading,m=n.inventory.filter((function(e){return e.type!==D.$7.Quest&&(!(0,F.mQ)(n,e)&&!!e.enchantment)})).sort(F.v4),f=m.find((function(e){return e.id===o}));function x(){return(x=Lt(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u({variables:{item:o}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}!f&&o.length&&(m.length?(f=m[0],o=f.id):o="");var p="Select item to disenchant",v=f?f.level:0;return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.Z,{variant:"body1",children:"Select an item to split from its enchantment. You will keep both the base item and the enchantment itself for use in further crafting."}),(0,r.jsx)("br",{}),(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"disenchant-select-label",children:p}),(0,r.jsx)(T.Z,{id:"disenchant-select",labelId:"disenchant-select-label",value:o||"",label:p,onChange:function(e){var t=e.target.value;n.inventory.find((function(e){return e.id===t}))&&s(t)},children:m.map((function(e){return(0,r.jsxs)($.Z,{value:e.id,disabled:(0,F.mQ)(n,e),children:[(0,F.GJ)(e)," ",(0,F.mQ)(n,e)&&"*EQUIPPED*"]},e.id)}))}),(0,r.jsxs)(k.Z,{variant:"contained",disabled:!f||t||h||v>n.enchantingDust,color:"error",onClick:function(){return x.apply(this,arguments)},children:[f&&(0,r.jsxs)(l.Z,{children:[(0,r.jsxs)(d.Z,{children:["Disenchant ",(0,r.jsx)("b",{children:(0,F.GJ)(f)})]}),(0,r.jsxs)(d.Z,{variant:"subtitle2",children:["Costs ",v.toLocaleString()," Enchantment Dust"]})]}),!f&&"Select Item"]})]})]})}function Bt(e){var n=e.hero,t=e.disabled,a=(0,i.useState)("1"),o=a[0],c=a[1];return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(s.Z,{sx:{margin:2}}),(0,r.jsx)(d.Z,{variant:"h2",color:"secondary",children:"Crafting"}),(0,r.jsxs)(d.Z,{variant:"subtitle1",color:"secondary",children:["Enchanting Dust:"," ",(0,r.jsx)("span",{id:"hero-stats-enchanting-dust",children:n.enchantingDust.toLocaleString()})]}),(0,r.jsxs)(d.Z,{variant:"subtitle1",color:"secondary",children:["Enchantments:"," ",(0,r.jsx)("span",{id:"hero-stats-enchantments",children:n.enchantments.length.toLocaleString()})]}),(0,r.jsx)("br",{}),(0,r.jsx)(x.ZP,{value:o,children:(0,r.jsxs)(l.Z,{sx:{flexGrow:1,borderBottom:1,borderColor:"divider",display:"flex"},children:[(0,r.jsxs)(p.Z,{orientation:"vertical",onChange:function(e,n){return c(n)},"aria-label":"navigation tabs",variant:"scrollable",textColor:"secondary",indicatorColor:"secondary",sx:{flexShrink:0,flexGrow:0,width:"100px"},children:[(0,r.jsx)(u.Z,{icon:(0,r.jsx)(vn.Z,{}),label:"Destroy",value:"1"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(yt.Z,{}),label:"Disenchant",value:"2"}),(0,r.jsx)(u.Z,{icon:(0,r.jsx)(vt.Z,{}),label:"Enchant",value:"3"})]}),(0,r.jsx)(v.Z,{value:"1",children:(0,r.jsx)(St,{hero:n,disabled:t})}),(0,r.jsx)(v.Z,{value:"2",children:(0,r.jsx)(Dt,{hero:n,disabled:t})}),(0,r.jsx)(v.Z,{value:"3",children:(0,r.jsx)(Et,{hero:n,disabled:t})})]})})]})}function Ft(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Tt(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function $t(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Tt(a,r,i,o,l,"next",e)}function l(e){Tt(a,r,i,o,l,"throw",e)}o(void 0)}))}}function qt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Ft(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ft(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qt(e){var n,t=e.hero,a=e.slot,o=e.label,l=e.onEquip,s=e.disabled,c=null===(n=t.equipment[a])||void 0===n?void 0:n.id,u=["leftHand","rightHand","bodyArmor","handArmor","legArmor","headArmor","footArmor"].filter((function(e){return t.equipment[e]&&e!==a})).map((function(e){var n;return null===(n=t.equipment[e])||void 0===n?void 0:n.id})),h=(0,i.useState)(c||""),m=(h[0],h[1]),f=t.inventory.filter((function(e){return function(e,n){switch(e){case"rightHand":case"leftHand":return n.type===D.$7.MeleeWeapon||n.type===D.$7.RangedWeapon||n.type===D.$7.Shield||n.type===D.$7.SpellFocus;case"bodyArmor":return n.type===D.$7.BodyArmor;case"handArmor":return n.type===D.$7.HandArmor;case"legArmor":return n.type===D.$7.LegArmor;case"headArmor":return n.type===D.$7.HeadArmor;case"footArmor":return n.type===D.$7.FootArmor;default:return!1}}(a,e)})).sort(F.v4);return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"".concat(a,"-equip-select-label"),children:o}),(0,r.jsx)(T.Z,{id:"".concat(a,"-equip-select"),labelId:"".concat(a,"-equip-select-label"),value:c||"",label:o,disabled:s,onChange:function(e){m(e.target.value),l(a,e.target.value)},children:f.map((function(e){return(0,r.jsxs)($.Z,{value:e.id,disabled:u.indexOf(e.id)>=0,children:[e.id===c?(0,r.jsx)("b",{children:(0,F.GJ)(e)}):(0,F.GJ)(e),e.enchantment&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"info.main"},children:["\xa0",Rt(e.enchantment)]})]},e.id)}))})]})})})}function Gt(e){var n=e.hero,t=e.disabled,a=e.onChange,o=(0,i.useState)(""),l=o[0],s=o[1],c=n.inventory.filter((function(e){return e.type===D.$7.Quest})).sort((function(e,n){return n.level-e.level})),u="Quest items (passive, always active)",h=n.inventory.find((function(e){return e.id===l}));return(0,i.useEffect)((function(){l.length&&!h&&s("")}),[h,l]),(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"quest-item-label",children:u}),(0,r.jsx)(T.Z,{id:"quest-item",labelId:"quest-item-label",value:l,label:u,disabled:t,onChange:function(e){if(s(e.target.value),a){var n=c.find((function(n){return n.id===e.target.value}));n&&a(n.baseItem)}},children:c.map((function(e){return(0,r.jsxs)($.Z,{value:e.id,children:[(0,F.GJ)(e),"???"!==Rt(e.baseItem)&&(0,r.jsxs)(d.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",Rt(e.baseItem)]})]},e.id)}))})]})})})}function Ut(){var e=qt((0,ee.g)(),1)[0],n=qt((0,D.aP)(),2),t=n[0],a=n[1].loading,o=(0,i.useState)(""),l=o[0],s=o[1],c=B(),u=a||e>0;if(!c)return null;function m(e,n){return f.apply(this,arguments)}function f(){return(f=$t(b().mark((function e(n,r){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{item:r,slot:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.Z,{children:"Equipped items"})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Qt,{hero:c,slot:"leftHand",label:"Left Hand",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Qt,{hero:c,slot:"rightHand",label:"Right Hand",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Qt,{hero:c,slot:"bodyArmor",label:"Body Armor",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Qt,{hero:c,slot:"handArmor",label:"Gauntlets",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Qt,{hero:c,slot:"legArmor",label:"Leggings",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Qt,{hero:c,slot:"headArmor",label:"Helmets",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Qt,{hero:c,slot:"footArmor",label:"Greaves",onEquip:m,disabled:u})}),(0,r.jsx)(h.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Gt,{hero:c,disabled:u,onChange:s})}),(0,F.jr)(l)&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(pt,{hero:c,disabled:u})}),(0,F.OB)(l)&&(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(Bt,{hero:c,disabled:u})})]})})}function Rt(e){switch(e){case"fishermans-strength":return"+50% Strength";case"fishermans-dexterity":return"+50% Dexterity";case"fishermans-constitution":return"+50% Constitution";case"fishermans-intelligence":return"+50% Intelligence";case"fishermans-wisdom":return"+50% Wisdom";case"fishermans-willpower":return"+50% Willpower";case"fishermans-luck":return"+50% Luck";case"totem-of-champion":return"+Level cap, auto-battler, +100% XP";case"totem-of-hero":return"2x Leveling rate, +Level cap, auto-battler, +100% XP";case"warriors-armlette":return"Upgrades Fighter and Berserker classes";case"tome-of-knowledge":return"Upgrades Wizard and Warlock classes";case"quiver-of-speed":return"Upgrades Ranger class";case"vampire-ring":return"Upgrades Blood Mage class";case"gambling-kit":return"Upgrades Gambler class";case"patrons-wisdom":return"Upgrades Battle Mage class";case"liturgical-censer":return"Upgrades Paladin class";case"dont-get-hit":return"Double dodge, double accuracy";case"aqua-lungs":return"Allows water travel";case"trophy-hellhound":return"2x All Stats, +1 Weapon Tier";case"trophy-hiddenstump":return"2x All Stats, 2x Dodge";case"trophy-steamgear":return"2x All Stats, Improved auto-battler";case"trophy-drowning":return"2x All Stats, +1 Armor Tier";case"archers-impatience":return"50% Double Shot";case"archers-determination":return"Ranged -20% Armor, 50% Double Shot";case"archers-balance":return"+1 Ranged Weapon Tier, Ranged -20% Armor, 50% Double Shot";case"attackers-precision":return"+30% Dexterity";case"attackers-honor":return"Melee -20% Armor, +30% Dexterity";case"attackers-warbanner":return"+1 Melee Weapon Tier, Melee -20% Armor, +30% Dexterity";case"casters-book":return"+30% Wisdom";case"casters-wisdom":return"Caster -20% Armor, +30% Wisdom";case"casters-destiny":return"+1 Spell Focus Tier, Caster -20% Armor, +30% Wisdom";case"smiters-inspiration":return"+30% Willpower";case"smiters-calling":return"Smite -20% Armor, +30% Willpower";case"smiters-light":return"+1 Shield Tier, Smite -20% Armor, +30% Willpower";case"vampires-blood":return"+30% Constitution";case"vampires-gaze":return"-50% Enemy Enchantment Resist, +30% Constitution";case"vampires-darkness":return"-75% Enemy Enchantment Resist, +30% Constitution";case"naga-scale":return"Cancels out 1 enemy enchantment";case"unimaginable-gearbox":return"Improved auto-battler";case"totem-of-champion-rebirth":case"totem-of-hero-rebirth":case"totem-of-rebirth":return"Select to show rebirth menu";case"crafting-hammer":return"Select to show crafting menu";case D.kj.BonusStrength:return"+30% Strength";case D.kj.BonusDexterity:return"+30% Dexterity";case D.kj.BonusConstitution:return"+30% Constitution";case D.kj.BonusIntelligence:return"+30% Intelligence";case D.kj.BonusWisdom:return"+30% Wisdom";case D.kj.BonusWillpower:return"+30% Willpower";case D.kj.BonusLuck:return"+30% Luck";case D.kj.BonusPhysical:return"+20% Strength, Dexterity, Constitution";case D.kj.BonusMental:return"+20% Intelligence, Wisdom, Willpower";case D.kj.BonusAllStats:return"+20% All Stats";case D.kj.MinusEnemyArmor:return"-50% Enemy Armor";case D.kj.BonusArmor:return"+100% Armor";case D.kj.MinusEnemyStrength:return"-20% Enemy Strength";case D.kj.MinusEnemyDexterity:return"-20% Enemy Dexterity";case D.kj.MinusEnemyConstitution:return"-20% Enemy Constitution";case D.kj.MinusEnemyIntelligence:return"-20% Enemy Intelligence";case D.kj.MinusEnemyWisdom:return"-20% Enemy Wisdom";case D.kj.MinusEnemyWillpower:return"-20% Enemy Willpower";case D.kj.MinusEnemyPhysical:return"-10% Enemy Strength, Dexterity, Constitution";case D.kj.MinusEnemyMental:return"-10% Enemy Intelligence, Wisdom, Willpower";case D.kj.MinusEnemyAllStats:return"-10% All Enemy Stats";case D.kj.LifeHeal:return"Heal 10% Constitution";case D.kj.LifeDamage:return"Damage 10% Constitution";case D.kj.LifeSteal:return"Leech 10% Constitution";case D.kj.Vampirism:return"Leech 20% Constitution, Steal 30% Constitution";case D.kj.BigMelee:return"+100% Strength, Steal 40% Dexterity";case D.kj.BigCaster:return"+100% Intelligence, Steal 40% Wisdom";case D.kj.WisDexWill:return"+40% Wisdom, Dexterity, Willpower";case D.kj.StrengthSteal:return"Steal 30% Strength";case D.kj.DexteritySteal:return"Steal 30% Dexterity";case D.kj.ConstitutionSteal:return"Steal 30% Constitution";case D.kj.IntelligenceSteal:return"Steal 30% Intelligence";case D.kj.WisdomSteal:return"Steal 30% Wisdom";case D.kj.WillpowerSteal:return"Steal 30% Willpower";case D.kj.LuckSteal:return"Steal 30% Luck";case D.kj.AllStatsSteal:return"Steal 30% All Stats";case D.kj.CounterSpell:return"Cancels out 1 enemy enchantment";case D.kj.SuperDexterity:return"+200% Dexterity, +50% Willpower/Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperWillpower:return"+200% Willpower, +50% Dexterity/Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperWisdom:return"+200% Wisdom, +50% Willpower/Dexterity, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperMelee:return"+250% Strength, Steal 80% Dexterity, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperCaster:return"+250% Intelligence, Steal 80% Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperMeleeVamp:return"+200% Strength, Steal 50% Dexterity/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperSorcVamp:return"+200% Intelligence, Steal 50% Wisdom/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperVamp:return"Leech 50% Constitution, Steal 80% Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperVampMelee:return"+150% Strength, Steal 60% Dexterity/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperVampSorc:return"+150% Intelligence, Steal 60% Wisdom/Constitution, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperBattleMage:return"+150% Strength/Intelligence, Steal 60% Dexterity/Wisdom, CounterSpell, Minus Armor, Bonus Armor";case D.kj.SuperAllStats:return"+100% All Stats, Leech 20% Constitution, CounterSpell, Minus Armor, Bonus Armor";default:return"???"}}function Ht(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Nt(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Ht(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ht(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(e){var n=function(){a()},t=e.event.message,i=Nt((0,D.PF)(),2),a=i[0],o=i[1].loading;return(0,r.jsx)(m.Z,{children:(0,r.jsxs)(Fe.Z,{open:!0,onClose:n,"aria-labelledby":"quest-event-title","aria-describedby":"quest-event-description",children:[(0,r.jsx)(Qe.Z,{id:"quest-event-title",children:"Quest Event"}),(0,r.jsx)($e.Z,{children:(0,r.jsx)(qe.Z,{id:"quest-event-description",children:t&&t.map((function(e,n){return(0,r.jsx)(d.Z,{children:e},"".concat(n))}))})}),(0,r.jsx)(Te.Z,{children:(0,r.jsx)(k.Z,{variant:"contained",color:"error",onClick:n,disabled:o,children:"Continue"})})]})})}var Yt=t(7358),Kt=t(8895),Jt=t(2797),Vt=t(3508),_t=t(888),Xt=t(8304);function er(e){var n,t,a,o,s,u=e.quest,h=(0,i.useState)(!1),m=(h[0],h[1],(0,D.QT)({variables:(null===u||void 0===u||null===(n=u.lastEvent)||void 0===n?void 0:n.quest)?{quest:null===u||void 0===u||null===(t=u.lastEvent)||void 0===t?void 0:t.quest}:void 0,skip:!(null===u||void 0===u||null===(a=u.lastEvent)||void 0===a?void 0:a.quest)})),f=m.data,x=m.loading;if(!(null===u||void 0===u||null===(o=u.lastEvent)||void 0===o?void 0:o.quest)||x||!f)return(0,r.jsx)("div",{});var p=f.quest,v=u.progress||1;return v=Math.log2(v),(0,r.jsxs)(Yt.Z,{children:[(0,r.jsx)(Kt.Z,{expandIcon:(0,r.jsx)(Vt.Z,{}),children:(0,r.jsxs)(Ne.Z,{direction:"row",sx:{width:"100%"},spacing:1,children:[u.finished&&(0,r.jsx)(_t.Z,{}),!u.finished&&(0,r.jsx)(Xt.Z,{}),(0,r.jsxs)(Ne.Z,{sx:{width:"100%"},children:[(0,r.jsx)(d.Z,{sx:{lineHeight:3},children:(0,F.qh)(p.id)}),(0,r.jsx)(c.Z,{variant:"determinate",color:u.finished?"success":"secondary",value:u.finished?100:100*v/(v+1)})]})]})}),(0,r.jsxs)(Jt.Z,{children:[(0,r.jsx)(d.Z,{children:p.description}),(null===(s=u.lastEvent)||void 0===s?void 0:s.message)&&(0,r.jsxs)(l.Z,{sx:{bgcolor:"warning.light",color:"warning.contrast",margin:2,padding:2},children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Last event:"}),u.lastEvent.message.map((function(e,n){return(0,r.jsx)(d.Z,{sx:{fontStyle:"italic"},children:e},"".concat(n))}))]})]})]})}function nr(){var e=B();if(!e)return null;var n=e.questLog;e.currentQuest;return 2===Object.values(n).filter((function(e){return!!e})).length?(0,r.jsx)(l.Z,{children:"You have not yet started any quests. Explore the world and grow stronger."}):(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h4",children:"Quest Log"}),(0,r.jsx)("br",{}),Object.values(n).filter((function(e){return!!e&&"string"!==typeof e})).sort((function(e,n){return e.finished?n.finished?n.progress-e.progress:1:n.finished?-1:n.progress-e.progress})).map((function(e){return e&&"string"!==typeof e?(0,r.jsx)(er,{quest:e},e.id):null}))]})}function tr(e,n){return"".concat((Math.round(e/n*1e3)/10).toLocaleString(),"%")}function rr(e){var n=e.stats;return(0,r.jsx)(l.Z,{children:(0,r.jsxs)(h.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Strength"}),": ",n.stats.strength.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Dexterity"}),": ",n.stats.dexterity.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Constitution"}),": ",n.stats.constitution.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Intelligence"}),": ",n.stats.intelligence.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Wisdom"}),": ",n.stats.wisdom.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Willpower"}),": ",n.stats.willpower.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Luck"}),": ",n.stats.luck.toLocaleString()]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Armor"}),": ",tr(n.damageReduction-1,1)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Damage"}),":"," ",tr(n.damageAmplification-1,1)]}),(0,r.jsx)(h.ZP,{item:!0,xs:6,children:(0,r.jsx)(h.ZP,{})}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Strength"}),":"," ",tr(n.enemyStats.strength-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Dexterity"}),":"," ",tr(n.enemyStats.dexterity-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Constitution"}),":"," ",tr(n.enemyStats.constitution-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Intelligence"}),":"," ",tr(n.enemyStats.intelligence-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Wisdom"}),":"," ",tr(n.enemyStats.wisdom-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Willpower"}),":"," ",tr(n.enemyStats.willpower-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Luck"}),":"," ",tr(n.enemyStats.luck-1e6,1e6)]}),(0,r.jsxs)(h.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Armor Reduction"}),":"," ",tr(n.armorReduction-1,1)]})]})})}function ir(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ar(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function or(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ar(a,r,i,o,l,"next",e)}function l(e){ar(a,r,i,o,l,"throw",e)}o(void 0)}))}}function lr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ir(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ir(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sr(e){var n=e.hero,t=lr((0,D.w3)(),1)[0],a=(0,i.useState)(n.settings.autoDust),o=a[0],l=a[1];function s(){return(s=or(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({variables:{value:o}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(h.ZP,{item:!0,xs:2,children:"Auto dust equipment at or below this level:"}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(q.Z,{value:o,onChange:function(e){return function(e){var n=Math.round(Number(e));!isNaN(n)&&Number.isFinite(n)&&l(n)}(e.target.value)}})}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(k.Z,{onClick:function(){return s.apply(this,arguments)},children:"Save"})})]})}function cr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ur(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return cr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return cr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var dr={attackingAccuracy:"Attacking Accuracy",attackingDamage:"Attacking Damage",castingAccuracy:"Casting Accuracy",castingDamage:"Casting Damage",vitality:"Vitality"};function hr(e){var n=e.hero,t=(0,i.useState)(n.skillPercent),a=t[0],o=t[1],l=ur((0,D.Xx)(),2),s=l[0],c=l[1].loading,u=ur((0,D.hv)(),2),h=u[0],m=u[1].loading;return(0,r.jsxs)("div",{children:[(0,r.jsx)(d.Z,{variant:"h4",children:"Skills"}),(0,r.jsx)(d.Z,{sx:{mb:1},children:"Select which skill you would like to improve, as well as how much of your incoming experience you would like to devote to skills."}),(0,r.jsxs)(P.Z,{sx:{mb:5},children:[(0,r.jsx)(I.Z,{id:"active-skill-select-label",children:"Active Skill"}),(0,r.jsx)(T.Z,{labelId:"active-skill-select-label",id:"active-skill-select",value:n.activeSkill,label:"Active Skill",disabled:c,onChange:function(e){return s({variables:{skill:e.target.value}})},children:Object.values(D.lq).map((function(e){return(0,r.jsx)($.Z,{value:e,children:dr[e]},e)}))})]}),(0,r.jsxs)(P.Z,{fullWidth:!0,children:[(0,r.jsx)(Kn.ZP,{value:a,step:1,getAriaValueText:function(e){return"".concat(e,"%")},onChange:function(e,n){return!Array.isArray(n)&&o(n)},"aria-label":"Percent experience towards skills",valueLabelDisplay:"on",disabled:m}),(0,r.jsx)(k.Z,{disabled:m,onClick:function(){return h({variables:{percent:a}})},children:"Save Percent"})]})]})}function mr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function fr(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function xr(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){fr(a,r,i,o,l,"next",e)}function l(e){fr(a,r,i,o,l,"throw",e)}o(void 0)}))}}function pr(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return mr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vr(e){var n,t=e.hero,a=e.stat,o=(0,i.useState)(null!==(n=t.settings.minimumStats[a])&&void 0!==n?n:10),l=o[0],s=o[1],c=pr((0,D.Rw)(),1)[0];function u(){return(u=xr(b().mark((function e(n){var t;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Number(n),!isNaN(t)&&Number.isFinite(t)){e.next=3;break}return e.abrupt("return");case 3:t=Math.max(1,Math.min(2e9,t)),s(t);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return(d=xr(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({variables:{name:a,value:l}});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(h.ZP,{item:!0,xs:2,children:["".concat(a.substr(0,1).toUpperCase()).concat(a.substr(1)),":"]}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(q.Z,{value:l,onChange:function(e){return function(e){return u.apply(this,arguments)}(e.target.value)}})}),(0,r.jsx)(h.ZP,{item:!0,xs:2,children:(0,r.jsx)(k.Z,{onClick:function(){return d.apply(this,arguments)},children:"Save"})})]})}function yr(){var e=B();return e?(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(d.Z,{variant:"h2",children:"Settings"}),(0,r.jsx)(d.Z,{variant:"subtitle2",sx:{mb:1},children:"Configure your mysterious automation"}),(0,r.jsx)(hr,{hero:e}),(0,r.jsx)(d.Z,{variant:"h5",children:"Minimum Stats"}),(0,r.jsx)(d.Z,{variant:"subtitle2",children:"Prevents transfering from lowering your stats below these values..."}),(0,r.jsxs)(h.ZP,{container:!0,columns:6,children:[(0,r.jsx)(vr,{hero:e,stat:"strength"}),(0,r.jsx)(vr,{hero:e,stat:"dexterity"}),(0,r.jsx)(vr,{hero:e,stat:"constitution"}),(0,r.jsx)(vr,{hero:e,stat:"intelligence"}),(0,r.jsx)(vr,{hero:e,stat:"wisdom"}),(0,r.jsx)(vr,{hero:e,stat:"willpower"}),(0,r.jsx)(vr,{hero:e,stat:"luck"})]}),(0,r.jsx)(sr,{hero:e})]}):(0,r.jsx)("div",{})}function gr(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function br(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return gr(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return gr(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var jr=(0,o.default)((function(){return t.e(729).then(t.bind(t,1729))}),{loadableGenerated:{webpack:function(){return[1729]}}});function Zr(){var e,n,t,o,g,b,j=(0,a.useRouter)(),Z=j.route.split("/").pop(),S=br((0,je.d)(),2),w=S[0],k=(S[1],(0,D.UE)()),A=k.data,C=k.loading,P=k.error,I=(0,i.useState)(null!==Z&&void 0!==Z?Z:"play"),E=I[0],M=I[1],W=(0,D.Wg)({pollInterval:3e4}).data,L=null!==(g=null===A||void 0===A||null===(e=A.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==g?g:null,O=null!==(b=null===A||void 0===A||null===(t=A.me)||void 0===t||null===(o=t.account)||void 0===o?void 0:o.access)&&void 0!==b?b:null;if((0,i.useEffect)((function(){!P&&w||j.push("/?auth=".concat(j.asPath))}),[P,w]),P||!w)return(0,r.jsx)(y.A,{children:(0,r.jsxs)(m.Z,{children:[(0,r.jsx)("br",{}),"Redirecting..."]})});if(C)return(0,r.jsx)(y.A,{children:(0,r.jsx)(m.Z,{children:C&&(0,r.jsx)(c.Z,{})})});var B=!!(null===L||void 0===L?void 0:L.inventory.find((function(e){return(0,F.r_)(e.baseItem)})));return(0,r.jsx)(y.A,{showHero:!0,children:(0,r.jsxs)(m.Z,{children:[(0,r.jsxs)(i.Fragment,{children:[L&&L.attributePoints>0&&(0,r.jsx)(et,{}),L&&L.currentQuest&&(0,r.jsx)(zt,{event:L.currentQuest})]}),(0,r.jsxs)(l.Z,{sx:{width:"100%",typography:"body1"},children:[(0,r.jsxs)(x.ZP,{value:E,children:[(0,r.jsx)(l.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(p.Z,{onChange:function(e,n){"play"===n?j.push("/play","/play",{scroll:!1}):j.push("/play/".concat(n),"/play/".concat(n),{scroll:!1}),M(n)},"aria-label":"navigation tabs",variant:"scrollable",children:[(0,r.jsx)(u.Z,{label:"Welcome",value:"play"}),(0,r.jsx)(u.Z,{label:"Combat",value:"combat"}),!(!(null===L||void 0===L?void 0:L.inventory.length)&&!(null===L||void 0===L?void 0:L.gold))&&(0,r.jsx)(u.Z,{label:"Shop",value:"shop"}),!!(null===L||void 0===L?void 0:L.inventory.length)&&(0,r.jsx)(u.Z,{label:"Inventory",value:"inventory"}),(0,r.jsx)(u.Z,{label:"Map",value:"map"}),L&&Object.values(L.questLog).filter((function(e){return!!e})).length>2&&(0,r.jsx)(u.Z,{label:"Quests",value:"quests"}),B&&(0,r.jsx)(u.Z,{label:"Settings",value:"settings"}),O===D.Ks.Admin&&(0,r.jsx)(u.Z,{label:"Admin",value:"admin"})]})}),(0,r.jsx)(v.Z,{value:"play",children:(0,r.jsxs)(h.ZP,{container:!0,columns:12,spacing:4,children:[(0,r.jsxs)(h.ZP,{item:!0,xs:12,sm:7,md:8,children:[(0,r.jsxs)(d.Z,{variant:"h5",sx:{mb:2},children:["Welcome to ",(0,r.jsx)("b",{children:"Proof of Combat"}),"!"]}),(0,r.jsx)(d.Z,{sx:{mb:2},children:"This game is under very active development, so except things to change often and for new features and content to appear on a near daily basis."}),(0,r.jsxs)(d.Z,{sx:{mb:2},children:["If you'd like to talk more with other players, report bugs, or discuss upcoming features,"," ",(0,r.jsx)(f.Z,{underline:"hover",href:"https://discord.gg/t7AZSxvfJG",target:"_blank",rel:"noreferrer",children:"join the discord!"})]}),(0,r.jsxs)(d.Z,{sx:{mb:2},children:["If you need help finding things,"," ",(0,r.jsx)(f.Z,{underline:"hover",href:"https://github.com/chrisinajar/proofofcombat/wiki/",target:"_blank",rel:"noreferrer",children:"check the wiki"})]}),(0,r.jsx)(d.Z,{variant:"h5",sx:{mb:2},children:"Combat Stats"}),(null===L||void 0===L?void 0:L.combatStats)&&(0,r.jsx)(rr,{stats:L.combatStats})]}),(null===W||void 0===W?void 0:W.leaderboard)&&(0,r.jsxs)(h.ZP,{item:!0,xs:12,sm:5,md:4,children:[(0,r.jsx)(d.Z,{variant:"h6",children:"Top levels:"}),(0,r.jsx)("ul",{id:"leaderboard-list",children:W.leaderboard.slice(0,20).map((function(e,n){return(0,r.jsxs)("li",{id:"leaderboard-list-".concat(n),children:[(0,r.jsx)("b",{id:"leaderboard-list-".concat(n,"-name"),children:e.name})," ",e.level.toLocaleString()," (",(0,F.qh)(e.class),")"]},e.id)}))})]})]})}),(0,r.jsxs)(v.Z,{value:"combat",children:[(0,r.jsx)(d.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,r.jsx)("br",{}),(0,r.jsx)(be,{})]}),(0,r.jsx)(v.Z,{value:"shop",children:(0,r.jsx)(dt,{})}),(0,r.jsx)(v.Z,{value:"inventory",children:(0,r.jsx)(Ut,{})}),(0,r.jsx)(v.Z,{value:"map",children:(0,r.jsx)(Nn,{})}),(0,r.jsx)(v.Z,{value:"quests",children:(0,r.jsx)(nr,{})}),(0,r.jsx)(v.Z,{value:"settings",children:(0,r.jsx)(yr,{})}),(0,r.jsx)(v.Z,{value:"admin",children:(0,r.jsx)(jr,{})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(s.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(_,{})]})]})})}}}]);