"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5],{1005:function(e,n,t){t.r(n),t.d(n,{default:function(){return Te}});var r=t(5893),i=t(7294),a=t(1163),o=t(7357),l=t(7720),s=t(1458),c=t(44),u=t(5861),d=t(5670),h=t(7225),f=t(5050),m=t(1320),x=t(4051),p=t.n(x),v=t(1157),y=t(8445),g=t(1903),b=t(9402);function j(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Z(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function A(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Z(a,r,i,o,l,"next",e)}function l(e){Z(a,r,i,o,l,"throw",e)}o(void 0)}))}}function w(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return j(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return j(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k="https://chrisinajar.com:5000/";function S(){var e,n,t=function(e){return e.trim()},a=(0,b.TX)().data,l=(0,i.useState)([]),s=l[0],c=l[1],u=(0,i.useState)(!1),d=u[0],h=u[1],f=(0,i.useState)(""),m=f[0],x=f[1],j=(0,i.useRef)();(0,i.useEffect)((function(){var e;if(!j.current&&(null===a||void 0===a||null===(e=a.chat)||void 0===e?void 0:e.token))return j.current=(0,v.io)(k,{withCredentials:!0,auth:{token:a.chat.token}}),j.current.on("hello",(function(e){c(e.chat)})),j.current.on("chat",(function(e){console.log("Got chat event!",e),c((function(n){return[e].concat(w(n))}))})),function(){j.current&&(j.current.disconnect(),j.current=void 0)}}),[null===a||void 0===a||null===(e=a.chat)||void 0===e?void 0:e.token]);var Z=t(m);function S(){return(S=A(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===n.key&&j.current){e.next=2;break}return e.abrupt("return");case 2:j.current.emit("chat",{message:m},(function(e){console.log("Got a reply!",e),c((function(n){return[e].concat(w(n))}))})),x("");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(g.Z,{fullWidth:!0,disabled:!(null===(n=j.current)||void 0===n?void 0:n.connected),value:m,name:"Chat input",label:d?"Max message: ".concat(Z.length,"/").concat(140):"Type here...",placeholder:"Type here...",onChange:function(e){var n=e.target.value;t(n).length<=140&&x(n)},onFocus:function(){return h(!0)},onBlur:function(){return h(!1)},autoComplete:"off",onKeyPress:function(e){return S.apply(this,arguments)}}),(0,r.jsx)(o.Z,{sx:{backgroundColor:"primary.light",padding:1,minHeight:"600px"},children:s.map((function(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:e.from})," ",(0,y.emojify)(e.message)]},e.id)}))}),(0,r.jsx)("br",{})]})}var P=t(3321),C=t(6886),I=t(4054),$=t(3841),E=t(5645),W=t(3599),H=t(8456);function M(){var e,n,t,r=(0,b.UE)().data;return null!==(t=null===r||void 0===r||null===(e=r.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:void 0}var L=t(9835),F=t(6893),O=t(1292),T=t(5499),q=t(5585),K=t(8698),B=t(7600),R=t(5826);function U(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function G(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function z(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){G(a,r,i,o,l,"next",e)}function l(e){G(a,r,i,o,l,"throw",e)}o(void 0)}))}}function N(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return U(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return U(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e){var n=e.fight,t=n.id,a=n.monster,o=e.onVictory,l=e.onError,s=N((0,b.zC)(),2),c=s[0],d=s[1],h=d.data,f=(d.loading,null===h||void 0===h?void 0:h.fight);function m(e){return x.apply(this,arguments)}function x(){return(x=z(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Trying to fight",n),e.prev=1,e.next=4,c({variables:{monster:t,attackType:n}});case 4:e.sent,o&&o(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),l&&l(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(C.ZP,{id:"combat-display",style:{minHeight:"110px"},item:!0,xs:6,children:[(0,r.jsxs)(C.ZP,{container:!0,columns:6,children:[(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(F.Z,{title:"Attack using your strength",children:(0,r.jsx)(P.Z,{id:"attack-with-melee",onClick:function(){return m(b.hK.Melee)},"aria-label":"melee attack",startIcon:(0,r.jsx)(O.Z,{}),children:"Melee attack"})})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(F.Z,{title:"Attack using your dexterity",children:(0,r.jsx)(P.Z,{id:"attack-with-ranged",onClick:function(){return m(b.hK.Ranged)},"aria-label":"ranged attack",startIcon:(0,r.jsx)(T.Z,{}),children:"Ranged attack"})})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(F.Z,{title:"Attack using your intelligence",children:(0,r.jsx)(P.Z,{id:"attack-with-wizard",onClick:function(){return m(b.hK.Wizard)},"aria-label":"conjuration spell",startIcon:(0,r.jsx)(K.Z,{}),children:"Conjuration Spell"})})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(F.Z,{title:"Attack using your wisdon",children:(0,r.jsx)(P.Z,{id:"attack-with-elemental",onClick:function(){return m(b.hK.Elemental)},"aria-label":"elemental spell",startIcon:(0,r.jsx)(q.Z,{}),children:"Elemental Spell"})})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(F.Z,{title:"Attack using your charisma",children:(0,r.jsx)(P.Z,{id:"attack-with-holy",onClick:function(){return m(b.hK.Holy)},"aria-label":"holy attack",startIcon:(0,r.jsx)(B.Z,{}),children:"Holy attack"})})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(F.Z,{title:"Attack using your constitution",children:(0,r.jsx)(P.Z,{id:"attack-with-blood",onClick:function(){return m(b.hK.Blood)},"aria-label":"blood magic",startIcon:(0,r.jsx)(R.Z,{}),children:"Blood magic"})})})]}),f&&f.log.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)("b",{children:e.from})," ".concat(Q(e.attackType,e.success,e.critical)," "),(0,r.jsx)("b",{children:e.to}),e.success?" for ".concat(e.damage," damage!"):"."]})},e.from)})),f&&f.victory&&(0,r.jsxs)(u.Z,{children:[a.name," has been killed!",f.experience&&" You gain ".concat(f.experience," experience! "),f.didLevel&&(0,r.jsx)("b",{children:"You leveled up!!"})]})]})})}function Q(e,n,t){switch(e){case b.hK.Blood:return n?t?"surges with blood magic against":"lets blood and casts forth towards":"attempts to cast a spell against";case b.hK.Holy:return n?t?"summons powers beyond this world against":"smites":"attempts to smite";case b.hK.Elemental:return n?t?"creates an elemental storm around":"casts an elemental spell at":"attempts to cast a spell against";case b.hK.Wizard:return n?t?"carefully casts a spell at":"blasts a beam of necrotic energy into":"attempts to cast a spell against";case b.hK.Ranged:return n?t?"lands a sneak attack from the shadows, critically damaging":"fires an arrow at":"shoots an arrow but it misses";case b.hK.Melee:default:return n?t?"lands a crippling blow against":"struck":"missed"}}function _(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function D(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function V(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){D(a,r,i,o,l,"next",e)}function l(e){D(a,r,i,o,l,"throw",e)}o(void 0)}))}}function X(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||ee(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ee(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,n){if(e){if("string"===typeof e)return _(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_(e,n):void 0}}var ne="Select a monster to challenge",te="Fight a monster!";function re(){var e,n,t=(0,i.useState)(null),a=t[0],o=t[1],l=X((0,L.g)(),2),s=l[0],c=l[1],d=(0,i.useState)(""),h=d[0],f=d[1],m=(0,i.useState)(""),x=m[0],v=m[1],y=(0,b.Of)(),g=y.data,j=y.loading,Z=(y.error,y.refetch),A=X((0,b.Ht)(),1)[0],w=X((0,b.hL)(),2),k=w[0],S=w[1].loading,F=(0,b.pL)(),O=F.data,T=F.refetch,q=(null===O||void 0===O?void 0:O.challenges)||[],K=M();function B(){return(B=V(p().mark((function e(){var n,t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&c(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function R(){return(R=V(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=null===g||void 0===g?void 0:g.monsters.find((function(e){return e.id===x})),o(null!==n&&void 0!==n?n:null);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return(U=V(p().mark((function e(){var n,t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,A({variables:{monster:h}});case 4:(null===(t=e.sent.data)||void 0===t||null===(n=t.challenge)||void 0===n?void 0:n.id)&&v(null===t||void 0===t||null===(r=t.challenge)||void 0===r?void 0:r.id),Z(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),Z();case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){T()}),[null===K||void 0===K?void 0:K.location.x,null===K||void 0===K?void 0:K.location.y,null===K||void 0===K?void 0:K.location.map]),(0,i.useEffect)((function(){var e;(null===g||void 0===g||null===(e=g.monsters)||void 0===e?void 0:e.length)&&(""===x?v(g.monsters[0].id):g.monsters.find((function(e){return e.id===x}))||v(g.monsters[0].id))}),[x,null===g||void 0===g||null===(e=g.monsters)||void 0===e?void 0:e.length]),(null===g||void 0===g||null===(n=g.monsters)||void 0===n?void 0:n.find((function(e){return e.id===x})))||(x=""),(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(C.ZP,{container:!0,columns:6,spacing:4,children:[a&&(0,r.jsx)(Y,{fight:a,onVictory:function(){return Z()},onError:function(){Z(),o(null)}}),K&&K.combat.health>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(C.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)($.Z,{id:"challenge-monster-select-label",children:ne}),(0,r.jsx)(E.Z,{id:"challenge-select",labelId:"challenge-monster-select-label",value:h,label:ne,onChange:function(e){return f(e.target.value)},children:q.map((function(e){return(0,r.jsx)(W.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(P.Z,{id:"challenge-button",disabled:!h||s>0||S,onClick:function(){return U.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,r.jsx)(C.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)($.Z,{id:"fight-monster-select-label",children:te}),(0,r.jsx)(E.Z,{id:"fight-select",labelId:"fight-monster-select-label",value:x,label:te,onChange:function(e){return v(e.target.value)},children:(null===g||void 0===g?void 0:g.monsters)&&J(null===g||void 0===g?void 0:g.monsters).sort((function(e,n){return e.monster.level-n.monster.level})).map((function(e){return(0,r.jsx)(W.Z,{value:e.id,children:e.monster.name},e.id)}))}),j&&(0,r.jsx)(H.Z,{}),(0,r.jsx)(P.Z,{id:"fight-button",disabled:!x||s>0||S,onClick:function(){return R.apply(this,arguments)},variant:"contained",children:"Fight!"})]})})]}),K&&K.combat.health<=0&&(0,r.jsx)(C.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(u.Z,{id:"you-are-dead",children:"You are dead."})}),(0,r.jsx)(C.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(P.Z,{id:"heal-button",fullWidth:!0,onClick:function(){return B.apply(this,arguments)},variant:"contained",disabled:s>0||S,children:"Heal"})})]})})}var ie=t(9692),ae=[16,16],oe=[128,96],le=16;function se(){var e=M();if(!e)return null;var n=e.location,t=[Math.round(Math.min(oe[0]-ae[0]/2,Math.max(0,n.x-ae[0]/2))),Math.round(Math.min(oe[1]-ae[1]/2,Math.max(0,n.y-ae[1]/2)))];return console.log({location:n,centerPoint:t}),(0,r.jsx)("div",{style:{position:"relative",display:"inline-block",backgroundImage:"url(/maps/default.jpg)",backgroundPosition:"-".concat(t[0]*le,"px -").concat(t[1]*le,"px"),width:"".concat(ae[0]*le,"px"),height:"".concat(ae[1]*le,"px")},children:(0,r.jsx)("div",{style:{position:"absolute",borderRadius:"".concat(2.5,"px"),opacity:.8,backgroundColor:"blue",border:"1px solid black",left:"".concat((n.x-t[0])*le+5.5,"px"),top:"".concat((n.y-t[1])*le+5.5,"px"),width:"".concat(5,"px"),height:"".concat(5,"px")}})})}function ce(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ue(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function de(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ue(a,r,i,o,l,"next",e)}function l(e){ue(a,r,i,o,l,"throw",e)}o(void 0)}))}}function he(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ce(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ce(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(){var e=M(),n=he((0,L.g)(),2),t=n[0],a=n[1],o=he((0,b.gK)(),2),l=o[0],s=o[1].loading;if(!e)return null;function c(e){return d.apply(this,arguments)}function d(){return(d=de(p().mark((function e(n){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({variables:{direction:n}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(r=t.extensions)||void 0===r?void 0:r.delay)&&a(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(C.ZP,{container:!0,columns:2,spacing:3,children:[(0,r.jsx)(C.ZP,{item:!0,xs:2,sm:1,children:(0,r.jsxs)(C.ZP,{container:!0,columns:6,spacing:3,children:[(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:(0,r.jsx)(u.Z,{children:"Use buttons to move around the map."})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(b.p$.North)},children:"North"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(b.p$.West)},children:"West"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsxs)(u.Z,{children:[e.location.x,", ",e.location.y]})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(b.p$.East)},children:"East"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(b.p$.South)},children:"South"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2})]})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,sm:1,children:(0,r.jsx)(se,{})})]})})}var me,xe=t(7948);function pe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ve(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function ye(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){ve(a,r,i,o,l,"next",e)}function l(e){ve(a,r,i,o,l,"throw",e)}o(void 0)}))}}function ge(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return pe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return pe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(){var e=ge((0,L.g)(),1)[0],n=ge((0,b.Y4)(),2),t=n[0],a=n[1].loading;function s(e){return c.apply(this,arguments)}function c(){return(c=ye(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Leveling up...",n),e.next=3,t({variables:{attribute:b.GC[n]}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(o.Z,{sx:{backgroundColor:"secondary.light"},children:[(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{variant:"h5",align:"center",children:"You have leveled up!"}),(0,r.jsx)(xe.Z,{children:(0,r.jsx)(u.Z,{align:"center",children:"Each of your attributes has a chance to increase by 1 when you level up, this chance is increased by Luck. You may also choose one attribute to increase."})}),(0,r.jsx)("br",{}),(0,r.jsxs)(C.ZP,{container:!0,columns:14,spacing:2,children:[(0,r.jsx)(F.Z,{title:"Strength helps you with melee attacks",children:(0,r.jsx)(C.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-strength",disabled:a||e>0,onClick:function(){return s("Strength")},variant:"contained",children:"Strength"})})})}),(0,r.jsx)(F.Z,{title:"Dexterity helps you with ranged attacks and with defending against both ranged attacks and elemental spells",children:(0,r.jsx)(C.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-dexterity",disabled:a||e>0,onClick:function(){return s("Dexterity")},variant:"contained",children:"Dexterity"})})})}),(0,r.jsx)(F.Z,{title:"Constitution determines your max health, is used in both attack and defending blood magic, and also helps defend against melee attacks",children:(0,r.jsx)(C.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-constitution",disabled:a||e>0,onClick:function(){return s("Constitution")},variant:"contained",children:"Constitution"})})})}),(0,r.jsx)(F.Z,{title:"Intelligence is used to conjure wizard spells as well as to defend against holy sells",children:(0,r.jsx)(C.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-intelligence",disabled:a||e>0,onClick:function(){return s("Intelligence")},variant:"contained",children:"Intelligence"})})})}),(0,r.jsx)(F.Z,{title:"Wisdom helps you cast elemental spells, as well as defending against wizard spells",children:(0,r.jsx)(C.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-wisdom",disabled:a||e>0,onClick:function(){return s("Wisdom")},variant:"contained",children:"Wisdom"})})})}),(0,r.jsx)(F.Z,{title:"Charisma is used by holy warriors to attack",children:(0,r.jsx)(C.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-charisma",disabled:a||e>0,onClick:function(){return s("Charisma")},variant:"contained",children:"Charisma"})})})}),(0,r.jsx)(F.Z,{title:"Luck helps your odds in most random rolls the game makes",children:(0,r.jsx)(C.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(P.Z,{id:"level-up-luck",disabled:a||e>0,onClick:function(){return s("Luck")},variant:"contained",children:"Luck"})})})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(l.Z,{})]})}function je(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ze(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function Ae(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Ze(a,r,i,o,l,"next",e)}function l(e){Ze(a,r,i,o,l,"throw",e)}o(void 0)}))}}function we(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function ke(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return je(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return je(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Se=(we(me={},b.$7.MeleeWeapon,"Melee Weapon"),we(me,b.$7.RangedWeapon,"Ranged Weapon"),we(me,b.$7.Shield,"Shield"),we(me,b.$7.BodyArmor,"Body Armor"),we(me,b.$7.HandArmor,"Gauntlets"),we(me,b.$7.LegArmor,"Leggings"),we(me,b.$7.HeadArmor,"Helmet"),we(me,b.$7.FootArmor,"Greaves"),me);function Pe(e){var n;return null!==(n=Se[e])&&void 0!==n?n:e.replace(/(?=[A-Z])(?<=[a-z])/g," ")}function Ce(e){var n=e.type,t=e.items,a=e.onChange,o=M(),l=(0,i.useState)(""),s=l[0],c=l[1],u=Pe(n),d="".concat(u," Shop");return o?(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)($.Z,{id:"".concat(n,"-shop-select-label"),children:d}),(0,r.jsx)(E.Z,{id:"".concat(n,"-shop-select"),labelId:"".concat(n,"-shop-select-label"),value:s,label:d,onChange:function(e){c(e.target.value),a&&a(e.target.value)},children:t.map((function(e){return(0,r.jsxs)(W.Z,{value:e.id,disabled:!e.cost||e.cost>o.gold,children:[e.cost&&"".concat(e.name,": ").concat(e.cost.toLocaleString()," Gold"),!e.cost&&e.name]},e.id)}))})]}):null}function Ie(){var e,n=ke((0,L.g)(),1)[0],t=(0,i.useState)(null),a=t[0],o=t[1],s=(0,i.useState)(""),c=s[0],d=s[1],h=(0,b.Cb)(),f=h.data,m=(h.loading,h.error,ke((0,b.Nn)(),2)),x=m[0],v=m[1].loading;function y(){return(y=Ae(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,x({variables:{baseItem:a}});case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,null,[[2,7]])})))).apply(this,arguments)}var g="Choose which shop to visit",j=null===f||void 0===f||null===(e=f.shopItems)||void 0===e?void 0:e.find((function(e){return e.id===a}));return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(u.Z,{align:"center",children:["Welcome to the shop! You can buy and sell* any non-enchanted items here.",(0,r.jsx)("br",{})]}),(0,r.jsx)("br",{}),(0,r.jsx)(l.Z,{}),(0,r.jsx)("br",{}),(0,r.jsxs)(C.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)($.Z,{id:"shop-type-select-label",children:g}),(0,r.jsxs)(E.Z,{id:"shop-type-select",labelId:"shop-type-select-label",value:c,label:g,onChange:function(e){d(e.target.value),o(null)},children:[(0,r.jsxs)(W.Z,{value:b.$7.MeleeWeapon,children:[Pe(b.$7.MeleeWeapon)," Shop"]}),(0,r.jsxs)(W.Z,{value:b.$7.RangedWeapon,children:[Pe(b.$7.RangedWeapon)," Shop"]}),(0,r.jsxs)(W.Z,{value:b.$7.Shield,children:[Pe(b.$7.Shield)," Shop"]}),(0,r.jsxs)(W.Z,{value:b.$7.BodyArmor,children:[Pe(b.$7.BodyArmor)," Shop"]}),(0,r.jsxs)(W.Z,{value:b.$7.HandArmor,children:[Pe(b.$7.HandArmor)," Shop"]}),(0,r.jsxs)(W.Z,{value:b.$7.LegArmor,children:[Pe(b.$7.LegArmor)," Shop"]}),(0,r.jsxs)(W.Z,{value:b.$7.HeadArmor,children:[Pe(b.$7.HeadArmor)," Shop"]}),(0,r.jsxs)(W.Z,{value:b.$7.FootArmor,children:[Pe(b.$7.FootArmor)," Shop"]})]})]})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:""!==c&&(0,r.jsx)(Ce,{type:c,items:function(e){var n;return(null===f||void 0===f||null===(n=f.shopItems)||void 0===n?void 0:n.length)?f.shopItems.filter((function(n){return n.type===e})):[]}(c),onChange:function(e){return o(e)}},c)}),(0,r.jsx)(C.ZP,{item:!0,xs:6,children:j&&(0,r.jsxs)(P.Z,{variant:"contained",color:"success",fullWidth:!0,disabled:v||n>0,onClick:function(){return y.apply(this,arguments)},children:["Buy ",j.name," for ",j.cost," gold"]})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,children:(0,r.jsxs)(u.Z,{align:"center",children:["* coming soon!...",(0,r.jsx)("br",{})]})})]}),(0,r.jsx)("br",{})]})}function $e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ee(e,n,t,r,i,a,o){try{var l=e[a](o),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function We(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var a=e.apply(n,t);function o(e){Ee(a,r,i,o,l,"next",e)}function l(e){Ee(a,r,i,o,l,"throw",e)}o(void 0)}))}}function He(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return $e(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $e(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e){var n,t=e.hero,a=e.slot,o=e.label,l=e.onEquip,s=e.disabled,c=null===(n=t.equipment[a])||void 0===n?void 0:n.id,u=["leftHand","rightHand","bodyArmor","handArmor","legArmor","headArmor","footArmor"].filter((function(e){return t.equipment[e]&&e!==a})).map((function(e){var n;return null===(n=t.equipment[e])||void 0===n?void 0:n.id})),d=(0,i.useState)(c||""),h=(d[0],d[1]),f=t.inventory.filter((function(e){return function(e,n){switch(e){case"rightHand":case"leftHand":return n.type===b.$7.MeleeWeapon||n.type===b.$7.RangedWeapon||n.type===b.$7.Shield||n.type===b.$7.SpellFocus;case"bodyArmor":return n.type===b.$7.BodyArmor;case"handArmor":return n.type===b.$7.HandArmor;case"legArmor":return n.type===b.$7.LegArmor;case"headArmor":return n.type===b.$7.HeadArmor;case"footArmor":return n.type===b.$7.FootArmor;default:return!1}}(a,e)}));return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)($.Z,{id:"".concat(a,"-equip-select-label"),children:o}),(0,r.jsx)(E.Z,{id:"".concat(a,"-equip-select"),labelId:"".concat(a,"-equip-select-label"),value:c||"",label:o,disabled:s,onChange:function(e){h(e.target.value),l(a,e.target.value)},children:f.map((function(e){return(0,r.jsx)(W.Z,{value:e.id,disabled:u.indexOf(e.id)>=0,children:e.id===c?(0,r.jsx)("b",{children:e.name}):e.name},e.id)}))})]})})})}function Le(){var e=He((0,L.g)(),1)[0],n=He((0,b.aP)(),2),t=n[0],a=n[1].loading,o=M(),l=a||e>0;if(!o)return null;function s(e,n){return c.apply(this,arguments)}function c(){return(c=We(p().mark((function e(n,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{item:r,slot:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(C.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(C.ZP,{item:!0,xs:6,children:(0,r.jsx)(u.Z,{children:"Equipped items"})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Me,{hero:o,slot:"leftHand",label:"Left Hand",onEquip:s,disabled:l})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Me,{hero:o,slot:"rightHand",label:"Right Hand",onEquip:s,disabled:l})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Me,{hero:o,slot:"bodyArmor",label:"Body Armor",onEquip:s,disabled:l})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Me,{hero:o,slot:"handArmor",label:"Gauntlets",onEquip:s,disabled:l})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Me,{hero:o,slot:"legArmor",label:"Leggings",onEquip:s,disabled:l})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Me,{hero:o,slot:"headArmor",label:"Helmets",onEquip:s,disabled:l})}),(0,r.jsx)(C.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Me,{hero:o,slot:"footArmor",label:"Greaves",onEquip:s,disabled:l})})]})})}function Fe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Oe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,a=[],o=!0,l=!1;try{for(t=t.call(e);!(o=(r=t.next()).done)&&(a.push(r.value),!n||a.length!==n);o=!0);}catch(s){l=!0,i=s}finally{try{o||null==t.return||t.return()}finally{if(l)throw i}}return a}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Fe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Fe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(){var e,n,t,x=(0,a.useRouter)(),p=Oe((0,ie.d)(),2),v=p[0],y=(p[1],(0,b.UE)()),g=y.data,j=y.loading,Z=y.error,A=(0,i.useState)("1"),w=A[0],k=A[1],P=null!==(t=null===g||void 0===g||null===(e=g.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:null;return Z||!v?(x.push("/?auth=".concat(x.asPath)),(0,r.jsxs)(m.A,{children:[(0,r.jsx)("br",{}),"Redirecting..."]})):j?(0,r.jsx)(m.A,{children:j&&(0,r.jsx)(s.Z,{})}):(0,r.jsxs)(m.A,{showHero:!0,children:[(0,r.jsx)(i.Fragment,{children:P&&P.attributePoints>0&&(0,r.jsx)(be,{})}),(0,r.jsxs)(o.Z,{sx:{width:"100%",typography:"body1"},children:[(0,r.jsxs)(d.ZP,{value:w,children:[(0,r.jsx)(o.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(h.Z,{onChange:function(e,n){k(n)},"aria-label":"navigation tabs",children:[(0,r.jsx)(c.Z,{label:"Welcome / News",value:"1"}),(0,r.jsx)(c.Z,{label:"Combat",value:"2"}),(0,r.jsx)(c.Z,{label:"Shop",value:"3"}),(0,r.jsx)(c.Z,{label:"Inventory",value:"4"}),(0,r.jsx)(c.Z,{label:"Map",value:"5"})]})}),(0,r.jsxs)(f.Z,{value:"1",children:[(0,r.jsx)(u.Z,{children:"Welcome to the game! I'm updating things extremely regularly, so check back often and refresh often. Use the tabs above to navigate around."}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:"There are now 6 different types of combat available, each uses a different primary attribute to determine hit chance and damage. Additionally, each type of attack has its own unique benefits!"}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:"The map is fully functional! Be sure to travel around before travel gets harder..."})]}),(0,r.jsxs)(f.Z,{value:"2",children:[(0,r.jsx)(u.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,r.jsx)("br",{}),(0,r.jsx)(re,{})]}),(0,r.jsx)(f.Z,{value:"3",children:(0,r.jsx)(Ie,{})}),(0,r.jsx)(f.Z,{value:"4",children:(0,r.jsx)(Le,{})}),(0,r.jsx)(f.Z,{value:"5",children:(0,r.jsx)(fe,{})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(l.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(S,{})]})]})}}}]);