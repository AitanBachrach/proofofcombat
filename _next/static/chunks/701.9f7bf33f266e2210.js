"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[701],{1701:function(n,t,r){r.r(t),r.d(t,{default:function(){return _}});var e=r(5893),a=r(7294),o=r(1163),i=r(1458),u=r(2192),l=r(4051),c=r.n(l),s=r(1157),f=r(8445),d=r(5449),h=r(7357),v=r(9402);function p(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function m(n,t,r,e,a,o,i){try{var u=n[o](i),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(e,a)}function y(n){return function(){var t=this,r=arguments;return new Promise((function(e,a){var o=n.apply(t,r);function i(n){m(o,e,a,i,u,"next",n)}function u(n){m(o,e,a,i,u,"throw",n)}i(void 0)}))}}function x(n){return function(n){if(Array.isArray(n))return p(n)}(n)||function(n){if("undefined"!==typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(!n)return;if("string"===typeof n)return p(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(n,t)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var b="https://chrisinajar.com:5000/";function g(){var n,t,r=function(n){return n.trim()},o=(0,v.TX)().data,i=(0,a.useState)([]),u=i[0],l=i[1],p=(0,a.useState)(!1),m=p[0],g=p[1],j=(0,a.useState)(""),w=j[0],k=j[1],A=(0,a.useRef)();(0,a.useEffect)((function(){var n;if(!A.current&&(null===o||void 0===o||null===(n=o.chat)||void 0===n?void 0:n.token))return A.current=(0,s.io)(b,{withCredentials:!0,auth:{token:o.chat.token}}),A.current.on("hello",(function(n){l(n.chat)})),A.current.on("chat",(function(n){console.log("Got chat event!",n),l((function(t){return[n].concat(x(t))}))})),function(){A.current&&(A.current.disconnect(),A.current=void 0)}}),[null===o||void 0===o||null===(n=o.chat)||void 0===n?void 0:n.token]);var S=r(w);function Z(){return(Z=y(c().mark((function n(t){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("Enter"===t.key&&A.current){n.next=2;break}return n.abrupt("return");case 2:A.current.emit("chat",{message:w},(function(n){console.log("Got a reply!",n),l((function(t){return[n].concat(x(t))}))})),k("");case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return(0,e.jsxs)(a.Fragment,{children:[(0,e.jsx)(d.Z,{fullWidth:!0,disabled:!(null===(t=A.current)||void 0===t?void 0:t.connected),value:w,name:"Chat input",label:m?"Max message: ".concat(S.length,"/").concat(140):"Type here...",placeholder:"Type here...",onChange:function(n){var t=n.target.value;r(t).length<=140&&k(t)},onFocus:function(){return g(!0)},onBlur:function(){return g(!1)},autoComplete:"off",onKeyPress:function(n){return Z.apply(this,arguments)}}),(0,e.jsx)(h.Z,{sx:{backgroundColor:"primary.light",padding:1,minHeight:"600px"},children:u.map((function(n){return(0,e.jsxs)("div",{children:[(0,e.jsx)("b",{children:n.from})," ",(0,f.emojify)(n.message)]},n.id)}))}),(0,e.jsx)("br",{})]})}var j=r(3321),w=r(6886),k=r(913),A=r(3841),S=r(5696),Z=r(3599),C=r(5861),I=r(8456);function P(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function E(n,t,r,e,a,o,i){try{var u=n[o](i),l=u.value}catch(c){return void r(c)}u.done?t(l):Promise.resolve(l).then(e,a)}function O(n){return function(){var t=this,r=arguments;return new Promise((function(e,a){var o=n.apply(t,r);function i(n){E(o,e,a,i,u,"next",n)}function u(n){E(o,e,a,i,u,"throw",n)}i(void 0)}))}}function F(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,a,o=[],i=!0,u=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(o.push(e.value),!t||o.length!==t);i=!0);}catch(l){u=!0,a=l}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return P(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var T="Select a monster to challenge",U="Fight a monster!";function H(){var n=(0,a.useState)(""),t=n[0],r=n[1],o=(0,a.useState)(""),i=o[0],u=o[1],l=(0,v.Of)(),s=l.data,f=l.loading,d=(l.error,l.refetch),h=F((0,v.zC)(),2),p=h[0],m=(h[1],F((0,v.Ht)(),1)[0]),y=F((0,v.hL)(),1)[0],x=function(){var n,t,r,e=(0,v.UE)().data;return null!==(r=null===e||void 0===e||null===(n=e.me)||void 0===n||null===(t=n.account)||void 0===t?void 0:t.hero)&&void 0!==r?r:void 0}();function b(){return(b=O(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,y();case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),n,null,[[0,5]])})))).apply(this,arguments)}function g(){return(g=O(c().mark((function n(){var t,r;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=4,p({variables:{monster:i}});case 4:r=n.sent,(null===(t=r.data)||void 0===t?void 0:t.fight.victory)&&(u(""),d()),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),d();case 11:case"end":return n.stop()}}),n,null,[[0,8]])})))).apply(this,arguments)}function P(){return(P=O(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,m({variables:{monster:t}});case 3:d(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),d();case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))).apply(this,arguments)}return(0,e.jsx)(a.Fragment,{children:(0,e.jsxs)(w.ZP,{container:!0,columns:6,spacing:4,children:[x&&x.combat.health>0&&(0,e.jsxs)(a.Fragment,{children:[(0,e.jsx)(w.ZP,{item:!0,md:3,xs:6,children:(0,e.jsxs)(k.Z,{fullWidth:!0,children:[(0,e.jsx)(A.Z,{id:"challenge-monster-select-label",children:T}),(0,e.jsx)(S.Z,{labelId:"challenge-monster-select-label",value:t,label:T,onChange:function(n){return r(n.target.value)},children:(0,e.jsx)(Z.Z,{value:"rat",children:"Rat"})}),(0,e.jsx)(j.Z,{disabled:!t,onClick:function(){return P.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,e.jsx)(w.ZP,{item:!0,md:3,xs:6,children:(0,e.jsxs)(k.Z,{fullWidth:!0,children:[(0,e.jsx)(A.Z,{id:"fight-monster-select-label",children:U}),(0,e.jsx)(S.Z,{labelId:"fight-monster-select-label",value:i,label:U,onChange:function(n){return u(n.target.value)},children:(null===s||void 0===s?void 0:s.monsters)&&(null===s||void 0===s?void 0:s.monsters.map((function(n){return(0,e.jsx)(Z.Z,{value:n.id,children:n.monster.name},n.id)})))}),f&&(0,e.jsx)(I.Z,{}),(0,e.jsx)(j.Z,{disabled:!i,onClick:function(){return g.apply(this,arguments)},variant:"contained",children:"Fight!"})]})})]}),x&&x.combat.health<=0&&(0,e.jsx)(w.ZP,{item:!0,lg:3,xs:6,children:(0,e.jsx)(C.Z,{children:"You are dead."})}),(0,e.jsx)(w.ZP,{item:!0,lg:3,xs:6,children:(0,e.jsx)(j.Z,{fullWidth:!0,onClick:function(){return b.apply(this,arguments)},variant:"contained",children:"Heal"})})]})})}var M=r(9692);function R(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function W(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,a,o=[],i=!0,u=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(o.push(e.value),!t||o.length!==t);i=!0);}catch(l){u=!0,a=l}finally{try{i||null==r.return||r.return()}finally{if(u)throw a}}return o}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return R(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return R(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(){var n=(0,o.useRouter)(),t=W((0,M.d)(),2),r=t[0],a=(t[1],(0,v.UE)()),l=(a.data,a.loading);return a.error||!r?(n.push("/?auth=".concat(n.asPath)),(0,e.jsxs)(u.A,{children:[(0,e.jsx)("br",{}),"Redirecting..."]})):l?(0,e.jsx)(u.A,{children:l&&(0,e.jsx)(i.Z,{})}):(0,e.jsxs)(u.A,{showHero:!0,children:[(0,e.jsx)("br",{}),"You are logged in!",(0,e.jsx)("br",{}),"I am actively adding new features to this kind of constantly.",(0,e.jsx)("br",{}),(0,e.jsx)("br",{}),(0,e.jsx)(H,{}),(0,e.jsx)("br",{}),(0,e.jsx)(g,{})]})}}}]);