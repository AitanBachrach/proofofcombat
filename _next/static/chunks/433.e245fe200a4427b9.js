"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[433],{7433:function(e,n,t){t.r(n),t.d(n,{default:function(){return ne}});var r=t(5893),i=t(7294),o=t(1163),a=t(7357),l=t(7720),s=t(1458),c=t(44),u=t(5861),d=t(5670),h=t(7225),f=t(5050),m=t(1320),v=t(4051),x=t.n(v),p=t(1157),y=t(8445),g=t(5449),j=t(9402);function b(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Z(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function w(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){Z(o,r,i,a,l,"next",e)}function l(e){Z(o,r,i,a,l,"throw",e)}a(void 0)}))}}function A(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return b(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var k="https://chrisinajar.com:5000/";function S(){var e,n,t=function(e){return e.trim()},o=(0,j.TX)().data,l=(0,i.useState)([]),s=l[0],c=l[1],u=(0,i.useState)(!1),d=u[0],h=u[1],f=(0,i.useState)(""),m=f[0],v=f[1],b=(0,i.useRef)();(0,i.useEffect)((function(){var e;if(!b.current&&(null===o||void 0===o||null===(e=o.chat)||void 0===e?void 0:e.token))return b.current=(0,p.io)(k,{withCredentials:!0,auth:{token:o.chat.token}}),b.current.on("hello",(function(e){c(e.chat)})),b.current.on("chat",(function(e){console.log("Got chat event!",e),c((function(n){return[e].concat(A(n))}))})),function(){b.current&&(b.current.disconnect(),b.current=void 0)}}),[null===o||void 0===o||null===(e=o.chat)||void 0===e?void 0:e.token]);var Z=t(m);function S(){return(S=w(x().mark((function e(n){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===n.key&&b.current){e.next=2;break}return e.abrupt("return");case 2:b.current.emit("chat",{message:m},(function(e){console.log("Got a reply!",e),c((function(n){return[e].concat(A(n))}))})),v("");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(g.Z,{fullWidth:!0,disabled:!(null===(n=b.current)||void 0===n?void 0:n.connected),value:m,name:"Chat input",label:d?"Max message: ".concat(Z.length,"/").concat(140):"Type here...",placeholder:"Type here...",onChange:function(e){var n=e.target.value;t(n).length<=140&&v(n)},onFocus:function(){return h(!0)},onBlur:function(){return h(!1)},autoComplete:"off",onKeyPress:function(e){return S.apply(this,arguments)}}),(0,r.jsx)(a.Z,{sx:{backgroundColor:"primary.light",padding:1,minHeight:"600px"},children:s.map((function(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:e.from})," ",(0,y.emojify)(e.message)]},e.id)}))}),(0,r.jsx)("br",{})]})}var P=t(3321),C=t(6886),E=t(913),I=t(3841),L=t(2382),F=t(3599),O=t(8456);function T(){var e,n,t,r=(0,j.UE)().data;return null!==(t=null===r||void 0===r||null===(e=r.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:void 0}var U=t(9835);function W(e,n){if(e===j.hK.Melee)return n?"struck":"missed"}function $(e){var n=e.fight,t=n.monster.monster;return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(C.ZP,{style:{minHeight:"110px"},item:!0,xs:6,children:[n.log.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)("b",{children:e.from})," ".concat(W(e.attackType,e.success)," "),(0,r.jsx)("b",{children:e.to}),e.success?" for ".concat(e.damage," damage!"):"."]})},e.from)})),n.victory&&(0,r.jsxs)(u.Z,{children:[t.name," has been killed!",n.experience&&" You gain ".concat(n.experience," experience! "),n.didLevel&&(0,r.jsx)("b",{children:"You leveled up!!"})]})]})})}function M(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function H(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function N(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){H(o,r,i,a,l,"next",e)}function l(e){H(o,r,i,a,l,"throw",e)}a(void 0)}))}}function Q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||R(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e){return function(e){if(Array.isArray(e))return M(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,n){if(e){if("string"===typeof e)return M(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?M(e,n):void 0}}var _="Select a monster to challenge",K="Fight a monster!";function B(){var e,n=Q((0,U.g)(),2),t=n[0],o=n[1],a=(0,i.useState)(""),l=a[0],s=a[1],c=(0,i.useState)(""),d=c[0],h=c[1],f=(0,j.Of)(),m=f.data,v=f.loading,p=(f.error,f.refetch),y=Q((0,j.zC)(),2),g=y[0],b=y[1],Z=b.data,w=b.loading,A=Q((0,j.Ht)(),1)[0],k=Q((0,j.hL)(),2),S=k[0],W=k[1].loading,M=(0,j.pL)(),H=M.data,R=M.refetch,B=(null===H||void 0===H?void 0:H.challenges)||[],G=T();function z(){return(z=N(x().mark((function e(){var n,t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&o(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function V(){return(V=N(x().mark((function e(){var n,t;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,g({variables:{monster:d}});case 4:t=e.sent,(null===(n=t.data)||void 0===n?void 0:n.fight.victory)&&(h(""),p()),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),p();case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function X(){return(X=N(x().mark((function e(){return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A({variables:{monster:l}});case 3:p(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),p();case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){R()}),[null===G||void 0===G?void 0:G.location.x,null===G||void 0===G?void 0:G.location.y,null===G||void 0===G?void 0:G.location.map]),(0,i.useEffect)((function(){var e;(null===m||void 0===m||null===(e=m.monsters)||void 0===e?void 0:e.length)&&(""===d?h(m.monsters[0].id):m.monsters.find((function(e){return e.id===d}))||h(m.monsters[0].id))}),[d,null===m||void 0===m||null===(e=m.monsters)||void 0===e?void 0:e.length]),(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(C.ZP,{container:!0,columns:6,spacing:4,children:[w&&(0,r.jsx)(C.ZP,{item:!0,xs:6,style:{minHeight:"110px"},children:(0,r.jsx)(u.Z,{children:"Loading combat..."})}),Z&&(0,r.jsx)($,{fight:Z.fight}),G&&G.combat.health>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(C.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(E.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"challenge-monster-select-label",children:_}),(0,r.jsx)(L.Z,{labelId:"challenge-monster-select-label",value:l,label:_,onChange:function(e){return s(e.target.value)},children:B.map((function(e){return(0,r.jsx)(F.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(P.Z,{disabled:!l||t>0||w||W,onClick:function(){return X.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,r.jsx)(C.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(E.Z,{fullWidth:!0,children:[(0,r.jsx)(I.Z,{id:"fight-monster-select-label",children:K}),(0,r.jsx)(L.Z,{labelId:"fight-monster-select-label",value:d,label:K,onChange:function(e){return h(e.target.value)},children:(null===m||void 0===m?void 0:m.monsters)&&Y(null===m||void 0===m?void 0:m.monsters).sort((function(e,n){return e.monster.level-n.monster.level})).map((function(e){return(0,r.jsx)(F.Z,{value:e.id,children:e.monster.name},e.id)}))}),v&&(0,r.jsx)(O.Z,{}),(0,r.jsx)(P.Z,{disabled:!d||t>0||w||W,onClick:function(){return V.apply(this,arguments)},variant:"contained",children:"Fight!"})]})})]}),G&&G.combat.health<=0&&(0,r.jsx)(C.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(u.Z,{children:"You are dead."})}),(0,r.jsx)(C.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(P.Z,{fullWidth:!0,onClick:function(){return z.apply(this,arguments)},variant:"contained",disabled:t>0||w||W,children:"Heal"})})]})})}var G=t(9692);function z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function V(e,n,t,r,i,o,a){try{var l=e[o](a),s=l.value}catch(c){return void t(c)}l.done?n(s):Promise.resolve(s).then(r,i)}function X(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var o=e.apply(n,t);function a(e){V(o,r,i,a,l,"next",e)}function l(e){V(o,r,i,a,l,"throw",e)}a(void 0)}))}}function q(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return z(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(){var e=T(),n=q((0,U.g)(),2),t=n[0],o=n[1],a=q((0,j.gK)(),2),l=a[0],s=a[1].loading;if(!e)return null;function c(e){return d.apply(this,arguments)}function d(){return(d=X(x().mark((function e(n){var t,r;return x().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l({variables:{direction:n}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(r=t.extensions)||void 0===r?void 0:r.delay)&&o(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)(C.ZP,{container:!0,columns:2,children:(0,r.jsx)(C.ZP,{item:!0,xs:2,sm:1,children:(0,r.jsxs)(C.ZP,{container:!0,columns:6,spacing:3,children:[(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:(0,r.jsx)(u.Z,{children:"Use buttons to move around the map."})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(j.p$.North)},children:"North"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(j.p$.West)},children:"West"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsxs)(u.Z,{children:[e.location.x,", ",e.location.y]})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(j.p$.East)},children:"East"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(P.Z,{disabled:s||t>0,variant:"contained",onClick:function(){return c(j.p$.South)},children:"South"})}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(C.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:(0,r.jsx)(u.Z,{children:"(Visual map coming very soon)"})})]})})})})}function J(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ee(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,o=[],a=!0,l=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(s){l=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(l)throw i}}return o}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return J(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(){var e=(0,o.useRouter)(),n=ee((0,G.d)(),2),t=n[0],v=(n[1],(0,j.UE)()),x=(v.data,v.loading),p=v.error,y=(0,i.useState)("1"),g=y[0],b=y[1];return p||!t?(e.push("/?auth=".concat(e.asPath)),(0,r.jsxs)(m.A,{children:[(0,r.jsx)("br",{}),"Redirecting..."]})):x?(0,r.jsx)(m.A,{children:x&&(0,r.jsx)(s.Z,{})}):(0,r.jsx)(m.A,{showHero:!0,children:(0,r.jsxs)(a.Z,{sx:{width:"100%",typography:"body1"},children:[(0,r.jsxs)(d.ZP,{value:g,children:[(0,r.jsx)(a.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(h.Z,{onChange:function(e,n){b(n)},"aria-label":"navigation tabs",children:[(0,r.jsx)(c.Z,{label:"Welcome / News",value:"1"}),(0,r.jsx)(c.Z,{label:"Combat",value:"2"}),(0,r.jsx)(c.Z,{label:"Map",value:"3"})]})}),(0,r.jsxs)(f.Z,{value:"1",children:[(0,r.jsx)(u.Z,{children:"Welcome to the game! I'm updating things extremely regularly, so check back often and refresh often. Use the tabs above to navigate around."}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:"You may now use the locations tab to move to different locations on the map. A visual map is coming soon, as well as locations around the map with various features. Right now locations are useful for getting away from other players who are killing the monsters you're trying to level up off of."}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:"You can find chat below, it keeps the last 50 messages, or since the server last restarted. Emoji's are fully supported and encouraged."})]}),(0,r.jsxs)(f.Z,{value:"2",children:[(0,r.jsx)(u.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,r.jsx)("br",{}),(0,r.jsx)(B,{})]}),(0,r.jsx)(f.Z,{value:"3",children:(0,r.jsx)(D,{})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(l.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(S,{})]})})}}}]);