"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[330],{2330:function(e,n,t){t.r(n),t.d(n,{default:function(){return on}});var r=t(5893),i=t(7294),l=t(1163),a=t(7357),o=t(7720),s=t(1458),c=t(44),u=t(5861),d=t(6886),h=t(5670),m=t(7225),f=t(5050),x=t(142),v=t(4051),p=t.n(v),g=t(1157),j=t(8445),y=t(5739),b=t(1903),Z=t(9402);function k(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function S(e,n,t,r,i,l,a){try{var o=e[l](a),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,i)}function A(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function a(e){S(l,r,i,a,o,"next",e)}function o(e){S(l,r,i,a,o,"throw",e)}a(void 0)}))}}function w(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return k(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return k(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var P="https://chrisinajar.com:5000/";function C(){var e,n,t=function(e){return e.trim()},l=(0,Z.TX)().data,o=(0,i.useState)([]),s=o[0],c=o[1],d=(0,i.useState)(!1),h=d[0],m=d[1],f=(0,i.useState)(""),x=f[0],v=f[1],k=(0,i.useRef)();(0,i.useEffect)((function(){var e;if(!k.current&&(null===l||void 0===l||null===(e=l.chat)||void 0===e?void 0:e.token))return k.current=(0,g.io)(P,{withCredentials:!0,auth:{token:l.chat.token}}),k.current.on("hello",(function(e){c(e.chat)})),k.current.on("chat",(function(e){console.log("Got chat event!",e),c((function(n){return[e].concat(w(n))}))})),k.current.on("system-message",(function(e){c((function(n){return[{id:Math.random(),message:e.message,from:"",color:e.color,variant:"h6"}].concat(w(n))}))})),function(){k.current&&(k.current.disconnect(),k.current=void 0)}}),[null===l||void 0===l||null===(e=l.chat)||void 0===e?void 0:e.token]);var S=t(x);function C(){return(C=A(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("Enter"===n.key&&k.current){e.next=2;break}return e.abrupt("return");case 2:k.current.emit("chat",{message:x},(function(e){console.log("Got a reply!",e),c((function(n){return[e].concat(w(n))}))})),v("");case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(b.Z,{fullWidth:!0,disabled:!(null===(n=k.current)||void 0===n?void 0:n.connected),value:x,name:"Chat input",label:h?"Max message: ".concat(S.length,"/").concat(140):"Type here...",placeholder:"Type here...",onChange:function(e){var n=e.target.value;t(n).length<=140&&v(n)},onFocus:function(){return m(!0)},onBlur:function(){return m(!1)},autoComplete:"off",onKeyPress:function(e){return C.apply(this,arguments)}}),(0,r.jsx)(a.Z,{sx:{padding:1,minHeight:"600px",bgcolor:"primary.light"},children:s.map((function(e){return(0,r.jsxs)(u.Z,{variant:e.variant||"body1",sx:{color:"".concat(e.color||"text",".dark")},children:[e.time&&(0,r.jsxs)(u.Z,{variant:"caption",children:["(",(0,y.S)(new Date(1e3*e.time)),")\xa0"]}),(0,r.jsx)("b",{children:e.from})," ",(0,j.emojify)(e.message)]},e.id)}))}),(0,r.jsx)("br",{})]})}var E=t(3321),I=t(4054),M=t(3841),$=t(5645),L=t(3599),W=t(8456);function F(){var e,n,t,r=(0,Z.UE)().data;return null!==(t=null===r||void 0===r||null===(e=r.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:void 0}var q,B=t(9835),H=t(6893),O=t(1292),T=t(5499),D=t(5585),R=t(8698),Q=t(7600),U=t(5826);function K(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}var G=(K(q={},Z.kj.BonusStrength,"Giant's Strength"),K(q,Z.kj.BonusDexterity,"Incredible Speed"),K(q,Z.kj.BonusConstitution,"Sturdiness"),K(q,Z.kj.BonusIntelligence,"Intellect"),K(q,Z.kj.BonusWisdom,"Incredible Will"),K(q,Z.kj.BonusCharisma,"The Bard"),K(q,Z.kj.BonusLuck,"The Gambler"),K(q,Z.kj.BonusPhysical,"Physical Superiority"),K(q,Z.kj.BonusMental,"Mental Superiority"),K(q,Z.kj.BonusAllStats,"Absolute Power"),K(q,Z.kj.Vampire,"The Vampire"),K(q,Z.kj.MinusEnemyArmor,"Armor Piercing"),K(q,Z.kj.BonusArmor,"Deflection"),K(q,Z.kj.MinusEnemyStrength,"Crippling Strength"),K(q,Z.kj.MinusEnemyDexterity,"Frost"),K(q,Z.kj.MinusEnemyConstitution,"Mortality"),K(q,Z.kj.MinusEnemyIntelligence,"Stupification"),K(q,Z.kj.MinusEnemyWisdom,"The Feeble Minded"),K(q,Z.kj.MinusEnemyCharisma,"Truth"),K(q,Z.kj.MinusEnemyPhysical,"Physical Destruction"),K(q,Z.kj.MinusEnemyMental,"Mental Destruction"),K(q,Z.kj.MinusEnemyAllStats,"Complete Oppression"),K(q,Z.kj.FishermansStrength,"Quest Reward"),K(q,Z.kj.FishermansDexterity,"Quest Reward"),K(q,Z.kj.FishermansConstitution,"Quest Reward"),K(q,Z.kj.FishermansIntelligence,"Quest Reward"),K(q,Z.kj.FishermansWisdom,"Quest Reward"),K(q,Z.kj.FishermansCharisma,"Quest Reward"),K(q,Z.kj.FishermansLuck,"Quest Reward"),q);function Y(e){return e.enchantment?(n=e.name,t=e.enchantment,"".concat(n," of ").concat(G[t])):e.name;var n,t}function z(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function N(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function _(e,n,t,r,i,l,a){try{var o=e[l](a),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,i)}function V(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function a(e){_(l,r,i,a,o,"next",e)}function o(e){_(l,r,i,a,o,"throw",e)}a(void 0)}))}}function X(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return N(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return N(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e){var n=e.fight,t=n.id,l=n.monster,a=e.onVictory,o=e.onError,c=X((0,Z.zC)(),2),h=c[0],m=c[1],f=m.data,x=m.loading,v=(0,i.useState)(100),g=v[0],j=v[1],y=null===f||void 0===f?void 0:f.fight;function b(e){return k.apply(this,arguments)}function k(){return(k=V(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Trying to fight",n),e.prev=1,e.next=4,h({variables:{monster:t,attackType:n}});case 4:e.sent,a&&a(),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),o&&o(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}return(0,i.useEffect)((function(){x||j(100*(y?y.monster.monster.combat.health:l.combat.health)/l.combat.maxHealth)}),[null===y||void 0===y?void 0:y.monster.monster.combat.health,null===y||void 0===y?void 0:y.monster.monster.combat.maxHealth,l.combat.maxHealth]),(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.ZP,{id:"combat-display",style:{minHeight:"110px"},item:!0,xs:6,children:[(0,r.jsxs)(d.ZP,{container:!0,columns:6,children:[(0,r.jsxs)(d.ZP,{item:!0,xs:6,children:[(0,r.jsxs)(u.Z,{variant:"h4",children:[g>0&&"Battling",g<=0&&"Dead"," ",l.name]}),(0,r.jsx)(s.Z,{variant:"determinate",value:g,color:"error"})]}),g>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(H.Z,{title:"Attack using your strength",children:(0,r.jsx)(E.Z,{id:"attack-with-melee",onClick:function(){return b(Z.hK.Melee)},"aria-label":"melee attack",startIcon:(0,r.jsx)(O.Z,{}),children:"Melee attack"})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(H.Z,{title:"Attack using your dexterity",children:(0,r.jsx)(E.Z,{id:"attack-with-ranged",onClick:function(){return b(Z.hK.Ranged)},"aria-label":"ranged attack",startIcon:(0,r.jsx)(T.Z,{}),children:"Ranged attack"})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(H.Z,{title:"Attack using your intelligence",children:(0,r.jsx)(E.Z,{id:"attack-with-wizard",onClick:function(){return b(Z.hK.Wizard)},"aria-label":"conjuration spell",startIcon:(0,r.jsx)(R.Z,{}),children:"Conjuration Spell"})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(H.Z,{title:"Attack using your wisdon",children:(0,r.jsx)(E.Z,{id:"attack-with-elemental",onClick:function(){return b(Z.hK.Elemental)},"aria-label":"elemental spell",startIcon:(0,r.jsx)(D.Z,{}),children:"Elemental Spell"})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(H.Z,{title:"Attack using your charisma",children:(0,r.jsx)(E.Z,{id:"attack-with-holy",onClick:function(){return b(Z.hK.Holy)},"aria-label":"holy attack",startIcon:(0,r.jsx)(Q.Z,{}),children:"Holy attack"})})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:1,children:(0,r.jsx)(H.Z,{title:"Attack using your constitution",children:(0,r.jsx)(E.Z,{id:"attack-with-blood",onClick:function(){return b(Z.hK.Blood)},"aria-label":"blood magic",startIcon:(0,r.jsx)(U.Z,{}),children:"Blood magic"})})})]})]}),y&&y.log.map((function(e){return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)("b",{children:e.from})," ".concat(ee(e.attackType,e.success,e.critical)," "),(0,r.jsx)("b",{children:e.to}),e.success?" for ".concat(e.damage.toLocaleString()," damage!"):"."]})},e.from)})),y&&y.victory&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(u.Z,{id:"fight-did-win",children:[l.name," has been killed!",(y.experience||y.gold)&&" You gain ",y.gold&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-gold",children:y.gold.toLocaleString()})," ","gold"]}),y.gold&&y.experience&&" and",y.experience&&(0,r.jsxs)(i.Fragment,{children:[" ",(0,r.jsx)("span",{id:"fight-recap-experience",children:y.experience.toLocaleString()})," ","experience"]}),(y.experience||y.gold)&&"!! ",y.didLevel&&(0,r.jsx)("b",{id:"fight-level-up",children:"You leveled up!!"})]}),y.drop&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)("br",{}),(0,r.jsxs)(u.Z,{id:"fight-got-drop",variant:"h5",children:["You find an enchanted item on the monster's corpse!",(0,r.jsx)("br",{}),Y(y.drop)]})]})]})]})})}function ee(e,n,t){switch(e){case Z.hK.Blood:return n?t?"surges with blood magic against":"lets blood and casts forth towards":"attempts to cast a spell against";case Z.hK.Holy:return n?t?"summons powers beyond this world against":"smites":"attempts to smite";case Z.hK.Elemental:return n?t?"creates an elemental storm around":"casts an elemental spell at":"attempts to cast a spell against";case Z.hK.Wizard:return n?t?"carefully casts a spell at":"blasts a beam of necrotic energy into":"attempts to cast a spell against";case Z.hK.Ranged:return n?t?"lands a sneak attack from the shadows, critically damaging":"fires an arrow at":"shoots an arrow but it misses";case Z.hK.Melee:default:return n?t?"lands a crippling blow against":"struck":"missed"}}function ne(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function te(e,n,t,r,i,l,a){try{var o=e[l](a),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,i)}function re(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function a(e){te(l,r,i,a,o,"next",e)}function o(e){te(l,r,i,a,o,"throw",e)}a(void 0)}))}}function ie(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||ae(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,n){if(e){if("string"===typeof e)return ne(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ne(e,n):void 0}}var oe="Select a new monster to challenge",se="Fight an existing monster!";function ce(){var e,n,t,l=(0,i.useState)(0),a=l[0],o=l[1],s=(0,i.useState)(null),c=s[0],h=s[1],m=ie((0,B.g)(),2),f=m[0],x=m[1],v=(0,i.useState)(""),g=v[0],j=v[1],y=(0,i.useState)(""),b=y[0],k=y[1],S=(0,Z.Of)(),A=S.data,w=S.loading,P=(S.error,S.refetch),C=ie((0,Z.Ht)(),1)[0],q=ie((0,Z.hL)(),2),H=q[0],O=q[1].loading,T=(0,Z.pL)(),D=T.data,R=T.refetch,Q=(null===D||void 0===D?void 0:D.challenges)||[],U=F();function K(){return(K=re(p().mark((function e(){var n,t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,H();case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(n=e.t0.graphQLErrors[0])||void 0===n||null===(t=n.extensions)||void 0===t?void 0:t.delay)&&x(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}function G(){return(G=re(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null===A||void 0===A?void 0:A.monsters.find((function(e){return e.id===b})),h(b);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=re(p().mark((function e(){var n,t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=4,C({variables:{monster:g}});case 4:return t=e.sent.data,e.next=7,P();case 7:(null===t||void 0===t?void 0:t.challenge)&&h(t.challenge.id),(null===t||void 0===t||null===(n=t.challenge)||void 0===n?void 0:n.id)&&k(null===t||void 0===t||null===(r=t.challenge)||void 0===r?void 0:r.id),o(a+1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),P();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}(0,i.useEffect)((function(){R()}),[null===U||void 0===U?void 0:U.location.x,null===U||void 0===U?void 0:U.location.y,null===U||void 0===U?void 0:U.location.map]),(0,i.useEffect)((function(){var e;if(null===A||void 0===A||null===(e=A.monsters)||void 0===e?void 0:e.length){var n=A.monsters.concat().sort((function(e,n){return e.monster.level-n.monster.level}));if(""===b)k(n[0].id);else A.monsters.find((function(e){return e.id===b}))||k(n[0].id)}}),[b,null===A||void 0===A||null===(e=A.monsters)||void 0===e?void 0:e.length]);var z=null===A||void 0===A||null===(n=A.monsters)||void 0===n?void 0:n.find((function(e){return e.id===b}));z||(b="");var N=null===A||void 0===A||null===(t=A.monsters)||void 0===t?void 0:t.find((function(e){return e.id===c}));return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.ZP,{container:!0,columns:6,spacing:4,children:[U&&U.combat.health>0&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(d.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"challenge-monster-select-label",children:oe}),(0,r.jsx)($.Z,{id:"challenge-select",labelId:"challenge-monster-select-label",value:g,label:oe,onChange:function(e){return j(e.target.value)},children:Q.map((function(e){return(0,r.jsx)(L.Z,{value:e.id,children:e.name},e.id)}))}),(0,r.jsx)(E.Z,{id:"challenge-button",disabled:!g||f>0||O,onClick:function(){return Y.apply(this,arguments)},variant:"contained",children:"Challenge!"})]})}),(0,r.jsx)(d.ZP,{item:!0,md:3,xs:6,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"fight-monster-select-label",children:se}),(0,r.jsx)($.Z,{id:"fight-select",labelId:"fight-monster-select-label",value:b,label:se,onChange:function(e){return k(e.target.value)},children:(null===A||void 0===A?void 0:A.monsters)&&le(null===A||void 0===A?void 0:A.monsters).sort((function(e,n){return e.monster.level-n.monster.level})).map((function(e){return(0,r.jsxs)(L.Z,{value:e.id,disabled:0===e.monster.combat.health,children:[0===e.monster.combat.health&&"Dead ",e.monster.name]},e.id)}))}),w&&(0,r.jsx)(W.Z,{}),(0,r.jsx)(E.Z,{id:"fight-button",disabled:!b||f>0||O||z&&0===z.monster.combat.health,onClick:function(){return G.apply(this,arguments)},variant:"contained",children:"Fight!"})]})})]}),U&&U.combat.health<=0&&(0,r.jsx)(d.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(u.Z,{id:"you-are-dead",children:"You are dead."})}),N&&(0,r.jsx)(J,{fight:N,onError:function(){P(),h(null)}},"".concat(N.id,"-").concat(a)),(0,r.jsx)(d.ZP,{item:!0,lg:3,xs:6,children:(0,r.jsx)(E.Z,{id:"heal-button",fullWidth:!0,onClick:function(){return K.apply(this,arguments)},variant:"contained",disabled:f>0||O,children:"Heal"})})]})})}var ue=t(9692),de=[24,24],he=[128,96],me=16;function fe(){var e=F();if(!e)return null;var n=e.location,t=[Math.round(Math.min(he[0]-de[0]/2,Math.max(0,n.x-de[0]/2))),Math.round(Math.min(he[1]-de[1]/2,Math.max(0,n.y-de[1]/2)))];return(0,r.jsx)("div",{style:{position:"relative",display:"inline-block",backgroundImage:"url(/maps/default.jpg)",backgroundPosition:"-".concat(t[0]*me,"px -").concat(t[1]*me,"px"),width:"".concat(de[0]*me,"px"),height:"".concat(de[1]*me,"px")},children:(0,r.jsx)("div",{style:{position:"absolute",borderRadius:"".concat(4,"px"),backgroundColor:"red",border:"2px solid rgba(255,255,255,0.3)",left:"".concat((n.x-t[0])*me+4,"px"),top:"".concat((n.y-t[1])*me+4,"px"),width:"".concat(8,"px"),height:"".concat(8,"px")}})})}function xe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function ve(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||ge(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e){return function(e){if(Array.isArray(e))return xe(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,n){if(e){if("string"===typeof e)return xe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(t):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?xe(e,n):void 0}}function je(e){var n=e.location,t=function(e){return z(e.location,n.location)},l=ve((0,Z.L7)(),2),o=l[0],s=l[1].loading,c=(0,Z.dE)().data,d=(0,i.useState)(""),h=d[0],m=d[1],f="Choose a port to sail to";return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(u.Z,{variant:"h5",children:n.name}),(0,r.jsx)(u.Z,{children:"The wooden docks creak and sway with the water below."}),(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"sail-dock-select-label",children:f}),(0,r.jsx)($.Z,{id:"sail-select",labelId:"sail-dock-select-label",value:h,label:f,onChange:function(e){return m(e.target.value)},children:(null===c||void 0===c?void 0:c.docks)&&pe(null===c||void 0===c?void 0:c.docks).sort((function(e,n){return t(e)-t(n)})).map((function(e){return(0,r.jsxs)(L.Z,{value:e.name,disabled:e.name===n.name,children:[e.name,":"," ",e.name!==n.name&&(0,r.jsxs)(i.Fragment,{children:[(t=e,Math.round(12*z(t.location,n.location))).toLocaleString()," Gold"]}),e.name===n.name&&"Current location"]},e.name);var t}))}),(0,r.jsx)(E.Z,{onClick:function(){if(c){var e=c.docks.find((function(e){return e.name===h}));e&&o({variables:{x:e.location.x,y:e.location.y}})}},variant:"outlined",color:"success",disabled:!h.length||s,children:"Sail!"})]})]})}function ye(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function be(e,n,t,r,i,l,a){try{var o=e[l](a),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,i)}function Ze(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function a(e){be(l,r,i,a,o,"next",e)}function o(e){be(l,r,i,a,o,"throw",e)}a(void 0)}))}}function ke(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ye(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ye(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(){var e=F(),n=ke((0,B.g)(),2),t=n[0],l=n[1],a=ke((0,Z.gK)(),2),o=a[0],s=a[1].loading,c=(0,Z.W1)({variables:(null===e||void 0===e?void 0:e.location)?{location:{x:e.location.x,y:e.location.y,map:e.location.map}}:void 0,skip:!(null===e||void 0===e?void 0:e.location)}).data;if(!e)return null;var h=null===c||void 0===c?void 0:c.locationDetails,m=(null===h||void 0===h?void 0:h.specialLocations)||[],f=m.length?m[0]:null,x=s||0===e.combat.health||t>0;function v(e){return g.apply(this,arguments)}function g(){return(g=Ze(p().mark((function e(n){var t,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o({variables:{direction:n}});case 3:e.next=9;break;case 5:e.prev=5,e.t0=e.catch(0),e.t0.graphQLErrors&&(null===(t=e.t0.graphQLErrors[0])||void 0===t||null===(r=t.extensions)||void 0===r?void 0:r.delay)&&l(e.t0.graphQLErrors[0].extensions.remaining);case 9:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.ZP,{container:!0,columns:2,spacing:3,children:[(0,r.jsx)(d.ZP,{item:!0,xs:2,sm:1,children:(0,r.jsxs)(d.ZP,{container:!0,columns:6,spacing:3,children:[(0,r.jsxs)(d.ZP,{item:!0,style:{textAlign:"center"},xs:6,children:[e.combat.health>0&&(0,r.jsx)(u.Z,{children:"Use buttons to move around the map."}),0===e.combat.health&&(0,r.jsx)(u.Z,{variant:"h6",children:"You cannot move while dead. Heal yourself in the Combat tab."})]}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(E.Z,{disabled:x,variant:"contained",onClick:function(){return v(Z.p$.North)},children:"North"})}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(E.Z,{disabled:x,variant:"contained",onClick:function(){return v(Z.p$.West)},children:"West"})}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsxs)(u.Z,{children:[e.location.x,", ",e.location.y]})}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(E.Z,{disabled:x,variant:"contained",onClick:function(){return v(Z.p$.East)},children:"East"})}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(E.Z,{disabled:x,variant:"contained",onClick:function(){return v(Z.p$.South)},children:"South"})}),(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2})]})}),(0,r.jsxs)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2,sm:1,children:[f&&(0,r.jsx)(u.Z,{variant:"h6",children:f.name}),f&&(0,r.jsx)(u.Z,{variant:"subtitle2",children:f.type}),!f&&h&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(u.Z,{variant:"h6",children:"Wilderness"}),(0,r.jsx)(u.Z,{variant:"subtitle2",children:h.terrain.terrain})]}),!f&&!h&&(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(u.Z,{variant:"h6",children:"\xa0"}),(0,r.jsx)(u.Z,{variant:"subtitle2",children:"loading..."})]}),(0,r.jsx)(fe,{})]}),"dock"===(null===f||void 0===f?void 0:f.type)&&(0,r.jsx)(d.ZP,{item:!0,style:{textAlign:"center"},xs:2,children:(0,r.jsx)(je,{location:f})})]})})}var Ae,we=t(7948);function Pe(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Ce(e,n,t,r,i,l,a){try{var o=e[l](a),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,i)}function Ee(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function a(e){Ce(l,r,i,a,o,"next",e)}function o(e){Ce(l,r,i,a,o,"throw",e)}a(void 0)}))}}function Ie(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Pe(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Pe(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(){var e=Ie((0,B.g)(),1)[0],n=Ie((0,Z.Y4)(),2),t=n[0],l=n[1].loading;function s(e){return c.apply(this,arguments)}function c(){return(c=Ee(p().mark((function e(n){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Leveling up...",n),e.next=3,t({variables:{attribute:Z.GC[n]}});case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(a.Z,{sx:{backgroundColor:"secondary.light"},children:[(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{variant:"h5",align:"center",children:"You have leveled up!"}),(0,r.jsx)(we.Z,{children:(0,r.jsx)(u.Z,{align:"center",children:"Each of your attributes increases by 1 when you level up. You may also choose an attribute to further increase."})}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.ZP,{container:!0,columns:14,spacing:2,children:[(0,r.jsx)(H.Z,{title:"Strength helps you with melee attacks",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-strength",disabled:l||e>0,onClick:function(){return s("Strength")},variant:"contained",children:"Strength"})})})}),(0,r.jsx)(H.Z,{title:"Dexterity helps you with ranged attacks and with defending against both ranged attacks and elemental spells",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-dexterity",disabled:l||e>0,onClick:function(){return s("Dexterity")},variant:"contained",children:"Dexterity"})})})}),(0,r.jsx)(H.Z,{title:"Constitution determines your max health, is used in both attack and defending blood magic, and also helps defend against melee attacks",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-constitution",disabled:l||e>0,onClick:function(){return s("Constitution")},variant:"contained",children:"Constitution"})})})}),(0,r.jsx)(H.Z,{title:"Intelligence is used to conjure wizard spells as well as to defend against holy sells",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-intelligence",disabled:l||e>0,onClick:function(){return s("Intelligence")},variant:"contained",children:"Intelligence"})})})}),(0,r.jsx)(H.Z,{title:"Wisdom helps you cast elemental spells, as well as defending against wizard spells",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-wisdom",disabled:l||e>0,onClick:function(){return s("Wisdom")},variant:"contained",children:"Wisdom"})})})}),(0,r.jsx)(H.Z,{title:"Charisma is used by holy warriors to attack",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,sm:7,md:4,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-charisma",disabled:l||e>0,onClick:function(){return s("Charisma")},variant:"contained",children:"Charisma"})})})}),(0,r.jsx)(H.Z,{title:"Luck helps you critically strike foes and also affects item drop rates",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-luck",disabled:l||e>0,onClick:function(){return s("Luck")},variant:"contained",children:"Luck"})})})}),(0,r.jsx)(H.Z,{title:"Places 1 in every stat for a more well rounded character",children:(0,r.jsx)(d.ZP,{item:!0,xs:14,md:12,lg:2,children:(0,r.jsx)(u.Z,{align:"center",children:(0,r.jsx)(E.Z,{id:"level-up-all",disabled:l||e>0,onClick:function(){return s("All")},variant:"contained",children:"All"})})})})]}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{})]}),(0,r.jsx)(o.Z,{})]})}function $e(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Le(e,n,t,r,i,l,a){try{var o=e[l](a),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,i)}function We(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function a(e){Le(l,r,i,a,o,"next",e)}function o(e){Le(l,r,i,a,o,"throw",e)}a(void 0)}))}}function Fe(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function qe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return $e(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return $e(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Be=(Fe(Ae={},Z.$7.MeleeWeapon,"Melee Weapon"),Fe(Ae,Z.$7.RangedWeapon,"Ranged Weapon"),Fe(Ae,Z.$7.SpellFocus,"Spell Focus"),Fe(Ae,Z.$7.Shield,"Shield"),Fe(Ae,Z.$7.BodyArmor,"Body Armor"),Fe(Ae,Z.$7.HandArmor,"Gauntlets"),Fe(Ae,Z.$7.LegArmor,"Leggings"),Fe(Ae,Z.$7.HeadArmor,"Helmet"),Fe(Ae,Z.$7.FootArmor,"Greaves"),Ae);function He(e){var n;return null!==(n=Be[e])&&void 0!==n?n:e.replace(/(?=[A-Z])(?<=[a-z])/g," ")}function Oe(e){var n,t,l,a,o,s,c,u=e.value,d=e.onChange,h=e.sellables,m=function(e){var n="string"===typeof e?e:e.baseItem,t=h.find((function(e){return e.id===n}));return t&&t.cost?function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),r.forEach((function(n){Fe(e,n,t[n])}))}return e}({},t,{cost:Math.round(t.cost/3)}):null},f=F();if(!f)return null;var x=[];(null===(n=f.equipment.leftHand)||void 0===n?void 0:n.id)&&x.push(f.equipment.leftHand.id),(null===(t=f.equipment.rightHand)||void 0===t?void 0:t.id)&&x.push(f.equipment.rightHand.id),(null===(l=f.equipment.bodyArmor)||void 0===l?void 0:l.id)&&x.push(f.equipment.bodyArmor.id),(null===(a=f.equipment.handArmor)||void 0===a?void 0:a.id)&&x.push(f.equipment.handArmor.id),(null===(o=f.equipment.legArmor)||void 0===o?void 0:o.id)&&x.push(f.equipment.legArmor.id),(null===(s=f.equipment.headArmor)||void 0===s?void 0:s.id)&&x.push(f.equipment.headArmor.id),(null===(c=f.equipment.footArmor)||void 0===c?void 0:c.id)&&x.push(f.equipment.footArmor.id);var v=f.inventory.filter((function(e){return!e.enchantment})).filter((function(e){return e.type!==Z.$7.Quest})).sort((function(e,n){return e.level-n.level})),p="Sell non-enchanted gear";return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"sell-shop-select-label",children:p}),(0,r.jsx)($.Z,{id:"sell-shop-select",labelId:"sell-shop-select-label",value:u||"",label:p,onChange:function(e){var n=e.target.value,t=f.inventory.find((function(e){return e.id===n}));if(t){var r=m(t);r&&r.cost&&d&&d({id:n,name:Y(t),cost:r.cost})}},children:v.map((function(e){var n=m(e);return(0,r.jsxs)(L.Z,{value:e.id,disabled:!n||!!e.enchantment||x.indexOf(e.id)>=0,children:[(null===n||void 0===n?void 0:n.cost)&&"".concat(Y(e),": ").concat(n.cost.toLocaleString()," Gold"),!(null===n||void 0===n?void 0:n.cost)&&e.name," ",x.indexOf(e.id)>=0&&"*EQUIPPED*"]},e.id)}))})]})})}function Te(e){var n=e.type,t=e.items,i=e.value,l=e.onChange,a=F(),o=He(n),s="".concat(o," Shop");return a?(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"".concat(n,"-shop-select-label"),children:s}),(0,r.jsx)($.Z,{id:"".concat(n,"-shop-select"),labelId:"".concat(n,"-shop-select-label"),value:i||"",label:s,onChange:function(e){var n=e.target.value,r=t.find((function(e){return e.id===n}));l&&r&&r.cost&&l({id:n,name:r.name,cost:r.cost})},children:t.map((function(e){return(0,r.jsxs)(L.Z,{value:e.id,disabled:!e.cost||e.cost>a.gold,children:[e.cost&&"".concat(e.name,": ").concat(e.cost.toLocaleString()," Gold"),!e.cost&&e.name]},e.id)}))})]}):null}function De(){var e=qe((0,B.g)(),1)[0],n=(0,i.useState)(null),t=n[0],l=n[1],a=(0,i.useState)(""),s=a[0],c=a[1],h=(0,Z.Cb)(),m=h.data,f=(h.loading,h.error,qe((0,Z.Nn)(),2)),x=f[0],v=f[1].loading,g=qe((0,Z.o_)(),2),j=g[0],y=g[1].loading||v||e>0;function b(){return(b=We(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,l(null),e.next=6,x({variables:{baseItem:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}function k(){return(k=We(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,l(null),e.next=6,j({variables:{item:t.id}});case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(2);case 10:case"end":return e.stop()}}),e,null,[[2,8]])})))).apply(this,arguments)}var S,A="Choose which shop to visit";return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsxs)(u.Z,{align:"center",children:["Welcome to the shop! You can buy and sell any non-enchanted items here.",(0,r.jsx)("br",{})]}),(0,r.jsx)("br",{}),(0,r.jsx)(o.Z,{}),(0,r.jsx)("br",{}),(0,r.jsxs)(d.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"shop-type-select-label",children:A}),(0,r.jsxs)($.Z,{id:"shop-type-select",labelId:"shop-type-select-label",value:s,label:A,onChange:function(e){c(e.target.value),l(null)},children:[(0,r.jsx)(L.Z,{value:"sell",children:"Sell Items"}),(0,r.jsx)(o.Z,{}),(0,r.jsxs)(L.Z,{value:Z.$7.MeleeWeapon,children:[He(Z.$7.MeleeWeapon)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.RangedWeapon,children:[He(Z.$7.RangedWeapon)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.SpellFocus,children:[He(Z.$7.SpellFocus)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.Shield,children:[He(Z.$7.Shield)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.BodyArmor,children:[He(Z.$7.BodyArmor)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.HandArmor,children:[He(Z.$7.HandArmor)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.LegArmor,children:[He(Z.$7.LegArmor)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.HeadArmor,children:[He(Z.$7.HeadArmor)," Shop"]}),(0,r.jsxs)(L.Z,{value:Z.$7.FootArmor,children:[He(Z.$7.FootArmor)," Shop"]})]})]})}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,children:[""!==s&&"sell"!==s&&(0,r.jsx)(Te,{value:t?t.id:null,type:s,items:function(e){var n;return(null===m||void 0===m||null===(n=m.shopItems)||void 0===n?void 0:n.length)?m.shopItems.filter((function(n){return n.type===e})):[]}(s),onChange:function(e){return l(e)}},s),"sell"===s&&(0,r.jsx)(Oe,{value:t?t.id:null,sellables:null!==(S=null===m||void 0===m?void 0:m.shopItems)&&void 0!==S?S:[],onChange:function(e){return l(e)}})]}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:t&&(0,r.jsxs)(E.Z,{variant:"contained",color:"sell"===s?"error":"success",fullWidth:!0,disabled:y,onClick:"sell"===s?function(){return k.apply(this,arguments)}:function(){return b.apply(this,arguments)},children:["sell"===s?"Sell":"Buy"," ",t.name," for"," ",t.cost.toLocaleString()," gold"]})})]}),(0,r.jsx)("br",{})]})}function Re(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Qe(e,n,t,r,i,l,a){try{var o=e[l](a),s=o.value}catch(c){return void t(c)}o.done?n(s):Promise.resolve(s).then(r,i)}function Ue(e){return function(){var n=this,t=arguments;return new Promise((function(r,i){var l=e.apply(n,t);function a(e){Qe(l,r,i,a,o,"next",e)}function o(e){Qe(l,r,i,a,o,"throw",e)}a(void 0)}))}}function Ke(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Re(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Re(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ge(e){var n,t=e.hero,l=e.slot,a=e.label,o=e.onEquip,s=e.disabled,c=null===(n=t.equipment[l])||void 0===n?void 0:n.id,d=["leftHand","rightHand","bodyArmor","handArmor","legArmor","headArmor","footArmor"].filter((function(e){return t.equipment[e]&&e!==l})).map((function(e){var n;return null===(n=t.equipment[e])||void 0===n?void 0:n.id})),h=(0,i.useState)(c||""),m=(h[0],h[1]),f=t.inventory.filter((function(e){return function(e,n){switch(e){case"rightHand":case"leftHand":return n.type===Z.$7.MeleeWeapon||n.type===Z.$7.RangedWeapon||n.type===Z.$7.Shield||n.type===Z.$7.SpellFocus;case"bodyArmor":return n.type===Z.$7.BodyArmor;case"handArmor":return n.type===Z.$7.HandArmor;case"legArmor":return n.type===Z.$7.LegArmor;case"headArmor":return n.type===Z.$7.HeadArmor;case"footArmor":return n.type===Z.$7.FootArmor;default:return!1}}(l,e)})).sort((function(e,n){return e.level-n.level}));return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"".concat(l,"-equip-select-label"),children:a}),(0,r.jsx)($.Z,{id:"".concat(l,"-equip-select"),labelId:"".concat(l,"-equip-select-label"),value:c||"",label:a,disabled:s,onChange:function(e){m(e.target.value),o(l,e.target.value)},children:f.map((function(e){return(0,r.jsxs)(L.Z,{value:e.id,disabled:d.indexOf(e.id)>=0,children:[e.id===c?(0,r.jsx)("b",{children:Y(e)}):Y(e),e.enchantment&&(0,r.jsxs)(u.Z,{variant:"subtitle2",sx:{color:"primary.main"},children:["\xa0",Ne(e.enchantment)]})]},e.id)}))})]})})})}function Ye(e){var n=e.hero,t=e.disabled,l=(0,i.useState)(""),a=l[0],o=l[1],s=n.inventory.filter((function(e){return e.type===Z.$7.Quest})).sort((function(e,n){return n.level-e.level})),c="Quest items";return(0,r.jsx)(i.Fragment,{children:(0,r.jsx)("div",{children:(0,r.jsxs)(I.Z,{fullWidth:!0,children:[(0,r.jsx)(M.Z,{id:"quest-item-label",children:c}),(0,r.jsx)($.Z,{id:"quest-item",labelId:"quest-item-label",value:a,label:c,disabled:t,onChange:function(e){o(e.target.value)},children:s.map((function(e){return(0,r.jsxs)(L.Z,{value:e.id,children:[Y(e),"???"!==Ne(e.baseItem)&&(0,r.jsxs)(u.Z,{variant:"subtitle1",sx:{color:"primary.main"},children:["\xa0",Ne(e.baseItem)]})]},e.id)}))})]})})})}function ze(){var e=Ke((0,B.g)(),1)[0],n=Ke((0,Z.aP)(),2),t=n[0],l=n[1].loading,a=F(),o=l||e>0;if(!a)return null;function s(e,n){return c.apply(this,arguments)}function c(){return(c=Ue(p().mark((function e(n,r){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t({variables:{item:r,slot:n}});case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})))).apply(this,arguments)}return(0,r.jsx)(i.Fragment,{children:(0,r.jsxs)(d.ZP,{container:!0,columns:6,spacing:1,children:[(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(u.Z,{children:"Equipped items"})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ge,{hero:a,slot:"leftHand",label:"Left Hand",onEquip:s,disabled:o})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ge,{hero:a,slot:"rightHand",label:"Right Hand",onEquip:s,disabled:o})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ge,{hero:a,slot:"bodyArmor",label:"Body Armor",onEquip:s,disabled:o})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ge,{hero:a,slot:"handArmor",label:"Gauntlets",onEquip:s,disabled:o})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ge,{hero:a,slot:"legArmor",label:"Leggings",onEquip:s,disabled:o})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ge,{hero:a,slot:"headArmor",label:"Helmets",onEquip:s,disabled:o})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ge,{hero:a,slot:"footArmor",label:"Greaves",onEquip:s,disabled:o})}),(0,r.jsx)(d.ZP,{item:!0,xs:6,sm:3,children:(0,r.jsx)(Ye,{hero:a,disabled:o})})]})})}function Ne(e){switch(e){case"fishermans-strength":return"+50% Strength";case"fishermans-dexterity":return"+50% Dexterity";case"fishermans-constitution":return"+50% Constitution";case"fishermans-intelligence":return"+50% Intelligence";case"fishermans-wisdom":return"+50% Wisdom";case"fishermans-charisma":return"+50% Charisma";case"fishermans-luck":return"+50% Luck";case Z.kj.BonusStrength:return"+20% Strength";case Z.kj.BonusDexterity:return"+20% Dexterity";case Z.kj.BonusConstitution:return"+20% Constitution";case Z.kj.BonusIntelligence:return"+20% Intelligence";case Z.kj.BonusWisdom:return"+20% Wisdom";case Z.kj.BonusCharisma:return"+20% Charisma";case Z.kj.BonusLuck:return"+20% Luck";case Z.kj.BonusPhysical:return"+10% Strength, Dexterity, Constitution";case Z.kj.BonusMental:return"+10% Intelligence, Wisdom, Charisma";case Z.kj.BonusAllStats:return"+10% All Stats";case Z.kj.Vampire:return"Leach HP";case Z.kj.MinusEnemyArmor:return"-20% Enemy Armor";case Z.kj.BonusArmor:return"+20% Armor";case Z.kj.MinusEnemyStrength:return"-20% Enemy Strength";case Z.kj.MinusEnemyDexterity:return"-20% Enemy Dexterity";case Z.kj.MinusEnemyConstitution:return"-20% Enemy Constitution";case Z.kj.MinusEnemyIntelligence:return"-20% Enemy Intelligence";case Z.kj.MinusEnemyWisdom:return"-20% Enemy Wisdom";case Z.kj.MinusEnemyCharisma:return"-20% Enemy Charisma";case Z.kj.MinusEnemyPhysical:return"-10% Enemy Strength, Dexterity, Constitution";case Z.kj.MinusEnemyMental:return"-10% Enemy Intelligence, Wisdom, Charisma";case Z.kj.MinusEnemyAllStats:return"-10% All Enemy Stats";default:return"???"}}var _e=t(9104);function Ve(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function Xe(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return Ve(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Ve(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e){var n=e.event.message,t=Xe((0,Z.PF)(),2),i=t[0],l=t[1].loading;return(0,r.jsx)(_e.Z,{children:(0,r.jsxs)(a.Z,{sx:{bgcolor:"success.light",color:"success.contract",fontStyle:"italic",padding:2},children:[n&&n.map((function(e,n){return(0,r.jsx)(u.Z,{children:e},"".concat(n))})),(0,r.jsx)("br",{}),(0,r.jsx)(o.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(E.Z,{variant:"contained",color:"error",onClick:function(){i()},disabled:l,children:"Dismiss Message"}),(0,r.jsx)("br",{})]})})}function en(e){var n,t=e.quest;return(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(u.Z,{variant:"h5",children:"Washed Up"}),(0,r.jsx)(u.Z,{children:"Learning how to swim across the ocean is harder than you think..."}),(null===(n=t.lastEvent)||void 0===n?void 0:n.message)&&(0,r.jsxs)(a.Z,{sx:{bgcolor:"warning.light",color:"warning.contrast",margin:2,padding:2},children:[(0,r.jsx)(u.Z,{variant:"h6",children:"Last event:"}),t.lastEvent.message.map((function(e,n){return(0,r.jsx)(u.Z,{sx:{fontStyle:"italic"},children:e},"".concat(n))}))]})]})}function nn(){var e=F();if(!e)return null;var n=e.questLog;e.currentQuest;return 2===Object.values(n).filter((function(e){return!!e})).length?(0,r.jsx)(a.Z,{children:"You have not yet started any quests. Explore the world and grow stronger."}):(0,r.jsxs)(a.Z,{children:[(0,r.jsx)(u.Z,{variant:"h4",children:"Quest Log"}),(0,r.jsx)("br",{}),n.washedUp&&(0,r.jsx)(en,{quest:n.washedUp})]})}function tn(e,n){return"".concat((Math.round(e/n*1e3)/10).toLocaleString(),"%")}function rn(e){var n=e.stats;return(0,r.jsx)(a.Z,{children:(0,r.jsxs)(d.ZP,{container:!0,columns:6,spacing:2,children:[(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Strength"}),": ",n.stats.strength.toLocaleString()]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Dexterity"}),": ",n.stats.dexterity.toLocaleString()]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Constitution"}),": ",n.stats.constitution.toLocaleString()]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Intelligence"}),": ",n.stats.intelligence.toLocaleString()]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Wisdom"}),": ",n.stats.wisdom.toLocaleString()]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Charisma"}),": ",n.stats.charisma.toLocaleString()]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Luck"}),": ",n.stats.luck.toLocaleString()]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Armor"}),": ",tn(1-n.damageReduction,1)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Bonus Damage"}),":"," ",tn(n.damageAmplification-1,1)]}),(0,r.jsx)(d.ZP,{item:!0,xs:6,children:(0,r.jsx)(d.ZP,{})}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Strength"}),":"," ",tn(n.enemyStats.strength-1e6,1e6)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Dexterity"}),":"," ",tn(n.enemyStats.dexterity-1e6,1e6)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Constitution"}),":"," ",tn(n.enemyStats.constitution-1e6,1e6)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Intelligence"}),":"," ",tn(n.enemyStats.intelligence-1e6,1e6)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Wisdom"}),":"," ",tn(n.enemyStats.wisdom-1e6,1e6)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Charisma"}),":"," ",tn(n.enemyStats.charisma-1e6,1e6)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Enemy Luck"}),":"," ",tn(n.enemyStats.luck-1e6,1e6)]}),(0,r.jsxs)(d.ZP,{item:!0,xs:6,sm:3,md:2,lg:2,children:[(0,r.jsx)("b",{children:"Armor Reduction"}),":"," ",tn(n.armorReduction-1,1)]})]})})}function ln(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}function an(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var r,i,l=[],a=!0,o=!1;try{for(t=t.call(e);!(a=(r=t.next()).done)&&(l.push(r.value),!n||l.length!==n);a=!0);}catch(s){o=!0,i=s}finally{try{a||null==t.return||t.return()}finally{if(o)throw i}}return l}}(e,n)||function(e,n){if(!e)return;if("string"===typeof e)return ln(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ln(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function on(){var e,n,t,v=(0,l.useRouter)(),p=an((0,ue.d)(),2),g=p[0],j=(p[1],(0,Z.UE)()),y=j.data,b=j.loading,k=j.error,S=(0,i.useState)("1"),A=S[0],w=S[1],P=(0,Z.Wg)({pollInterval:1e4}).data,E=null!==(t=null===y||void 0===y||null===(e=y.me)||void 0===e||null===(n=e.account)||void 0===n?void 0:n.hero)&&void 0!==t?t:null;return k||!g?(v.push("/?auth=".concat(v.asPath)),(0,r.jsxs)(x.A,{children:[(0,r.jsx)("br",{}),"Redirecting..."]})):b?(0,r.jsx)(x.A,{children:b&&(0,r.jsx)(s.Z,{})}):(0,r.jsxs)(x.A,{showHero:!0,children:[(0,r.jsxs)(i.Fragment,{children:[E&&E.attributePoints>0&&(0,r.jsx)(Me,{}),E&&E.currentQuest&&(0,r.jsx)(Je,{event:E.currentQuest})]}),(0,r.jsxs)(a.Z,{sx:{width:"100%",typography:"body1"},children:[(0,r.jsxs)(h.ZP,{value:A,children:[(0,r.jsx)(a.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,r.jsxs)(m.Z,{onChange:function(e,n){w(n)},"aria-label":"navigation tabs",variant:"scrollable",children:[(0,r.jsx)(c.Z,{label:"Welcome / News",value:"1"}),(0,r.jsx)(c.Z,{label:"Combat",value:"2"}),(0,r.jsx)(c.Z,{label:"Shop",value:"3"}),(0,r.jsx)(c.Z,{label:"Inventory",value:"4"}),(0,r.jsx)(c.Z,{label:"Map",value:"5"}),(0,r.jsx)(c.Z,{label:"Quest Log",value:"6"}),(0,r.jsx)(c.Z,{label:"Character Stats",value:"7"})]})}),(0,r.jsx)(f.Z,{value:"1",children:(0,r.jsxs)(d.ZP,{container:!0,columns:12,spacing:4,children:[(0,r.jsxs)(d.ZP,{item:!0,xs:12,sm:7,md:8,lg:9,children:[(0,r.jsx)(u.Z,{children:"Welcome to the game! I'm updating things extremely regularly, so check back often and refresh often. Use the tabs above to navigate around."}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:"Combat has been heavily overhauled in order to accomidate the new equipment!"}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:"There are 6 different types of combat available, each uses a different primary attribute, as well as an item shop to buy and equip the new items."}),(0,r.jsx)("br",{}),(0,r.jsx)(u.Z,{children:"The map is fully functional! Be sure to travel around before travel gets harder..."})]}),(null===P||void 0===P?void 0:P.leaderboard)&&(0,r.jsxs)(d.ZP,{item:!0,xs:12,sm:5,md:4,lg:3,children:[(0,r.jsx)(u.Z,{variant:"h6",children:"Top levels:"}),(0,r.jsx)("ul",{id:"leaderboard-list",children:P.leaderboard.map((function(e,n){return(0,r.jsxs)("li",{id:"leaderboard-list-".concat(n),children:[(0,r.jsx)("b",{id:"leaderboard-list-".concat(n,"-name"),children:e.name})," ",e.level.toLocaleString()]},e.id)}))})]})]})}),(0,r.jsxs)(f.Z,{value:"2",children:[(0,r.jsx)(u.Z,{children:"Challenge a monster from the list, then fight it to the death. Note that other players in the same location see the same monster lists, so they may get to it first!"}),(0,r.jsx)("br",{}),(0,r.jsx)(ce,{})]}),(0,r.jsx)(f.Z,{value:"3",children:(0,r.jsx)(De,{})}),(0,r.jsx)(f.Z,{value:"4",children:(0,r.jsx)(ze,{})}),(0,r.jsx)(f.Z,{value:"5",children:(0,r.jsx)(Se,{})}),(0,r.jsx)(f.Z,{value:"6",children:(0,r.jsx)(nn,{})}),(0,r.jsx)(f.Z,{value:"7",children:(null===E||void 0===E?void 0:E.combatStats)&&(0,r.jsx)(rn,{stats:E.combatStats})})]}),(0,r.jsx)("br",{}),(0,r.jsx)(o.Z,{}),(0,r.jsx)("br",{}),(0,r.jsx)(C,{})]})]})}}}]);